JetstarCommonData={urlToSubCategoryMap:{"search.aspx$":"search","select.aspx$":"select","passengers.aspx$":"passenger","passenger.aspx$":"passenger","seats.aspx$":"seats","extras.aspx$":"extras","addons.aspx$":"addons","pay.aspx$":"payment","payment.aspx$":"payment","itinerary.aspx$":"itinerary"},searchTypeFormattedValues:{For:{DataLayer:{OneWay:"One Way",RoundTrip:"Return",OpenJaw:"Multi-City"},Boxever:{OneWay:"OW",RoundTrip:"RT",OpenJaw:"MC"}}}};JetstarCommonData.Event={Select:"VirtualPV-Select",Confirm:"VirtualPV-Confirm",AddedToCart:"VirtualPV-AddedToCart",AddToCart:"AddToCart",CarRentalBooked:"CarRentalBooked",BookingUpdated:"VirtualPV-MMT-BookingUpdated",MMTYourTripTab:"VirtualPV-MMT-YourTrip",MMTPassengerTab:"VirtualPV-MMT-Passengers",MMTSummaryTab:"VirtualPV-MMT-Summary"};JetstarCommonData.CartProducts=(function(){var allCartProducts={BaggageChange:"Baggage",SeatChange:"Seat",ComfortPackChange:"ComfortPack",EntertainmentPackChange:"InflightEntertainment",MealChange:"Meal",HotelChange:"Hotel",ActivityChange:"Activity",CarHireChange:"Car",InsuranceChange:"Insurance",TransferChange:"Transfer",ParkingChange:"Parking"};return{all:function(){return allCartProducts},findOrDefault:function(changeType){var cartProduct=this.find(changeType);if(!cartProduct){cartProduct=""}return cartProduct},find:function(changeType){return allCartProducts[changeType]}}})();JetstarCommonData.Event={Select:"VirtualPV-Select",Confirm:"VirtualPV-Confirm",AddedToCart:"VirtualPV-AddedToCart",AddToCart:"AddToCart",CarRentalBooked:"CarRentalBooked",BookingUpdated:"VirtualPV-MMT-BookingUpdated",MMTYourTripTab:"VirtualPV-MMT-YourTrip",MMTPassengerTab:"VirtualPV-MMT-Passengers",MMTSummaryTab:"VirtualPV-MMT-Summary"};JetstarCommonData.Culture=function(country,language){var instance={};instance.getCountry=function(){return country};instance.getLanguage=function(){return language};return instance};JetstarCommonData.cultures=(function(){var allCultures={"en-AU":JetstarCommonData.Culture("Australia","English"),"en-NZ":JetstarCommonData.Culture("New Zealand","English"),"ja-JP":JetstarCommonData.Culture("Japan","Japanese"),"en-JM":JetstarCommonData.Culture("Japan","English"),"en-TT":JetstarCommonData.Culture("Indonesia","English"),"id-ID":JetstarCommonData.Culture("Indonesia","Bahasa Indonesia"),"en-GB":JetstarCommonData.Culture("Malaysia","English"),"ms-MY":JetstarCommonData.Culture("Malaysia","Bahasa Malaysia"),"th-TH":JetstarCommonData.Culture("Thailand","Thai"),"en-ZW":JetstarCommonData.Culture("Thailand","English"),"vi-VN":JetstarCommonData.Culture("Vietnam","Vietnamese"),"en-ZA":JetstarCommonData.Culture("Vietnam","English"),"en-CA":JetstarCommonData.Culture("Singapore","English"),"zh-SG":JetstarCommonData.Culture("Singapore","Chinese Simplified"),"en-US":JetstarCommonData.Culture("United States","English"),"zh-CN":JetstarCommonData.Culture("China","Chinese Simplified"),"zh-HK":JetstarCommonData.Culture("Hong Kong","Chinese Traditional"),"en-BZ":JetstarCommonData.Culture("Hong Kong","English"),"ko-KR":JetstarCommonData.Culture("Korea","Korean"),"en-PH":JetstarCommonData.Culture("Philippines","English")};return{all:function(){return allCultures},findOrDefault:function(cultureCode){var cultureDetails=this.find(cultureCode);if(!cultureDetails){cultureDetails=this.find("en-AU")}return cultureDetails},find:function(cultureCode){return allCultures[cultureCode]}}})();var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.BaggageInfo=function(dataElement){var instance=JetstarAnalyticsTypes.PassengerProductInfo(dataElement);var prodcutDataAttrs=instance.dataElementAttributes();instance.dataElementAttributes=function(){return _$.extend({},prodcutDataAttrs,{weight:"weight"})};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.BookingContactInfo=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{bookingContactFirstName:"bookingcontactfirstname",bookingContactLastName:"bookingcontactlastname",bookingContactFullName:"bookingcontactfullname",bookingContactEmailAddress:"bookingcontactemailaddress",bookingContactGender:"bookingcontactgender",bookingContactSalutation:"bookingcontactsalutation",bookingContactStreetAddress:"bookingcontactstreetaddress",bookingContactCity:"bookingcontactcity",bookingPostalCode:"bookingcontactpostalcode",bookingCountry:"bookingcontactcountry",bookingPhoneNumber:"bookingcontactphonenumber",bookingContactMobileNumber:"bookingcontactmobilenumber",bookingContactAge:"bookingcontactage",bookingContactDestination:"bookingcontactdestination"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.Domain=function(dataElement){var instance={};var injector=JetstarAnalyticsTypes.DataInjector(function(key){return dataElement.data(key)});instance.toDataLayerObj=function(){var dataLayerObj={};_$.each(instance.dataElementAttributes(),function(key,value){dataLayerObj[key]=injector.process(value)});return dataLayerObj};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.FlightLegInfo=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{departureStation:"departurestation",arrivalStation:"arrivalstation",flightNumber:"flightnumber",carrierCode:"carriercode",flightKey:"flightkey"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.FlightSearch=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.toExpectedDateFormat=function(isoDateString){return JetstarAnalytics.Utility.getDate(isoDateString,"dd/MM/yyyy")};instance.toFlightSearchFormat=function(flightSearchFormat){return JetstarCommonData.searchTypeFormattedValues.For.DataLayer[flightSearchFormat]};instance.dataElementAttributes=function(){return{flightSearchDestinationType:"flightsearchdestinationtype",flightSearchFareOutbound:"flightsearchfareoutbound",flightSearchFareInbound:"flightsearchfareinbound",flightSearchRouting:["flightsearchrouting",instance.toFlightSearchFormat],flightSearchPax:"flightsearchpax",flightSearchAdult:"flightsearchadult",flightSearchChild:"flightsearchchild",flightSearchInfant:"flightsearchinfant",flightSearchSegmentPax:"flightsearchsegmentpax",flightSearchOutboundOrigin:"userchosenoutboundorigin",flightSearchOutboundDestination:"userchosenoutbounddestination",flightSearchOutboundDate:["userchosenoutbounddepartdate",instance.toExpectedDateFormat],flightSearchInboundDate:["userchosenoutboundreturndate",instance.toExpectedDateFormat],flightSearchDaysToDeparture:"flightsearchdaystodeparture",flightSearchDaysTripDuration:"flightsearchdaystripduration",flightSearchSaleOutbound:"flightsearchsaleoutbound",flightSearchSaleInbound:"flightsearchsaleinbound",holidaySearchPcode:"flightsearchpackagecode",_flightSearchOutboundDateIso:"userchosenoutbounddepartdate",_flightSearchInboundDateIso:"userchosenoutboundreturndate",_searchProductType:function(){return"FLIGHT"},_flightInitialSearchOutboundOrigin:"flightinitialsearchoutboundorigin",_flightInitialSearchOutboundDestination:"flightinitialsearchoutbounddestination",_flightSearchRoutingInternal:"flightsearchrouting",_flightInitialSearchOutboundDepartDate:"flightinitialsearchoutbounddepartdate",_flightInitialSearchOutboundReturnDate:"flightinitialsearchoutboundreturndate",_userChosenOutboundOrigin:"userchosenoutboundorigin",_userChosenOutboundDestination:"userchosenoutbounddestination",_journeyTotalFare:"journeytotalfare"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.FlightSegmentInfo=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.formatFlightNumber=function(fullFlightNumber){var trimmedFlightNumber=fullFlightNumber.trim();var parts=trimmedFlightNumber.split(" ");if(parts.length<2){return trimmedFlightNumber}var carrierCode=parts[0];var flightNumber=parts[parts.length-1];return[carrierCode,flightNumber].join(" ")};instance.dataElementAttributes=function(){return{flightsegmentarrivalstation:"flightsegmentarrivalstation",flightsegmentdeparturestation:"flightsegmentdeparturestation",flightsegmentcabinclass:"flightsegmentcabinclass",flightsegmentbookingclass:"flightsegmentbookingclass",flightsegmentfareclass:"flightsegmentfareclass",flightsegmentcarriercode:"flightsegmentcarriercode",flightsegmentflightnumber:["flightsegmentflightnumber",instance.formatFlightNumber],flightsegmentarrivaltime:"flightsegmentarrivaltime",flightsegmentdeparturetime:"flightsegmentdeparturetime",flightsegmentfare:"flightsegmentfare",flightsegmentflightkey:"flightsegmentflightkey",flightsegmentbundleprice:"flightsegmentbundleprice",flightsegmentlocaldeparturetime:"flightsegmentlocaldeparturetime",flightsegmentlocalarrivaltime:"flightsegmentlocalarrivaltime"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.GoogleAnalytic=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{utm_source:"utm_source",utm_medium:"utm_medium",utm_content:"utm_content",utm_campaign:"utm_campaign",sitecore_pos:"sitecore_pos",rrid:"rrid",rmid:"rmid",country_pos:"country_pos",all_params:"all_params"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.MerchandiseProduct=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{merchProductName:"name"}};return instance};JetstarAnalyticsTypes.MerchandiseProduct.addMerchandisedProductToDataLayer=function(name){var merchandisedProducts=analyticsDataLayer.get("merchProductViewed");var merchandisedProduct=Enumerable.From(merchandisedProducts).Where(function(x){return x.merchProductName==name}).FirstOrDefault();if(merchandisedProduct===undefined){analyticsDataLayer.pushTo("merchProductViewed",{merchProductName:name})}};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.Page=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.getCountry=function(cultureCode){return JetstarCommonData.cultures.findOrDefault(cultureCode).getCountry()};instance.getLanguage=function(cultureCode){return JetstarCommonData.cultures.findOrDefault(cultureCode).getLanguage()};instance.getPageCulture=function(cultureCode){return instance.getCountry(cultureCode)+" "+instance.getLanguage(cultureCode)};instance.getPageCategory=function(currentFlow){return currentFlow==="SBFlow"||currentFlow==="MyJetstarFlow"?"book-flights":""};instance.getPageSubCategory=function(currentFlow){if(currentFlow!=="SBFlow"&&currentFlow!=="MyJetstarFlow"){return""}var subCategory="";var lowerCaseLocation=instance.getWindowLocation().toLowerCase();_$.each(JetstarCommonData.urlToSubCategoryMap,function(key,value){if(new RegExp(key).test(lowerCaseLocation)){subCategory=value;return false}return true});return subCategory};instance.getWindowLocation=function(){return window.location.pathname};instance.getWindowHostname=function(){return window.location.hostname};instance.getPageName=function(){return JetstarAnalytics.Utility.getPageName(window.document)};instance.dataElementAttributes=function(){return{page:instance.getPageName,pageSkysalesCode:"culture",pageCulture:["culture",instance.getPageCulture],pageCountry:["culture",instance.getCountry],pageLanguage:["culture",instance.getLanguage],pageHostname:instance.getWindowHostname,pageSite:function(){return"NewSkies"},pageMode:"mode",pageCategory:["current-flow",instance.getPageCategory],pageSubCategory:["current-flow",instance.getPageSubCategory],pageCurrencyCode:"currency-code",pageCurrencySymbol:"currency-symbol"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.PassengerInfo=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{type:"type",title:"title",firstName:"firstname",middleName:"middlename",lastName:"lastname",dob:"dob",nationality:"nationality",passportNumber:"passportnumber",passportExpiry:"passportexpiry",passengerNumber:"passengernumber",passengerFrequentFlyerNumber:"passengerfrequentflyernumber"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.PassengerProductInfo=function(dataElement){var instance=JetstarAnalyticsTypes.ProductInfo(dataElement);var productDataAttrs=instance.dataElementAttributes();instance.dataElementAttributes=function(){return _$.extend({},productDataAttrs,{passengerNumber:"passengernumber"})};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.ProductInfo=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{type:"type",name:"name",sku:"sku",priceInAud:"priceinaud",priceInBookingCurrency:"price",quantity:"quantity",flightKey:"flightkey",journey:"journey",addedInCurrentC3:"addedincurrentc3"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.SeatInfo=function(dataElement){var instance=JetstarAnalyticsTypes.PassengerProductInfo(dataElement);var productDataAttrs=instance.dataElementAttributes();instance.dataElementAttributes=function(){return _$.extend({},productDataAttrs,{seatNumber:"seatnumber"})};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.Transaction=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.dataElementAttributes=function(){return{transactionPNR:"transactionpnr",bookingCurrency:"bookingcurrency",bookingTotalPrice:"bookingtotalprice",transactionIsHoldPayment:"transactionisholdpayment",transactionIntendedPaymentMethod:"transactionintendedpaymentmethod",transactionPaymentMethod:"transactionpaymentmethod",transactionTotal:"transactiontotal",transactionCurrencyCode:"transactioncurrency",transactionTotalOriginalCurrency:"transactiontotaloriginalcurrency",transactionDate:"transactiondate",transactionTime:"transactiontime",transactionId:"transactionid",transactionType:"transactiontype",_transactionCardType:"transactioncardtype",pageItineraryType:"itinerarypagetype"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.Visitor=function(dataElement){var instance=JetstarAnalyticsTypes.Domain(dataElement);instance.getType=function(userType,memberType){var type="Guest";if(userType==="MEMBER"){type=memberType==="Club"?"ClubJetstar":"MyJetstar"}else{if(userType.match(/agent/i)){type="Trade"}}return type};instance.getPnrs=function(upcomingPnrs){return upcomingPnrs||[]};instance.getPreferredCulture=function(preferredCultureCode){var culture=JetstarCommonData.cultures.find(preferredCultureCode);if(culture){return culture.getCountry()+" "+culture.getLanguage()}return""};instance.dataElementAttributes=function(){return{visitorType:["user-type","member-type",instance.getType],visitorId:"visitor-id",visitorFirstName:"visitor-first-name",visitorLastName:"visitor-last-name",visitorEmail:"visitor-email",visitorGender:"visitor-gender",visitorCountry:"visitor-country",visitorState:"visitor-state",visitorPhone:"visitor-phone",visitorNationality:"visitor-nationality",visitorExistingCustomer:"visitor-existing-customer",visitorLifetimeValue:"visitor-lifetime-value",visitorFuturePnrs:["visitor-upcoming-pnrs",instance.getPnrs],visitorPreferredJQSite:["visitor-preferred-jq-site",instance.getPreferredCulture]}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.DataElement=function(id){var instance={};if(typeof id==="string"){instance._dataElement=_$("#"+id)}if(typeof id==="object"){instance._dataElement=_$(id)}instance.data=function(attr){var data=this._dataElement.data(attr);if(data===undefined||data===null){data=""}return data};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.DataInjector=function(dataProviderFunc){var instance={};instance.process=function(key){if(typeof key==="string"){return dataProviderFunc(key)}else{if(typeof key==="function"){return key()}else{if(key instanceof Array){var functionToCall=key[key.length-1];var valuesToInject=key.slice(0,key.length-1);var valuesFromProvider=[];_$.each(valuesToInject,function(index,value){valuesFromProvider.push(dataProviderFunc(value))});return functionToCall.apply({},valuesFromProvider)}}}return""};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.AddonInfoMapping=function(){var instance=BEDatalayer.ProductInfoMapping();instance.DatalayerMappings=function(){return{addons:"_addons"}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.AncillaryInfoMapping=function(){var instance=BEDatalayer.ProductInfoMapping();instance.DatalayerMappings=function(){return{ancillaries:["_ancillaries","_passengers","_flightSegments","_flightLegs",instance.addFlightAndPassengerDetailsToProducts]}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.BaggageInfoMapping=function(){var instance=BEDatalayer.ProductInfoMapping();instance.DatalayerMappings=function(){return{baggages:["_baggages","_passengers","_flightSegments","_flightLegs",instance.addFlightAndPassengerDetailsToProducts]}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.BookingConfirmationMapping=function(){var instance={};instance.DatalayerMappings=function(){return{reference:"transactionPNR"}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.GlobalInfoMapping=function(){var instance={};instance.getLanguage=function(culture){return culture?culture.substring(0,2):""};instance.DatalayerMappings=function(){return{channel:function(){return"WEB"},language:["pageSkysalesCode",this.getLanguage],currency:"pageCurrencyCode",currencySymbol:"pageCurrencySymbol",page:"page",culture:"pageSkysalesCode"}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.PassengerMapping=function(){var instance={};instance.DatalayerMappings=function(){return{passengers:"_passengers",customer_firstname:"bookingContactFirstName",customer_lastname:"bookingContactLastName",customer_middlename:"",customer_email:"bookingContactEmailAddress",customer_gender:"bookingContactGender",customer_title:"bookingContactSalutation",customer_address:"bookingContactStreetAddress",customer_city:"bookingContactCity",customer_zip_code:"bookingPostalCode",customer_country:"bookingCountry",customer_phone_number:"bookingPhoneNumber",customer_mobile:"bookingContactMobileNumber",customer_age:"bookingContactAge",customer_opt:""}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.PayInfoMapping=function(){var instance={};instance.DatalayerMappings=function(){return{pay_type:"transactionPaymentMethod",cc_type:"_transactionCardType"}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.ProductInfoMapping=function(){var instance={};instance.getMatchingFlightDetails=function(product,flightSegments,flightLegs){var matchingSegment=Enumerable.From(flightSegments).FirstOrDefault(undefined,function(segment){return segment.flightsegmentflightkey===product.flightKey});if(matchingSegment){return{departureStation:matchingSegment.flightsegmentdeparturestation,arrivalStation:matchingSegment.flightsegmentarrivalstation,flightNumber:matchingSegment.flightsegmentflightnumber,carrierCode:matchingSegment.flightsegmentcarriercode}}var matchingLeg=Enumerable.From(flightLegs).FirstOrDefault(undefined,function(leg){return leg.flightKey===product.flightKey});return matchingLeg};instance.getMatchingPassenger=function(product,passengers){return Enumerable.From(passengers).FirstOrDefault(undefined,function(passenger){return passenger.passengerNumber===product.passengerNumber&&passenger.type!=="INF"})};instance.addFlightAndPassengerDetailsToProducts=function(products,passengers,flightSegments,flightLegs){var updatedProducts=[];if(products){_$.each(products,function(index,product){updatedProducts.push(_$.extend({},instance.mapProductInfo(product,passengers,flightSegments,flightLegs),product))})}return updatedProducts};instance.mapProductInfo=function(productInfo,passengers,segments,legs){var passenger=instance.getMatchingPassenger(productInfo,passengers);var stationDetails=instance.getMatchingFlightDetails(productInfo,segments,legs);return _$.extend({},passenger,stationDetails)};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.SearchInfoMapping=function(){var instance={};instance.toSearchType=function(searchType){return JetstarCommonData.searchTypeFormattedValues.For.Boxever[searchType]};instance.DatalayerMappings=function(){return{searchProductType:function(){return"FLIGHT"},searchOrigin:"_flightInitialSearchOutboundOrigin",searchDestination:"_flightInitialSearchOutboundDestination",searchStartDate:"_flightInitialSearchOutboundDepartDate",searchEndDate:"_flightInitialSearchOutboundReturnDate",searchAdults:"flightSearchAdult",searchChildren:"flightSearchChild",searchInfants:"flightSearchInfant",searchFlightType:["_flightSearchRoutingInternal",this.toSearchType]}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.SeatInfoMapping=function(){var instance=BEDatalayer.ProductInfoMapping();instance.DatalayerMappings=function(){return{seats:["_seats","_passengers","_flightSegments","_flightLegs",instance.addFlightAndPassengerDetailsToProducts]}};return instance};var BEDatalayer=BEDatalayer||{};BEDatalayer.SelectInfoMapping=function(){var instance={};instance.getProductName=function(origin,destination){return origin.concat("-",destination)};instance.DatalayerMappings=function(){return{selectProductType:function(){return"FLIGHT"},selectProductName:["_userChosenOutboundOrigin","_userChosenOutboundDestination",this.getProductName],selectOrigin:"_userChosenOutboundOrigin",selectDestination:"_userChosenOutboundDestination",selectPrice:"_journeyTotalFare",selectFlightSegments:"_flightSegments"}};return instance};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.BookingContactInfoTracker=function(){var instance={};var dataElement=JetstarAnalyticsTypes.DataElement("datalayer-booking-contact");instance.trackAnalyticsData=function(analyticsDataLayer){analyticsDataLayer.push(JetstarAnalyticsTypes.BookingContactInfo(dataElement).toDataLayerObj())};return instance};JetstarAnalyticsTypes.BookingContactInfoTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementPresent("datalayer-booking-contact")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.EventInfoTracker=function(){var instance={};instance.isProductPage=function(){var isProductPage=_$(".datalayer-event").data("is-product-page");if(isProductPage=="True"){return true}else{return false}};instance.isManageMyTrip=function(){var isManageMyTrip=_$(".datalayer-event").data("is-manage-my-trip");if(isManageMyTrip=="True"){return true}else{return false}};instance.isBookingUpdated=function(){var isBookingUpdated=_$(".datalayer-event").data("is-booking-updated");if(isBookingUpdated=="True"){return true}else{return false}};instance.isBookingUpdatedWithCarRental=function(){var isBookingUpdatedWithCarRental=_$(".datalayer-event").data("is-booking-updated-with-car-rental");if(isBookingUpdatedWithCarRental=="True"){return true}else{return false}};instance.getCarRentalAmount=function(){return _$(".datalayer-event").data("car-rental-amount")};instance.addEvent=function(name,source,value){if(window.analyticsDataLayer!=undefined){if(name==JetstarCommonData.Event.Select||name==JetstarCommonData.Event.Confirm||name==JetstarCommonData.Event.MMTYourTripTab||name==JetstarCommonData.Event.MMTPassengerTab||name==JetstarCommonData.Event.MMTSummaryTab){analyticsDataLayer.push({event:name})}else{analyticsDataLayer.push({event:name,cartProduct:source,cartValue:value})}}};instance.trackAnalyticsData=function(analyticsDataLayer){if(instance.isManageMyTrip()==true&&instance.isBookingUpdated()==false){analyticsDataLayer.push({event:JetstarCommonData.Event.MMTYourTripTab})}if(instance.isBookingUpdated()==true){analyticsDataLayer.push({event:JetstarCommonData.Event.BookingUpdated})}if(instance.isBookingUpdated()==true&&instance.isBookingUpdatedWithCarRental()==true){analyticsDataLayer.push({carRentalValue:instance.getCarRentalAmount(),event:JetstarCommonData.Event.CarRentalBooked})}if(instance.isProductPage()==true){analyticsDataLayer.push({event:JetstarCommonData.Event.Select})}};return instance};JetstarAnalyticsTypes.EventInfoTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-event")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.FlightSearchTracker=function(){var instance={};var flightSearchDataElement=JetstarAnalyticsTypes.DataElement("datalayer-flight-search");instance.trackAnalyticsData=function(analyticsDataLayer){analyticsDataLayer.push(JetstarAnalyticsTypes.FlightSearch(flightSearchDataElement).toDataLayerObj())};return instance};JetstarAnalyticsTypes.FlightSearchTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementPresent("datalayer-flight-search")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.FlightSegmentTracker=function(){var instance={};instance.trackAnalyticsData=function(analyticsDataLayer){var segmentInfos=[];_$(".datalayer-segment-info").each(function(index,element){var flightSegmentDataElement=JetstarAnalyticsTypes.DataElement(element);segmentInfos.push(JetstarAnalyticsTypes.FlightSegmentInfo(flightSegmentDataElement).toDataLayerObj())});analyticsDataLayer.push({_flightSegments:segmentInfos})};return instance};JetstarAnalyticsTypes.FlightSegmentTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-segment-info")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.GoogleAnalyticTracker=function(){var instance={};var googleAnalyticDataElement=JetstarAnalyticsTypes.DataElement("datalayer-google-analytic-tracking");instance.trackAnalyticsData=function(analyticsDataLayer){analyticsDataLayer.push(JetstarAnalyticsTypes.GoogleAnalytic(googleAnalyticDataElement).toDataLayerObj())};return instance};JetstarAnalyticsTypes.GoogleAnalyticTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementPresent("datalayer-google-analytic-tracking")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.LegInfoTracker=function(){var instance={};instance.trackAnalyticsData=function(analyticsDataLayer){var legs=[];_$(".datalayer-leg-info").each(function(index,element){var dataElement=JetstarAnalyticsTypes.DataElement(element);legs.push(JetstarAnalyticsTypes.FlightLegInfo(dataElement).toDataLayerObj())});analyticsDataLayer.push({_flightLegs:legs})};return instance};JetstarAnalyticsTypes.LegInfoTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-leg-info")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.MerchandiseProductTracker=function(){var instance={};instance.getMerchandiseProducts=function(selector){var merchandiseProducts=[];_$(selector).each(function(index,element){var dataElement=JetstarAnalyticsTypes.DataElement(element);merchandiseProducts.push(JetstarAnalyticsTypes.MerchandiseProduct(dataElement).toDataLayerObj())});return merchandiseProducts};instance.trackAnalyticsData=function(analyticsDataLayer){analyticsDataLayer.push({merchProductViewed:instance.getMerchandiseProducts(".datalayer-merchandise-product-info")})};return instance};JetstarAnalyticsTypes.MerchandiseProductTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-merchandise-product-info")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.PageInfoTracker=function(){var instance={};var dataElement=JetstarAnalyticsTypes.DataElement("datalayer-data");instance.trackAnalyticsData=function(analyticsDataLayer){analyticsDataLayer.push(JetstarAnalyticsTypes.Page(dataElement).toDataLayerObj());analyticsDataLayer.push(JetstarAnalyticsTypes.Visitor(dataElement).toDataLayerObj())};return instance};JetstarAnalyticsTypes.PageInfoTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementPresent("datalayer-data")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.PassengerInfoTracker=function(){var instance={};instance.trackAnalyticsData=function(analyticsDataLayer){var passengers=[];_$(".datalayer-passenger-info").each(function(index,element){var dataElement=JetstarAnalyticsTypes.DataElement(element);passengers.push(JetstarAnalyticsTypes.PassengerInfo(dataElement).toDataLayerObj())});analyticsDataLayer.push({_passengers:passengers})};return instance};JetstarAnalyticsTypes.PassengerInfoTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-passenger-info")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.ProductInfoTracker=function(){var instance={};instance.getProducts=function(productSelector,productConstructor){var products=[];_$(productSelector).each(function(index,element){var dataElement=JetstarAnalyticsTypes.DataElement(element);products.push(productConstructor(dataElement).toDataLayerObj())});return products};instance.getTotalPriceDifference=function(){return _$("#datalayer-products-common").data("price-difference")};instance.trackAnalyticsData=function(analyticsDataLayer){var seats=instance.getProducts(".datalayer-seat",JetstarAnalyticsTypes.SeatInfo);analyticsDataLayer.push({_seats:seats});var baggages=instance.getProducts(".datalayer-baggage",JetstarAnalyticsTypes.BaggageInfo);analyticsDataLayer.push({_baggages:baggages});var ancillaries=instance.getProducts(".datalayer-ancillary",JetstarAnalyticsTypes.PassengerProductInfo);analyticsDataLayer.push({_ancillaries:ancillaries});var addons=instance.getProducts(".datalayer-addon",JetstarAnalyticsTypes.ProductInfo);analyticsDataLayer.push({_addons:addons});var bundles=instance.getProducts(".datalayer-product",JetstarAnalyticsTypes.ProductInfo);var transactionProducts=seats.concat(baggages).concat(ancillaries).concat(addons).concat(bundles);analyticsDataLayer.push({transactionProducts:transactionProducts});analyticsDataLayer.push({totalPriceDifference:instance.getTotalPriceDifference()})};return instance};JetstarAnalyticsTypes.ProductInfoTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-seat")||JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-baggage")||JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-ancillary")||JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-addon")||JetstarAnalytics.Utility.isElementWithClassPresent("datalayer-product")};var JetstarAnalyticsTypes=JetstarAnalyticsTypes||{};JetstarAnalyticsTypes.TransactionTracker=function(){var instance={};var dataElement=JetstarAnalyticsTypes.DataElement("datalayer-itinerary-data");instance.trackAnalyticsData=function(analyticsDataLayer){analyticsDataLayer.push(JetstarAnalyticsTypes.Transaction(dataElement).toDataLayerObj())};return instance};JetstarAnalyticsTypes.TransactionTracker.ShouldTrack=function(){return JetstarAnalytics.Utility.isElementPresent("datalayer-itinerary-data")};var JetstarAnalytics=JetstarAnalytics||{};var JetstarAnalytics={TrackersForPage:function(){if(!this.listOfTrackerFactories){this.listOfTrackerFactories=[JetstarAnalyticsTypes.PageInfoTracker,JetstarAnalyticsTypes.TransactionTracker,JetstarAnalyticsTypes.FlightSearchTracker,JetstarAnalyticsTypes.FlightSegmentTracker,JetstarAnalyticsTypes.BookingContactInfoTracker,JetstarAnalyticsTypes.MerchandiseProductTracker,JetstarAnalyticsTypes.PassengerInfoTracker,JetstarAnalyticsTypes.ProductInfoTracker,JetstarAnalyticsTypes.LegInfoTracker,JetstarAnalyticsTypes.EventInfoTracker,JetstarAnalyticsTypes.GoogleAnalyticTracker]}var selectedTrackers=[];for(var index=0;index<this.listOfTrackerFactories.length;index++){var trackerFactory=this.listOfTrackerFactories[index];if(trackerFactory.ShouldTrack()){var tracker=trackerFactory();selectedTrackers.push(tracker)}}return selectedTrackers},init:function(){var that=this;var selectedTrackers=that.TrackersForPage();for(var index=0;index<selectedTrackers.length;index++){var tracker=selectedTrackers[index];try{tracker.trackAnalyticsData(analyticsDataLayer)}catch(exception){window.console&&console.log(exception)}}analyticsDataLayer.setReady()}};var JetstarAnalytics=JetstarAnalytics||{};JetstarAnalytics.Utility={getPageName:function(doc){var url=doc.URL;return url.slice(url.lastIndexOf("/")+1,url.length)},isElementPresent:function(elementId){return _$("#"+elementId).length>0},isElementWithClassPresent:function(elementClass){return _$("."+elementClass).length>0},getDate:function(isoDateString,format){if(isoDateString===undefined||isoDateString===null||isoDateString===""){return""}var dateObj=new Date(isoDateString);var o={"M+":dateObj.getMonth()+1,"d+":dateObj.getDate(),"h+":dateObj.getHours(),"m+":dateObj.getMinutes(),"s+":dateObj.getSeconds(),"q+":Math.floor((dateObj.getMonth()+3)/3),S:dateObj.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(dateObj.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format},_pad:function(number){return number<=9?"0"+number:number},nullToEmpty:function(anyObject){if(anyObject===undefined||anyObject===null){return""}return anyObject}};var BEDatalayer=BEDatalayer||{};_$.extend(BEDatalayer,{View:function(){return[BEDatalayer.SearchInfoMapping().DatalayerMappings(),BEDatalayer.PassengerMapping().DatalayerMappings(),BEDatalayer.SelectInfoMapping().DatalayerMappings(),BEDatalayer.GlobalInfoMapping().DatalayerMappings(),BEDatalayer.SeatInfoMapping().DatalayerMappings(),BEDatalayer.BaggageInfoMapping().DatalayerMappings(),BEDatalayer.PayInfoMapping().DatalayerMappings(),BEDatalayer.AddonInfoMapping().DatalayerMappings(),BEDatalayer.AncillaryInfoMapping().DatalayerMappings(),BEDatalayer.BookingConfirmationMapping().DatalayerMappings()]},Mappings:function(){if(!this._mappings){var arrayOfAllMappingsCombined=[{}].concat(this.View());this._mappings=_$.extend.apply(_$,arrayOfAllMappingsCombined)}return this._mappings},dump:function(){_$.each(this.View(),function(index,boxeverMappingsClone){_$.each(boxeverMappingsClone,function(key){boxeverMappingsClone[key]=BEDatalayer.get(key)});console.log(boxeverMappingsClone)})},get:function(key){if(!this.injector){this.injector=JetstarAnalyticsTypes.DataInjector(function(dataKey){return JetstarAnalytics.Utility.nullToEmpty(analyticsDataLayer.get(dataKey))})}var mapping=this.Mappings()[key];return this.injector.process(mapping)}});var JetstarAnalytics=JetstarAnalytics||{};JetstarAnalytics.RoktHelper=function(dataLayer){var getPlacement=function(roktElementId){var squareBannerStyle=2,horizontalBannerStyle=1,newBannerStyle=3;if(_$("#"+roktElementId).data("template")==="GLOBAL"){return newBannerStyle}return _$("#"+roktElementId).data("version")==="OLD"?squareBannerStyle:horizontalBannerStyle};var isLaunchModeClick=function(){return dataLayer.get("transactionIsHoldPayment")==="True"};return{getBaseParametersObject:function(){return{launch:isLaunchModeClick()?"click":"auto",placement:getPlacement(this.ROKT_ELEMENT_ID)}},isRoktEnabled:function(){return JetstarAnalytics.Utility.isElementPresent(this.ROKT_ELEMENT_ID)},ROKT_ELEMENT_ID:"cddcd0888d2e4adda82c63c3837ecae8-b"}};