(function(){var t,e,n,i,r,o,a,c,s,u,d,l,h,m,p,_,f,g,w,v,y,b,k,T,M,j,O,P;document.addEventListener?(i=function(t,e,n){return t.addEventListener(e,n,!1)},T=function(t,e,n){return t.removeEventListener(e,n,!1)},M=function(t){return t.preventDefault()}):document.attachEvent&&(i=function(t,e,n){return t["e"+e+n]=n,t[e+n]=function(){return t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])},T=function(t,e,n){return t.detachEvent("on"+e,t[e+n]),t[e+n]=null},M=function(t){return t.returnValue=!1}),w=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},n=function(t,e){return w(t,e)?void 0:t.className+=" "+e},k=function(t,e){return w(t,e)?t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""):void 0},m=function(t){return document.getElementById(t)},p=function(t){return document.querySelectorAll(t)},a=function(t,e){var n,i,r;null==e&&(e={}),i=document.createElement(t);for(n in e)r=e[n],i.setAttribute(n,r);return i},l=function(t,e){var n;return n=null,n="undefined"!=typeof t.currentStyle?t.currentStyle:document.defaultView.getComputedStyle(t,null),n[e]},g=function(){return!1},window.XMLHttpRequest?g=function(){return new XMLHttpRequest}:window.ActiveXObject&&(g=function(){var t;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=e;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}),r=function(t,e){var n,i,r;if(n={method:"get",type:"json",success:s,failure:s},e=u(n,e),r=g()){r.open(e.method,t,!0),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e.success("json"===e.type?JSON.parse(r.responseText):r.responseText):e.failure(r))};try{r.send(null)}catch(o){i=o,e.failure(r)}}},y=function(e,n){var i,r,o;return null==n&&(n={}),o=(new Date).getTime(),n.success=n.success||function(){return""},i=n.data||{},i.partner_id=this.partner_id,i.callback="window.jsonp_"+o,r=a("script",{src:""+t.ROOT_URL+e+"?"+b(i),type:"text/javascript",async:!0}),window["jsonp_"+o]=function(){return function(t){n.success(t),document.body.removeChild(r);try{return delete window["jsonp_"+o]}catch(e){}}}(this),document.body.appendChild(r)},_=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},f=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},h=function(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)},s=function(){},u=function(t,e){var n,i;null==e&&(e={});for(n in e)i=e[n],t[n]=i;return t},j=function(t){return encodeURIComponent(t).replace(/'/g,"%27").replace(/"/g,"%22")},b=function(t){var e,n,i;null==t&&(t={}),n=[];for(e in t)i=t[e],n.push(""+j(e)+"="+j(i));return n.join("&")},c=function(){var t,e;return t=window.location.hostname.split("."),e=t[t.length-1],"com"===e?t.slice(-2).join("."):"au"===e?t.slice(-3).join("."):t.join(".")},o=function(t,e){var n,i,r,o,a,s;if(null==e&&(e=null),null!==e)return r=31536e6,i=new Date,i.setTime(i.getTime()+r),document.cookie=""+t+"="+e+"; expires="+i.toGMTString()+"; domain="+c()+"; path=/";for(s=document.cookie.split(";"),o=0,a=s.length;a>o;o++){for(n=s[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(""+t+"="))return n.substring((""+t+"=").length,n.length)}return null},d=function(t,e){var n,i,r,o;for(null==t&&(t=22),null==e&&(e=64),n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=[],i=o=0;t>=0?t>=o:o>=t;i=t>=0?++o:--o)r[i]=n[0|Math.random()*e];return r.join("")},v=function(t,e){return t.replace(/{{ ?([^{} ]*) ?}}/g,function(t,n){return e[n]})},t={enabled:!0,hazFeatures:function(){return document.querySelectorAll&&window.JSON&&window.JSON.parse&&"postMessage"in window},processQueue:function(n){var i,r,o,a,c,s;for(s=[],a=0,c=n.length;c>a;a++)r=n[a],o=r.params||{},i=r.callback||function(){},s.push(e[r.method].call(t,o,i));return s},init:function(t){this.partner_id=t,this.configureUID(),this.body=document.body,this.includeAssets(),this.includeModal(),this.page_load_id=d(),i(window,"message",this.receiveMessage),this.initScrollTracking(),this.initInactivityTracking(),this.initPageUsageTracking()},initParams:function(t){var e;return e={email:"",culture_code:"en-AU"},this.params=u(e,t),"jetstar_asia"===this.partner_id&&"en-CA"===this.params.culture_code?this.params.culture_code="en-SG":void 0},configureUID:function(){var t,e;return t=o("jumpseat_uid"),null===t?(e=d(),o("jumpseat_uid",e),this.uid=e,this.track("first_visit")):this.uid=t},sendMessage:function(e,n){return null==n&&(n={}),n.name=e,this.iframe.contentWindow.postMessage(JSON.stringify(n),t.ROOT_URL)},receiveMessage:function(e){var n,i;if(e.origin===t.ROOT_URL)switch(n=JSON.parse(e.data),i=n.name,delete n.name,i){case"resize":return t.resize(n.height);case"updateUID":return t.updateUID(n.uid);case"modalLoaded":return t.modalLoaded();case"closeModal":return t.closeModal()}},jsonp:function(e,n){var i,r,o;return null==n&&(n={}),o=(new Date).getTime(),n.success=n.success||function(){return""},i=n.data||{},i.partner_id=this.partner_id,i.callback="window.jsonp_"+o,r=a("script",{src:""+t.ROOT_URL+e+"?"+b(i),type:"text/javascript",async:!0}),window["jsonp_"+o]=function(t){return function(e){n.success(e),t.body.removeChild(r);try{return delete window["jsonp_"+o]}catch(i){}}}(this),this.body.appendChild(r)},showSubscriberContent:function(t,e){return this.jsonp("/v3/api/check_subscriber",{data:{email:t.email},success:function(n){var i,r,o,a;if(e=e||s,n.succeeded){for(i=p(t.content_selector),o=0,a=i.length;a>o;o++)r=i[o],r.style.display="block";return e()}}})},clickWatchPrice:function(t){return M(t),this.includeIFrame(this.modal,"watch_price_dialog",{cost_limit:this.params.cost_limit||"",currency_code:this.params.currency_code||"AUD",origin_code:this.params.origin_code||"",destination_code:this.params.destination_code||"",departure_date:this.params.departure_date||"",return_date:this.params.return_date||"",num_adults:this.params.num_adults||1,num_children:this.params.num_children||0,num_infants:this.params.num_infants||0}),this.openModal()},clickManageSubscriptions:function(t){return M(t),this.includeIFrame(this.modal,"manage_subscriptions"),this.openModal()},includeAssets:function(){var t;return t=m("jumpseat-js").src.replace(/(https?:\/\/.*?\/).*/g,"$1"),this.head=document.getElementsByTagName("head")[0],this.stylesheet=a("link",{href:""+t+"static/v3/stylesheets/jumpseat.css",rel:"stylesheet",type:"text/css"}),this.head.appendChild(this.stylesheet)},includeIFrame:function(e,n,i){var r;return null==i&&(i={}),r={partner_id:this.partner_id,email:this.params.email,partner_customer_id:this.params.customer_id||"",culture_code:this.params.culture_code},i=u(r,i),this.iframe=a("iframe",{"class":"volantio-iframe",src:""+t.ROOT_URL+"/v3/"+n+"?"+b(i),horizontalscrolling:"no",verticalscrolling:"yes",scrolling:"no",frameborder:"0",allowtransparency:"true"}),e.innerHTML="",e.appendChild(this.iframe)},resize:function(t){return this.iframe.height=t},updateUID:function(t){return o("jumpseat_uid",t)},modalLoaded:function(){return this.sendMessage("setParams",{params:this.params,partner_id:this.partner_id,uid:this.uid,referrer:window.location.href,hostname:window.location.hostname}),n(this.modal,"volantio-loaded")},includeModal:function(){return null==this.modal?(this.modalWrapper=a("div",{id:"volantio-modal-wrapper"}),this.modal=a("div",{id:"volantio-modal"}),this.modalWrapper.appendChild(this.modal),this.body.appendChild(this.modalWrapper),this.autoclose_modal?(this.modalWrapper.style.cursor="pointer",i(this.body,"keyup",function(t){return function(e){var n;return n=window.event?e.which:e.keyCode,27===n?t.closeModal():void 0}}(this)),i(this.modalWrapper,"click",function(t){return function(e){return M(e),t.closeModal()}}(this))):void 0):void 0},openModal:function(){return window.innerWidth<480&&(this.modal.style.width=window.innerWidth+"px",this.iframe.style["min-height"]=window.innerHeight+"px"),n(this.body,"volantio-modal-active")},closeModal:function(){return k(this.modal,"volantio-loaded"),k(this.body,"volantio-modal-active")},track:function(t,e,n){var i;return null==e&&(e={}),null==n&&(n=function(){}),this.enabled&&null!=t?(e.event=t,e=this.mixinTrackingParams(e),i=a("img",{src:"//d38wartxufpdfh.cloudfront.net/track/?"+b(e),style:"position: absolute;top:-9999px;left:-9999px"}),i.onload=function(){return document.body.removeChild(i),n()},document.body.appendChild(i)):void 0},mixinTrackingParams:function(t){var e;return e={uid:this.uid,partner_id:this.partner_id,referrer:window.location.href,host_name:window.location.hostname,ts:(new Date).getTime(),page_load_id:this.page_load_id},u(e,t)},sendViewedWatchPriceEvent:function(t){return this.track("Viewed Price Watch Page",{email:t.email,customer_id:t.customer_id,origin_code:t.origin_code,destination_code:t.destination_code,departure_date:t.departure_date,return_date:t.return_date,num_adults:t.num_adults,num_children:t.num_children,num_infants:t.num_infants,page_label:t.page_label})},initScrollTracking:function(){var t;return this.scroll_distance=0,this.max_scroll_y=0,t=0,i(window,"scroll",function(e){return function(){var n;n=null!=window.pageYOffset?window.pageYOffset:null!=window.body.scrollTop?window.body.scrollTop:document.html.scrollTop,e.scroll_distance+=Math.abs(t-n),e.max_scroll_y=Math.max(n,e.max_scroll_y),t=n}}(this))},initPageUsageTracking:function(){var t,e;return this.page_load_ts=(new Date).getTime(),t=function(t){return function(){var e,n,i,r;n=t.updateAndGetInactivityHistogram(!1),i={scroll_distance:t.scroll_distance,max_scroll_percent:100*(t.max_scroll_y+_())/h(),page_visit_time_ms:(new Date).getTime()-t.page_load_ts,browser_height:_(),browser_width:f(),screen_height:window.screen.height,screen_width:window.screen.width};for(e in n)r=n[e],r>0&&(i["inactivity_seconds_"+t.inactivity_bins[e]]=r);return t.track("page_usage",i)}}(this),(e=function(n){return setTimeout(function(){return t(),e(2*n)},n)})(2e3)},initInactivityTracking:function(){var t,e,n,r,o,a,c;this.inactivity_bins=[5,15,30,60,120,300,1800],r=function(){var e,n,i,r;for(i=this.inactivity_bins,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(0);return r}.call(this),o=(new Date).getTime(),a=0,c=0,e=0,n=0,i(document,"mousemove",function(t){e=t.clientX||t.pageX,n=t.clientY||t.pageY}),this.updateAndGetInactivityHistogram=function(t){return function(i){var s,d,l,h,m,p,_;if(d=(new Date).getTime(),m=(d-o)/1e3,i?(l=r,a=e,c=n,o=d):l=u({},r),m>=t.inactivity_bins[0])for(h=p=_=t.inactivity_bins.length-1;-1>=_?-1>p:p>-1;h=-1>=_?++p:--p)if(s=t.inactivity_bins[h],m>=s){l[h]+=1;break}return l}}(this),setInterval(function(t){return function(){var i;i=e!==a||n!==c,i&&t.updateAndGetInactivityHistogram(!0)}}(this),2510)}},e={initWatchPrice:function(t){var e,n,r,o,a,c,s,u,d,l,h;if(this.initParams(t),"scoot"!==this.partner_id||"en-SG"===this.params.culture_code){if(this.sendViewedWatchPriceEvent(t),n=p(t.button_selector),this.watchPriceClickHandler)for(a=0,u=n.length;u>a;a++)e=n[a],T(e,"click",this.watchPriceClickHandler);for(this.watchPriceClickHandler=function(t){return function(e){return t.clickWatchPrice(e)}}(this),c=0,d=n.length;d>c;c++)e=n[c],i(e,"click",this.watchPriceClickHandler);for(r=p(t.content_selector),h=[],s=0,l=r.length;l>s;s++)o=r[s],h.push(o.style.display="block");return h}},initManageSubscriptions:function(t){return this.initParams(t),this.showSubscriberContent(t,function(e){return function(){var n,r,o,a,c,s;for(r=p(t.button_selector),o=function(t){return e.clickManageSubscriptions(t)},s=[],a=0,c=r.length;c>a;a++)n=r[a],s.push(i(n,"click",o));return s}}(this))},initPretargeting:function(){},openManageSubscriptions:function(t){return this.initParams(t),this.includeIFrame(this.modal,"manage_subscriptions",t),this.openModal()},initSelectedFlightTracking:function(t){var e,n,r,o,a,c;for(r=t.flight_buttons_selector,n=p(r),c=[],o=0,a=n.length;a>o;o++)e=n[o],c.push(i(e,"click",function(t){return function(){return t.track("selected_flight")}}(this)));return c},track:function(t,e){var n;if(this.enabled)return null==t.event?void(null!=("undefined"!=typeof console&&null!==console?console.info:void 0)&&console.info('Jumpseat.track requires an "event" property')):(n=t.event,null!=n&&delete t.event,this.track(n,t,e))},trackVisitedCheckoutPage:function(t){var e;return e={origin_code:t.origin_code,destination_code:t.destination_code,departure_date:t.departure_date,return_date:t.return_date,num_adults:t.num_adults,num_children:t.num_children,num_infants:t.num_infants,transaction_cost:t.transaction_cost,transaction_currency:t.transaction_currency,email:t.email,customer_id:t.customer_id},this.track("visited_checkout_page",e)},trackConversion:function(t){var e,n,i,r,o,a,c,s;if(n={origin_code:t.origin_code,destination_code:t.destination_code,departure_date:t.departure_date,return_date:t.return_date,num_adults:t.num_adults,num_children:t.num_children,num_infants:t.num_infants,transaction_cost:t.transaction_cost,transaction_currency:t.transaction_currency,email:t.email,customer_id:t.customer_id,transaction_id:t.transaction_id},this.track("transaction",n),"ancillary_products"in t){for(c=t.ancillary_products,s=[],i=o=0,a=c.length;a>o;i=++o)r=c[i],e={index:i,type:r.type,quantity:r.quantity||1,sku:r.sku||"",cost:r.cost||"",name:r.name||"",transaction_id:t.transaction_id},s.push(this.track("ancillary_product",e));return s}},trackPageView:function(t){return"Search Page"===t.page_label?(this.initParams(t),this.sendViewedWatchPriceEvent(t)):void 0}},t.hazFeatures()&&t.enabled&&(t.debug=window.Jumpseat.debug||!1,t.autoclose_modal=null!=(O=void 0===window.Jumpseat.autoclose_modal)?O:{"true":window.Jumpseat.autoclose_modal},t.show_close_button=null!=(P=void 0===window.Jumpseat.show_close_button)?P:{"true":window.Jumpseat.show_close_button},t.ROOT_URL=window.Jumpseat.ROOT_URL?window.Jumpseat.ROOT_URL:/(local.volantio.com|local.adioso.com)/.test(window.location.hostname)?"http://local.jumpseat.volantio.com:8000":""+window.location.protocol+"//jumpseat.volantio.com",-1!==navigator.appVersion.indexOf("MSIE 8.")&&n(document.body,"volantio-ie8"),t.init(window.Jumpseat.partner_id),t.processQueue(window.Jumpseat.queue),window.Jumpseat={run:function(n,i,r){return null==i&&(i={}),null==r&&(r=function(){}),e[n].call(t,i,r),":)"}})}).call(this);