YUI.add("yui2-animation",function(A){},"0.1");YUI.add("yui2-calendar",function(A){},"0.1");YUI.add("wl-scc",function(A){A.components.Scc=function(C){var D=this;var F=C.compInstConfig;D.incomingEvents={hide:function(H){var G=A.Lang.isArray(H.componentsToHide)?H.componentsToHide:[];if(A.Array.indexOf(D.getId(),G)){C.state="empty";D.renderHtml(C,D.node)}},show:function(){}};D.onCreate=function(G,H){if(G.state==="text"){var I=F.textKey;if(I){D.renderHtml({textKey:I})}}};D.onRenderState={script:function(H){var G=window[F.functionName];A.log("Function "+F.functionName+" from file "+F.scriptPath+" is about to be executed.");if(typeof G==="function"){try{G(A.Node.getDOMNode(H))}catch(I){A.log("Error executing function "+F.functionName+" from file "+F.scriptPath+" Stack trace: "+I.stack,"error")}}else{A.log("Cannot find function "+F.functionName+" which supposed to be defined in file "+F.scriptPath,"error")}D.translateTemplate(C,H)},text:function(){var G=D.node.one(".scc-text");if(G){G.removeClass("hidden")}}};D.scriptConfiguredToBeLinkedStatically=function(){return -1===A.Array.indexOf(F.scriptsForcedToStayInHead,F.scriptPath)};if(C.state==="header"||C.state==="footer"){D.create=false;D.node=A.one("#"+C.getId());D.node.set("innerHTML",A.replaceTemplateData(null,D.node.get("innerHTML")));D.node.translate()}else{if(C.state==="script"){D.render=false;var B="wl-custom_script-"+C.getId();var E=sabre.config.global.commonResourcesPath+"js/"+F.scriptPath;sabre.config.groups["wl-noncombine"].modules[B]={fullpath:E};if(D.scriptConfiguredToBeLinkedStatically()){D.node=A.one("#"+B);if(D.node){D.onRenderState.script(D.node)}else{A.log("Cannot load custom script "+B+". There is no script node for "+E,"warn")}C.componentRendered()}else{A.use(B,function(H,G){if(G.success){D.onRenderState.script(D.node)}else{H.log("Cannot load custom script. "+G.msg,"warn")}C.componentRendered()})}}}}});YUI.add("wl-prbar",function(A){A.components.Prbar=function(B,H){var G=this;var C={REINITIALIZE:"reinitialize"};G.incomingEvents={flight_changed:F,ancillary_changed:F,state_changed:function(){I(J)}};G.onRenderState={initialized:function(K){A.delegate("click",function(L){L.preventDefault()},K,".stepFuture a, .lastStep a")}};function I(L){var M="_elements";var K={data:{requestPartials:[M]},on:{end:function(){},success:function(O,N){if(N){L(N,M)}}}};G.fireEvent("to-ajax",{cfg:K,actionCode:C.REINITIALIZE})}function J(L,M){var K=G.node.one("#booking-process");K.set("innerHTML",A.decodeHtmlEntities(L.partials[M]));F()}function E(K,L){K.setAttribute("class",L.join(" "))}function D(){var N=G.node.all("li");var M=G.node.one("li.stepCurrent");var L=N.indexOf(M);var K=N._nodes.slice(L+1);return A.all(K)}function F(){var K=D();var L=K.size()-1;K.each(function(N,M){var O=["stepFuture"];if(M===0){O.push("prevCurrent");O.push("stepFuture_prevCurrent")}else{O.push("prevFuture");O.push("stepFuture_prevFuture")}if(M===L){O.push("lastStep");O.push("stepFuture_lastStep")}E(N,O)})}}});YUI.add("wl-flomes",function(A){A.components.Flomes=function(D,B){var F=this;F.incomingEvents={"add-messages":function(L){var K=L.data.messages;var J=G(K);var O="flow-messages-component-"+L.type;var N=A.one("#"+O);var I=A.one("#flow-messages-component");if(!N){N=A.Node.create('<div id="'+O+'"></div>');I.append(N)}N.set("innerHTML",J);I.translate();N.removeClass("hidden");var M=I.getXY();window.scrollTo(M[0],M[1])},"show-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.removeClass("hidden")}}var P=A.one("#flow-messages-component");var O=P.getXY();window.scrollTo(O[0],O[1])},"remove-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.addClass("hidden")}}},"remove-all-messages":function(){A.all(".flow-message-error").each(function(I){I.remove()})},"remove-all-component-messages":function(I){var K="flow-messages-component-"+I.type;var J=A.one("#"+K);if(J){J.set("innerHTML","")}},"block-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.set("disabled","disabled").addClass("disabled")}},"unblock-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.removeAttribute("disabled");I.removeClass("disabled")}}};F.onRenderState={initialized:function(K){var J=D.initData.messages;for(var I in J){if(E[J[I].id]){E[J[I].id]()}}},ssciweb_error_page:function(I){var J=sabre.config.satConfiguration.ssciGlobalConfiguration.errorPageToHomePageRedirectURL;A.on("click",function(){if(J&&J!=""){location.href=J}},"#btn-search")}};function G(K){var M="";for(var I in K){var J=K[I];var L=J.id;var N=F.getHtml("_flowMessage_"+L);if(!N){N=F.getHtml("_flowMessage")}M+=F.replaceData({level:J.level,id:J.id,code:J.code,originalMessage:J.originalMessage},N);if(null!==A.one("#flow-message-"+L)){A.one("#flow-message-"+L).remove(true)}}return M}var E={priceDiscrepancyError:function(){A.on("click",H,"#select-flights-link");A.on("click",C,"#accept-new-price-btn")},ssrInsufficientInfantProvision:function(){F.fireEvent("block_submit",{forceInitialize:true})}};function H(I){location.href=A.utilsUrl.buildExecutionUrl("_eventId=goto&gotoPageCode=AIR_SELECT_PAGE")}function C(I){F.fireEvent("sbmt-after-price-discrepancy")}}});YUI.add("wl-fam",function(A){A.components.Fam=function(B){}});YUI.add("popupWidget",function(B){var A=function(E,H,D){var G=this;var K=false;var C;var J;var I;if(D!=null&&D.header!=null){I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">'+D.header+'</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}else{I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">&nbsp;</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}if(YAHOO.lang.isString(H)){C=D.id||"popup"+YAHOO.util.Dom.generateId();J=I(C,H);E.append(J)}else{C=H.getAttribute("id");J=H}var F={width:"400px",height:"150px",fixedcenter:true,constraintoviewport:true,close:true,visible:false,draggable:false,modal:true,zIndex:10,buttons:[],needTranslation:true};D=YAHOO.lang.merge(F,D||{});if(D.autofillheight!=null){D.height=null}G.dialog=new YAHOO.widget.Dialog(C,D);G.hide=function(){if(K){G.dialog.hide();if(J){J.addClass("hidden")}}};G.destroy=function(){if(K){G.dialog.destroy()}};G.dialog.hideEvent.subscribe(G.hide);if(D.closeHandler){G.dialog.hideEvent.subscribe(D.closeHandler)}G.addUniqueID=function(N){var M=G.dialog.getButtons();for(var L=0;L<M.length;L++){M[L].id=""+N+""+L}};G.addStyleClassToButtons=function(L){var N=G.dialog.getButtons();for(var M=0;M<N.length;M++){if(N[M].className===""){N[M].className+=L}else{N[M].className+=" "+L}}};G.addStyleClassToPopup=function(L){if(J){J.addClass(L)}};G.render=function(){if(D&&D.renderInsideBody){G.dialog.render(document.body)}else{G.dialog.render()}if(J&&D.needTranslation){J.translate()}K=true};G.center=function(){if(!K){G.render()}G.dialog.center()};G.show=function(){if(!K){G.render()}if(J){J.removeClass("hidden")}G.dialog.show()};G.node=function(){return J};G.update=function(L){G.dialog.setBody(L);K=false};G.id=function(){return C}};B.widgets=B.widgets||{};B.widgets.PopupWidget=A},"1.0.0",{requires:[]});YUI.add("wl-div-built-dropdown-button",function(D){var B={setupHandlers:function(E,F){C(E,F)},switchSelection:function(E,F){A(E,F)}};function C(N,M){var H=null;if(D.Lang.isString(N)){H=D.one(N)}else{H=N}var I=H?H.one("div.wl-div-built-dropdown-container"):null;var K=I?I.one(".wl-div-built-dropdown-overlay"):null;if(I&&K){var J=500;var T;var P=false;var G=J!=0;function V(){this.addClass("wl-div-built-dropdown-option-item-hover")}function F(){this.removeClass("wl-div-built-dropdown-option-item-hover")}function L(){if(T){T.cancel()}}function E(){if(P){if(T){T.cancel()}T=D.later(J,this,S)}}function S(){if(P&&K){P=false;K.addClass("hidden")}}function Q(){if(!P&&K){P=true;K.removeClass("hidden")}}function U(W){W.preventDefault();W.stopPropagation();if(P){S()}else{Q()}}function O(Y){Y.preventDefault();Y.stopPropagation();S();K.all("div.wl-div-built-dropdown-option").each(function(a){a.removeClass("wl-div-built-dropdown-option-selected")});this.addClass("wl-div-built-dropdown-option-selected");var W=I.one(".wl-div-built-dropdown-button input");var Z=this.one("li.wl-div-built-dropdown-option-item");var X=Z.get("text");W.set("value",X);if(M){M(Y)}}function R(){var Y=K.one("div.wl-div-built-dropdown-option-selected");if(Y){var W=I.one(".wl-div-built-dropdown-button input");var Z=Y.one("li.wl-div-built-dropdown-option-item");var X=Z.get("text");W.set("value",X)}}if(G){I.delegate("mouseenter",V,"li.wl-div-built-dropdown-option-item");I.delegate("mouseleave",F,"li.wl-div-built-dropdown-option-item");I.delegate("mouseenter",L,"div.wl-div-built-dropdown-overlay, div.wl-div-built-dropdown-button input, span.wl-div-built-dropdown-decorator");I.delegate("mouseleave",E,"div.wl-div-built-dropdown-overlay, div.wl-div-built-dropdown-button input")}else{H.on("click",S)}I.delegate("click",O,"div.wl-div-built-dropdown-option");I.delegate("click",U,".wl-div-built-dropdown-button input");I.delegate("click",U,"span.wl-div-built-dropdown-decorator");R()}}function A(E,F){E.all("div.wl-div-built-dropdown-option").each(function(G){G.removeClass("wl-div-built-dropdown-option-selected");if(G.get("id")===F){G.addClass("wl-div-built-dropdown-option-selected");var H=G.one("li").get("text");E.one(".wl-div-built-dropdown-button input").set("value",H)}})}D.widgets=D.widgets||{};D.widgets.DropdownButton=B});YUI.add("wl-bagfee",function(A){A.components.Bagfee=function(o){var Y=this;var k=o.compInstConfig;var S;var T="bagFeePopupContent";var b;var H;var Z="__baggfeeTabContent";var C;var U;Y.onRenderState={overlay:function(r){var q=A.one("#bagfee-anchor");if(q){q.on("click",N)}X(r)},initialized:function(q){X(q);E()}};function N(s){s.preventDefault();var r="default";var q={data:{actionCode:r,requestPartials:[Z]},on:{end:function(){S.node().one(".bd").removeClass("loading")},success:function(u,t){if(t){l(t);S.node().one(".bd").removeClass("loading")}else{A.log("No Data returned from server","error")}}}};if(!S){J()}S.show();S.node().one(".bd").addClass("loading");Y.fireEvent("to-ajax",{cfg:q,actionCode:r})}function l(q){var r=q.partials[Z];var s=A.one("#"+T);if(s){s.set("innerHTML",A.decodeHtmlEntities(r));E();X(Y.node)}}function J(){var r='<h4 class="bagfee-overlay-title" >'+A.translateParametrized("label.bagfee.overlay.title")+"</h4>";var q={buttons:[],header:r,close:true,width:"600px",autofillheight:"body"};S=new A.widgets.PopupWidget(A.one(document.body),'<div id="'+T+'"></div>',q)}function X(r){var q=A.one("#dot-bag-tabs");if(q){q.delegate("click",G,"li")}}var R="div.dot-bagfee";var f="div.baggage-pax-type-switch";var O="div.wl-div-built-dropdown-option-selected";var m="div.bag-allowance-items";var M="div.bag-allowance-item";var n="#bag-allowance-";var P="div.yui-content";var Q="#carryon-allowance-";var K="div.carryon-main";var W="div.baggage-type-segments";var F="div.carryon-pax-type-switch";var p="div.segment-type-switch";var d="div.pax-type-switch";var B="div.embargo-main";var h="#embargo-";var a="div.embargo-switch";function E(){b=A.one(R);H=A.one(P);if(b){b.all(f).each(function(q){A.widgets.DropdownButton.setupHandlers(q,I)});b.all(W).each(function(q){A.widgets.DropdownButton.setupHandlers(q,g)});C=A.one(K);C.all(F).each(function(q){A.widgets.DropdownButton.setupHandlers(q,D)});C.all(p).each(function(q){A.widgets.DropdownButton.setupHandlers(q,j)})}U=A.one(B);if(U){U.all(a).each(function(q){A.widgets.DropdownButton.setupHandlers(q,c)})}}function c(r){var q=r.currentTarget.get("id");L(q)}function j(u){var t=u.currentTarget.get("id");C.all(F).each(function(v){v.addClass("hidden")});var s=C.one(d+"-"+t);s.removeClass("hidden");var r=s.one(O);if(r){var q=r.get("id");V(t,q)}}function D(t){var r=t.currentTarget.get("id");C.all(F).each(function(u){A.widgets.DropdownButton.switchSelection(u,r)});var q=C.one(O);if(q){var s=q.get("id");V(s,r)}}function I(t){var r=t.currentTarget.get("id");b.all(f).each(function(u){A.widgets.DropdownButton.switchSelection(u,r)});var q=b.one(O);if(q){var s=q.get("id");e(s,r)}}function g(u){var t=u.currentTarget.get("id");b.all(f).each(function(v){v.addClass("hidden")});var s=b.one(d+"-"+t);s.removeClass("hidden");var r=s.one(O);if(r){var q=r.get("id");e(t,q)}}function e(r,q){var t=b.one(m);if(t){var s=t.one(n+r+"-"+q);if(s){t.all(M).each(function(u){u.addClass("hidden")});s.removeClass("hidden")}}}function V(r,q){var t=b.one(K);if(t){var s=t.one(Q+r+"-"+q);if(s){t.all(M).each(function(u){u.addClass("hidden")});s.removeClass("hidden")}}}function L(q){var s=b.one(B);if(s){var r=s.one(h+q);if(r){s.all(M).each(function(t){t.addClass("hidden")});r.removeClass("hidden")}}}function G(t){t.preventDefault();var u=t.currentTarget;if(u.hasClass("selected")){return }u.addClass("selected");u.siblings().removeClass("selected");var q=u.get("parentNode").get("children").indexOf(u);var r=Y.node.one(".yui-content");if(r==null){var s=H.get("children");s.addClass("yui-hidden");s.item(q).removeClass("yui-hidden")}else{var s=r.get("children");s.addClass("yui-hidden");s.item(q).removeClass("yui-hidden")}}}});YUI.add("base-base",function(B){var I=B.Object,K=B.Lang,J=".",G="destroy",R="init",Q="initialized",H="destroyed",D="initializer",N="bubbleTargets",E="_bubbleTargets",C=Object.prototype.constructor,M="deep",S="shallow",P="destructor",A=B.Attribute;function F(){A.call(this);var L=B.Plugin&&B.Plugin.Host;if(this._initPlugins&&L){L.call(this)}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments)}F._ATTR_CFG=A._ATTR_CFG.concat("cloneDefaultValue");F.NAME="base";F.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};F.prototype={init:function(L){this._yuievt.config.prefix=this._eventPrefix;this.publish(R,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(L);this.fire(R,{cfg:L});return this},_preInitEventCfg:function(O){if(O){if(O.on){this.on(O.on)}if(O.after){this.after(O.after)}}var T,L,V,U=(O&&N in O);if(U||E in this){V=U?(O&&O.bubbleTargets):this._bubbleTargets;if(K.isArray(V)){for(T=0,L=V.length;T<L;T++){this.addTarget(V[T])}}else{if(V){this.addTarget(V)}}}},destroy:function(){this.publish(G,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(G);this.detachAll();return this},_defInitFn:function(L){this._initHierarchy(L.cfg);if(this._initPlugins){this._initPlugins(L.cfg)}this._set(Q,true)},_defDestroyFn:function(L){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins()}this._set(H,true)},_getClasses:function(){if(!this._classes){this._initHierarchyData()}return this._classes},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData()}return this._attrs},_filterAttrCfgs:function(V,O){var T=null,L,U=V.ATTRS;if(U){for(L in U){if(U.hasOwnProperty(L)&&O[L]){T=T||{};T[L]=O[L];delete O[L]}}}return T},_initHierarchyData:function(){var T=this.constructor,O=[],L=[];while(T){O[O.length]=T;if(T.ATTRS){L[L.length]=T.ATTRS}T=T.superclass?T.superclass.constructor:null}this._classes=O;this._attrs=this._aggregateAttrs(L)},_aggregateAttrs:function(Y){var V,Z,U,L,a,O,X,T=F._ATTR_CFG,W={};if(Y){for(O=Y.length-1;O>=0;--O){Z=Y[O];for(V in Z){if(Z.hasOwnProperty(V)){U=B.mix({},Z[V],true,T);L=U.value;X=U.cloneDefaultValue;if(L){if((X===undefined&&(C===L.constructor||K.isArray(L)))||X===M||X===true){U.value=B.clone(L)}else{if(X===S){U.value=B.merge(L)}}}a=null;if(V.indexOf(J)!==-1){a=V.split(J);V=a.shift()}if(a&&W[V]&&W[V].value){I.setValue(W[V].value,a,L)}else{if(!a){if(!W[V]){W[V]=U}else{B.mix(W[V],U,true,T)}}}}}}}return W},_initHierarchy:function(W){var T=this._lazyAddAttrs,X,Y,Z,U,O,V=this._getClasses(),L=this._getAttrCfgs();for(Z=V.length-1;Z>=0;Z--){X=V[Z];Y=X.prototype;if(X._yuibuild&&X._yuibuild.exts){for(U=0,O=X._yuibuild.exts.length;U<O;U++){X._yuibuild.exts[U].apply(this,arguments)}}this.addAttrs(this._filterAttrCfgs(X,L),W,T);if(Y.hasOwnProperty(D)){Y.initializer.apply(this,arguments)}}},_destroyHierarchy:function(){var V,O,U,L,T=this._getClasses();for(U=0,L=T.length;U<L;U++){V=T[U];O=V.prototype;if(O.hasOwnProperty(P)){O.destructor.apply(this,arguments)}}},toString:function(){return this.constructor.NAME+"["+B.stamp(this)+"]"}};B.mix(F,A,false,null,1);F.prototype.constructor=F;B.Base=F},"3.1.2",{requires:["attribute-base"]});YUI.add("base-pluginhost",function(C){var A=C.Base,B=C.Plugin.Host;C.mix(A,B,false,null,1);A.plug=B.plug;A.unplug=B.unplug},"3.1.2",{requires:["base-base","pluginhost"]});YUI.add("base-build",function(D){var B=D.Base,A=D.Lang,C;B._build=function(F,L,P,T,S,O){var U=B._build,G=U._ctor(L,O),J=U._cfg(L,O),R=U._mixCust,N=J.aggregates,E=J.custom,I=G._yuibuild.dynamic,M,K,H,Q;if(I&&N){for(M=0,K=N.length;M<K;++M){H=N[M];if(L.hasOwnProperty(H)){G[H]=A.isArray(L[H])?[]:{}}}}for(M=0,K=P.length;M<K;M++){Q=P[M];D.mix(G,Q,true,null,1);R(G,Q,N,E);G._yuibuild.exts.push(Q)}if(T){D.mix(G.prototype,T,true)}if(S){D.mix(G,U._clean(S,N,E),true);R(G,S,N,E)}G.prototype.hasImpl=U._impl;if(I){G.NAME=F;G.prototype.constructor=G}return G};C=B._build;D.mix(C,{_mixCust:function(G,F,I,H){if(I){D.aggregate(G,F,true,I)}if(H){for(var E in H){if(H.hasOwnProperty(E)){H[E](E,G,F)}}}},_tmpl:function(E){function F(){F.superclass.constructor.apply(this,arguments)}D.extend(F,E);return F},_impl:function(H){var K=this._getClasses(),J,F,E,I,L,G;for(J=0,F=K.length;J<F;J++){E=K[J];if(E._yuibuild){I=E._yuibuild.exts;L=I.length;for(G=0;G<L;G++){if(I[G]===H){return true}}}}return false},_ctor:function(E,F){var G=(F&&false===F.dynamic)?false:true,H=(G)?C._tmpl(E):E;H._yuibuild={id:null,exts:[],dynamic:G};return H},_cfg:function(E,F){var G=[],J={},I,H=(F&&F.aggregates),L=(F&&F.custom),K=E;while(K&&K.prototype){I=K._buildCfg;if(I){if(I.aggregates){G=G.concat(I.aggregates)}if(I.custom){D.mix(J,I.custom,true)}}K=K.superclass?K.superclass.constructor:null}if(H){G=G.concat(H)}if(L){D.mix(J,F.cfgBuild,true)}return{aggregates:G,custom:J}},_clean:function(K,J,G){var I,F,E,H=D.merge(K);for(I in G){if(H.hasOwnProperty(I)){delete H[I]}}for(F=0,E=J.length;F<E;F++){I=J[F];if(H.hasOwnProperty(I)){delete H[I]}}return H}});B.build=function(G,E,H,F){return C(G,E,H,null,null,F)};B.create=function(E,H,G,F,I){return C(E,H,G,F,I)};B.mix=function(E,F){return C(null,E,F,null,null,{dynamic:false})};B._buildCfg={custom:{ATTRS:function(G,F,E){F[G]=F[G]||{};if(E[G]){D.aggregate(F[G],E[G],true)}}},aggregates:["_PLUG","_UNPLUG"]}},"3.1.2",{requires:["base-base"]});YUI.add("base",function(A){},"3.1.2",{use:["base-base","base-pluginhost","base-build"]});YUI.add("anim-base",function(B){var C="running",N="startTime",L="elapsedTime",J="start",I="tween",M="end",D="node",K="paused",P="reverse",H="iterationCount",A=Number;var F={},O={},E;B.Anim=function(){B.Anim.superclass.constructor.apply(this,arguments);O[B.stamp(this)]=this};B.Anim.NAME="anim";B.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;B.Anim.DEFAULT_UNIT="px";B.Anim.DEFAULT_EASING=function(R,Q,T,S){return T*R/S+Q};B.Anim._intervalTime=20;B.Anim.behaviors={left:{get:function(R,Q){return R._getOffset(Q)}}};B.Anim.behaviors.top=B.Anim.behaviors.left;B.Anim.DEFAULT_SETTER=function(U,R,X,W,Q,V,S,T){T=T||"";U._node.setStyle(R,S(Q,A(X),A(W)-A(X),V)+T)};B.Anim.DEFAULT_GETTER=function(Q,R){return Q._node.getComputedStyle(R)};B.Anim.ATTRS={node:{setter:function(Q){Q=B.one(Q);this._node=Q;if(!Q){}return Q}},duration:{value:1},easing:{value:B.Anim.DEFAULT_EASING,setter:function(Q){if(typeof Q==="string"&&B.Easing){return B.Easing[Q]}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!F[B.stamp(this)]},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};B.Anim.run=function(){for(var Q in O){if(O[Q].run){O[Q].run()}}};B.Anim.pause=function(){for(var Q in F){if(F[Q].pause){F[Q].pause()}}B.Anim._stopTimer()};B.Anim.stop=function(){for(var Q in F){if(F[Q].stop){F[Q].stop()}}B.Anim._stopTimer()};B.Anim._startTimer=function(){if(!E){E=setInterval(B.Anim._runFrame,B.Anim._intervalTime)}};B.Anim._stopTimer=function(){clearInterval(E);E=0};B.Anim._runFrame=function(){var Q=true;for(var R in F){if(F[R]._runFrame){Q=false;F[R]._runFrame()}}if(Q){B.Anim._stopTimer()}};B.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var G={run:function(){if(this.get(K)){this._resume()}else{if(!this.get(C)){this._start()}}return this},pause:function(){if(this.get(C)){this._pause()}return this},stop:function(Q){if(this.get(C)||this.get(K)){this._end(Q)}return this},_added:false,_start:function(){this._set(N,new Date()-this.get(L));this._actualFrames=0;if(!this.get(K)){this._initAnimAttr()}F[B.stamp(this)]=this;B.Anim._startTimer();this.fire(J)},_pause:function(){this._set(N,null);this._set(K,true);delete F[B.stamp(this)];this.fire("pause")},_resume:function(){this._set(K,false);F[B.stamp(this)]=this;this.fire("resume")},_end:function(Q){var R=this.get("duration")*1000;if(Q){this._runAttrs(R,R,this.get(P))}this._set(N,null);this._set(L,0);this._set(K,false);delete F[B.stamp(this)];this.fire(M,{elapsed:this.get(L)})},_runFrame:function(){var U=this._runtimeAttr.duration,S=new Date()-this.get(N),R=this.get(P),Q=(S>=U),T,V;this._runAttrs(S,U,R);this._actualFrames+=1;this._set(L,S);this.fire(I);if(Q){this._lastFrame()}},_runAttrs:function(Z,Y,V){var W=this._runtimeAttr,S=B.Anim.behaviors,X=W.easing,Q=Y,R,T,U;if(V){Z=Y-Z;Q=0}for(U in W){if(W[U].to){R=W[U];T=(U in S&&"set" in S[U])?S[U].set:B.Anim.DEFAULT_SETTER;if(Z<Y){T(this,U,R.from,R.to,Z,Y,X,R.unit)}else{T(this,U,R.from,R.to,Q,Y,X,R.unit)}}}},_lastFrame:function(){var Q=this.get("iterations"),R=this.get(H);R+=1;if(Q==="infinite"||R<Q){if(this.get("direction")==="alternate"){this.set(P,!this.get(P))}this.fire("iteration")}else{R=0;this._end()}this._set(N,new Date());this._set(H,R)},_initAnimAttr:function(){var X=this.get("from")||{},W=this.get("to")||{},Q={duration:this.get("duration")*1000,easing:this.get("easing")},S=B.Anim.behaviors,V=this.get(D),U,T,R;B.each(W,function(b,Z){if(typeof b==="function"){b=b.call(this,V)}T=X[Z];if(T===undefined){T=(Z in S&&"get" in S[Z])?S[Z].get(this,Z):B.Anim.DEFAULT_GETTER(this,Z)}else{if(typeof T==="function"){T=T.call(this,V)}}var Y=B.Anim.RE_UNITS.exec(T);var a=B.Anim.RE_UNITS.exec(b);T=Y?Y[1]:T;R=a?a[1]:b;U=a?a[2]:Y?Y[2]:"";if(!U&&B.Anim.RE_DEFAULT_UNIT.test(Z)){U=B.Anim.DEFAULT_UNIT}if(!T||!R){B.error('invalid "from" or "to" for "'+Z+'"',"Anim");return }Q[Z]={from:T,to:R,unit:U}},this);this._runtimeAttr=Q},_getOffset:function(R){var T=this._node,U=T.getComputedStyle(R),S=(R==="left")?"getX":"getY",V=(R==="left")?"setX":"setY";if(U==="auto"){var Q=T.getStyle("position");if(Q==="absolute"||Q==="fixed"){U=T[S]();T[V](U)}else{U=0}}return U}};B.extend(B.Anim,B.Base,G)},"3.1.2",{requires:["base-base","node-style"]});YUI.add("anim-color",function(B){var A=Number;B.Anim.behaviors.color={set:function(F,D,I,H,C,G,E){I=B.Color.re_RGB.exec(B.Color.toRGB(I));H=B.Color.re_RGB.exec(B.Color.toRGB(H));if(!I||I.length<3||!H||H.length<3){B.error("invalid from or to passed to color behavior")}F._node.setStyle(D,"rgb("+[Math.floor(E(C,A(I[1]),A(H[1])-A(I[1]),G)),Math.floor(E(C,A(I[2]),A(H[2])-A(I[2]),G)),Math.floor(E(C,A(I[3]),A(H[3])-A(I[3]),G))].join(", ")+")")},get:function(D,C){var E=D._node.getComputedStyle(C);E=(E==="transparent")?"rgb(255, 255, 255)":E;return E}};B.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(C,D){B.Anim.behaviors[C]=B.Anim.behaviors.color})},"3.1.2",{requires:["anim-base"]});YUI.add("anim-curve",function(A){A.Anim.behaviors.curve={set:function(F,C,I,H,B,G,E){I=I.slice.call(I);H=H.slice.call(H);var D=E(B,0,100,G)/100;H.unshift(I);F._node.setXY(A.Anim.getBezier(H,D))},get:function(C,B){return C._node.getXY()}};A.Anim.getBezier=function(F,E){var G=F.length;var D=[];for(var C=0;C<G;++C){D[C]=[F[C][0],F[C][1]]}for(var B=1;B<G;++B){for(C=0;C<G-B;++C){D[C][0]=(1-E)*D[C][0]+E*D[parseInt(C+1,10)][0];D[C][1]=(1-E)*D[C][1]+E*D[parseInt(C+1,10)][1]}}return[D[0][0],D[0][1]]}},"3.1.2",{requires:["anim-xy"]});YUI.add("anim-easing",function(A){A.Easing={easeNone:function(C,B,E,D){return E*C/D+B},easeIn:function(C,B,E,D){return E*(C/=D)*C+B},easeOut:function(C,B,E,D){return -E*(C/=D)*(C-2)+B},easeBoth:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C+B}return -E/2*((--C)*(C-2)-1)+B},easeInStrong:function(C,B,E,D){return E*(C/=D)*C*C*C+B},easeOutStrong:function(C,B,E,D){return -E*((C=C/D-1)*C*C*C-1)+B},easeBothStrong:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C*C*C+B}return -E/2*((C-=2)*C*C*C-2)+B},elasticIn:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return -(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B},elasticOut:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return C*Math.pow(2,-10*D)*Math.sin((D*G-E)*(2*Math.PI)/F)+H+B},elasticBoth:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G/2)===2){return B+H}if(!F){F=G*(0.3*1.5)}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}if(D<1){return -0.5*(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B}return C*Math.pow(2,-10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F)*0.5+H+B},backIn:function(C,B,F,E,D){if(D===undefined){D=1.70158}if(C===E){C-=0.001}return F*(C/=E)*C*((D+1)*C-D)+B},backOut:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}return F*((C=C/E-1)*C*((D+1)*C+D)+1)+B},backBoth:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}if((C/=E/2)<1){return F/2*(C*C*(((D*=(1.525))+1)*C-D))+B}return F/2*((C-=2)*C*(((D*=(1.525))+1)*C+D)+2)+B},bounceIn:function(C,B,E,D){return E-A.Easing.bounceOut(D-C,0,E,D)+B},bounceOut:function(C,B,E,D){if((C/=D)<(1/2.75)){return E*(7.5625*C*C)+B}else{if(C<(2/2.75)){return E*(7.5625*(C-=(1.5/2.75))*C+0.75)+B}else{if(C<(2.5/2.75)){return E*(7.5625*(C-=(2.25/2.75))*C+0.9375)+B}}}return E*(7.5625*(C-=(2.625/2.75))*C+0.984375)+B},bounceBoth:function(C,B,E,D){if(C<D/2){return A.Easing.bounceIn(C*2,0,E,D)*0.5+B}return A.Easing.bounceOut(C*2-D,0,E,D)*0.5+E*0.5+B}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-node-plugin",function(B){var A=function(C){C=(C)?B.merge(C):{};C.node=C.host;A.superclass.constructor.apply(this,arguments)};A.NAME="nodefx";A.NS="fx";B.extend(A,B.Anim);B.namespace("Plugin");B.Plugin.NodeFX=A},"3.1.2",{requires:["node-pluginhost","anim-base"]});YUI.add("anim-scroll",function(B){var A=Number;B.Anim.behaviors.scroll={set:function(F,G,I,J,K,E,H){var D=F._node,C=([H(K,A(I[0]),A(J[0])-A(I[0]),E),H(K,A(I[1]),A(J[1])-A(I[1]),E)]);if(C[0]){D.set("scrollLeft",C[0])}if(C[1]){D.set("scrollTop",C[1])}},get:function(D){var C=D._node;return[C.get("scrollLeft"),C.get("scrollTop")]}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-xy",function(B){var A=Number;B.Anim.behaviors.xy={set:function(F,D,I,H,C,G,E){F._node.setXY([E(C,A(I[0]),A(H[0])-A(I[0]),G),E(C,A(I[1]),A(H[1])-A(I[1]),G)])},get:function(C){return C._node.getXY()}}},"3.1.2",{requires:["anim-base","node-screen"]});YUI.add("anim",function(A){},"3.1.2",{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],skinnable:false});YUI.add("wl-select-flights",function(A){A.WlSelectFlights=function(q,e,H,o,S){var h=S.advancedShopping;var l=o.flightList;var U=e.one(".componentContentHolder")||e;if(h){var M="flight_"+H}else{var M=H}if(!A.one("#"+M)){var K=A.Node.create('<div id="'+M+'" class="flight-list-container"></div>');if(h&&S.state){K.set("leg-state",S.state)}U.appendChild(K);K=null}var Y=A.one("#"+M);U=null;var f=this;f.direction=H;var E=7;var N=new Date(sabre.config.global.currentTimeInMillis);N=N.getTime()-(N.getTime()%(1000*60*60*24));N=A.DataType.Date.parse(N);var g;var d;var b;var B;var W;var Q;var J=Math.floor(E/2);var a=Math.floor(E/2);var F=365;var I=new Date(sabre.config.global.currentTimeInMillis);I=I.getTime()-(I.getTime()%(1000*60*60*24));I=A.DataType.Date.parse(I);I=I.setDate(I.getDate()+F);I=A.DataType.Date.parse(I);var L=I;var n=q.initData.discountApplied;var p=q.initData.negoFarePresent;function R(s){var t;if(h){if(!q.initData.multicity&&s.calendarPrices){if(q.state==="unbundled"||q.state==="oneway"||q.state==="exchange"){t=s.calendarPrices[H]}else{t=s.calendarPrices}}}else{if(H==="multicity"){t=s.outboundCalendarPrices}else{if(H==="inbounds"){t=s.inboundCalendarPrices}else{t=s.outboundCalendarPrices}}}if(!t){A.log(t+" is undefined. Alternate tabs will not be displayed","warn","Flight List")}return t}f.showMarketingTextOverlay=function(s,u,t){g.showMarketingTextOverlay(s,u,t,H)};f.showMarketingTextOverlayWithDelay=function(s,u,t){g.showMarketingTextOverlayWithDelay(s,u,t,H)};f.showFareIndicatorTextOverlay=function(s){g.showFareIndicatorTextOverlay(s,"fareIndicator")};f.hideMarketingTextOverlay=function(s){g.hideMarketingTextOverlay(s)};f.hideFareIndicatorTextOverlay=function(s){g.hideFareIndicatorTextOverlay(s)};f.hideMarketingTextOverlayIfNotInOverlayRegion=function(s){g.hideMarketingTextOverlayIfNotInOverlayRegion(s)};f.getNode=function(){return Y};f.getColumnKeyByHeader=function(s){return g.getColumnKeyByHeader(s)};f.getStoredColumnKey=function(s){return g.getStoredColumnKey(s)};var r={itineraryHeader:function(s){s.translate()},dateRange:function(AC){var t=R(q.initData);t=t||[];E=t.length||E;var w=Math.floor(E/2);AC.purge(true);var u=(t[w]&&t[w].date)||"";if(!d){d=A.DataType.Number.parse(new Date(u.replace(/-/g,"/")))}var s=(t[w]&&t[w].dateInbound)||"";if(!b){b=A.DataType.Number.parse(new Date(s.replace(/-/g,"/")))}for(var x=0;x<t.length;x++){var AD=A.DataType.Date.parse(t[x].date.replace(/-/g,"/"));t[x].timestamp=AD.getTime();if(t[x].inboundDate!==null){var AA=A.DataType.Date.parse(t[x].inboundDate.replace(/-/g,"/"));t[x].timestampInbound=AA.getTime()}else{t[x].timestampInbound=null}}if(h){var AE="flight_"+H+"-"+w+"-menu"}else{var AE=H+"-"+w+"-menu"}var z=AC.one("#"+AE);var v=AC.one("a.dates-prev"),y=AC.one("a.dates-next");var AB=v&&!v.hasClass("disabled");var AF=y&&!y.hasClass("disabled");if(z){k(z,t);Z(AC,t,w,{prev:AB,next:AF})}AC.translate()},dataTable:function(s,t){g.applyEvents(s,t)},classOfService:function(){},discountIndicator:function(){C()},negoFareIndicator:function(){V()},nextDayLegend:function(){},filterOptions:function(){},flightAdvisory:function(){}};f.renderHtml=function(s){q.htmlBody={unbundled:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableUnbundled"))},bundled:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableBundled"))},oneway:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableOneway"))},exchange:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableOneway"))},multicity:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableMulticity"))},lazy:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableLazy"))}};Y.purge(true);Y=A.one("#"+M);if(!Y){D(Y);return }g=l.selectFlightDataTable(H,S);c(Y,s)};f.recreateEvents=function(s){Y.purge(true);Y=A.one("#"+M);if(!Y){D(Y);return }c(Y,s)};f.destroy=function(s){Y=A.one("#"+M);if(Y){if(s){Y.remove(true)}else{YUI().use("anim",function(u){var t=new u.Anim({node:"#"+M,to:{opacity:0}});t.on("end",function(){Y.remove(true);t.destroy()});t.run()})}}};f.updateOptions=function(s){if(typeof g.updateOptions==="function"){g.updateOptions(s)}};function c(s,t){var u=s.get("children");u.each(function(w){var v=w.getAttribute("data-wl-section");if(v){r[v](w,t)}})}function D(s){s=A.one(".flight-list-container");if(s){s.addClass("loading");A.log("Different result type - reloading page","warn");window.location.reload()}else{A.log("Cannot render flight list","error")}}f.getSelectedHashRef=function(){return g?g.getSelectedHashRef():null};f.getSelectedBasketPrice=function(){return g?g.getSelectedBasketPrice():null};f.resetSelection=function(){g.resetSelection()};f.translateBrands=function(){if(typeof g.translateBrands==="function"){g.translateBrands(Y)}};f.getCurrentDate=function(){return A.DataType.Date.parse(d)};f.getCurrentDateInbound=function(){return A.DataType.Date.parse(b)};f.getActiveDate=function(){return d};f.getActiveClass=function(){return B};f.hideAlternateDates=function(){};f.showProgress=function(){var s=Y.one(".loading-mask");if(s){s.removeClass("hidden")}else{s=A.Node.create('<div class="loading-mask"></div>');Y.append(s)}if(A.UA.ie>0&&A.UA.ie<7){Y.all("select").addClass("select-fix");s.setStyle("height",s.ancestor().getStyle("height"))}};f.hideProgress=function(){var s=Y.one(".loading-mask");if(s){s.addClass("hidden")}if(A.UA.ie>0&&A.UA.ie<7){Y.all("select").removeClass("select-fix")}};function C(){var s=".discount-indicator-container";if(n&&P(Y,".cell-discount-indicator,.cell-discount-negofare-indicator")){O(s)}else{m(s)}}function V(){p=q.initData.negoFarePresent;var s=".negofare-indicator-container";if(p&&P(Y,".cell-negofare-indicator,.cell-discount-negofare-indicator")){O(s)}else{m(s)}}function O(s){var t=f.getNode();if(t){t.all(s).removeClass("hidden")}}function m(s){var t=f.getNode();if(t){t.all(s).addClass("hidden")}}f.disablePrev7AndNext7Buttons=function(){var s=Y.one("a.dates-next");if(s){s.addClass("disabled")}var t=Y.one("a.dates-prev");if(t){t.addClass("disabled")}};function P(t,s){var u=t.all(s);return u&&!u.isEmpty()}f.setFirstActiveDate=function(s){W=s};f.setLastActiveDate=function(s){Q=s};f.reselectFlights=function(s,t){if(g){g.reselectFlights(Y,H,s,t)}};f.refreshFlightList=function(s){g.refreshFlightList(s)};f.updateDataTableFromSelectedBasketHash=function(){if(g&&typeof g.updateDataTableFromSelectedBasketHash==="function"){g.updateDataTableFromSelectedBasketHash(Y)}};function Z(t,x,v,w){var AA=w.prev;var AB=w.next;var AC=[],y=t.one("a.dates-next"),u=t.one("a.dates-prev");var AE=x.length*(1000*60*60*24);var z=x[v]?x[v].timestamp:0;var AD=x[v]?x[v].timestampInbound:0;if(AA){AC.push("#"+t.get("id")+" a.dates-prev")}else{t.one("a.dates-prev").addClass("disabled")}if(AB){AC.push("#"+t.get("id")+" a.dates-next")}else{t.one("a.dates-next").addClass("disabled")}if(AC.length>0){var s=A.on("prevNextHandler|click",function(AK){AK.preventDefault();var AJ;var AI={};if(AK.currentTarget.hasClass("dates-prev")){var AG=z-AE;if(W&&W.getTime()>AG){AG=W.getTime()}var AM=0;if(AD!=0&&AD!=null){AM=AD-AE}AJ=-AE;AI.dateDirection=-1;AI.id=AG;AI.idInbound=AM;AI.active=AA}else{var AL=z+AE;if(Q&&Q.getTime()<AL){AL=Q.getTime()}var AF=0;if(AD!=0&&AD!=null){AF=AD+AE}AJ=AE;AI.dateDirection=1;AI.id=AL;AI.idInbound=AF;AI.active=AB}if(AI.active){var AH=(x[J]&&x[J].date)||"";AJ=AJ+A.DataType.Number.parse(new Date(AH.replace(/-/g,"/")));AJ=X(AJ,L);s.detach();T(AK,AI)}},AC.join(","))}}function k(s,u){var t=s.all("li");t.each(function(w,v){var x={index:v,date:u[v]?u[v].timestamp:null,dateInbound:u[v]?u[v].timestampInbound:null,menuItems:t};if(!w.hasClass("yuimenubaritem-disabled")){w.on("click",G,w,x)}else{w.on("click",j)}},f)}function j(s){s.preventDefault()}function X(v,s){var u=A.DataType.Date.parse(v);var t=1000*60*60*24;if(u.getTime()<N){a=J;J=J+Math.floor((N.getTime()-u.getTime())/(t));u=N}if(u.getTime()>I){a=J;J=J-Math.floor((u.getTime()-I.getTime())/(t));u=I}if(u.getTime()>s){a=J;J=J-Math.floor((u.getTime()-s.getTime())/(t));u=s}return A.DataType.Number.parse(u)}function G(t,s){t.preventDefault();J=s.index;d=s.date;b=s.dateInbound;s.menuItems.removeClass("active");this.addClass("active");o.handleDatesPeriodChange(H)}function T(t,s){d=s.id;b=s.idInbound;o.handleDatesPeriodChange(H)}};A.WlSelectFlights.DataTable={}});YUI.add("wl-flight-list-abstract",function(E){var F=function(H,G){var I=this;I.renderItineraryHeader=function(R,K,P,J,L){var M,Q;if(R==="inbounds"){M=L?"returning.new":"returning";Q=K&&K[1]}else{M=L?"departing.new":"departing";Q=K&&K[0]}var O=Q?Q.departureCode:"";var S=Q?Q.arrivalCode:"";var N={direction:M,fromAirport:E.formatAirport(O,P),toAirport:E.formatAirport(S,P)};return G.replaceData(N,J)};I.selectFlightDataTable=function(K,J){return new E.WlSelectFlights.DataTable.Regular(H,G,K)}};E.WlFlightList=F;var B=function(H,G){var I=this;I.renderItineraryHeader=function(N,L,K,J,M){};I.selectFlightDataTable=function(K,J){return new E.WlSelectFlights.DataTable.Advanced(H,G,K)}};E.extend(B,F);E.WlFlightList.AdvancedUnbundled=B;var C=function(H,G,J){var I=this;I.renderItineraryHeader=function(O,M,L,K,N){};I.selectFlightDataTable=function(M,K){var L=K.state||"active";return new E.WlSelectFlights.DataTable.Dynamic(H,G,M,K)}};E.extend(C,B);E.WlFlightList.AdvancedUnbundledDynamic=C;var D=function(I,G,K){var J=this;D.superclass.constructor.call(J,I,G);var H={multicity:function(P,N,M,L){var Q="";for(var O=0;O<N.length;O++){Q+=G.replaceData({no:O+1,fromAirport:E.formatAirport(N[O].departureCode,M)},L)}Q+=G.getHtml("_itineraryHeaderDisclaimer");return Q}};if(E.Lang.isFunction(H[K])){J.renderItineraryHeader=H[K]}J.selectFlightDataTable=function(M,L){return new E.WlSelectFlights.DataTable.Multicity(I,G,M)}};E.extend(D,F);E.WlFlightList.Bundled=D;var A=function(H,G){var I=this;A.superclass.constructor.call(I,H,G);I.selectFlightDataTable=function(K,J){return new E.WlSelectFlights.DataTable.Lazy(H,G,K,J)};I.renderItineraryHeader=function(Q,K,O,J){var L,P;if(Q==="lazy1"){L="returning";P=K&&K[1]}else{L="departing";P=K&&K[0]}var N=P?P.departureCode:"";var R=P?P.arrivalCode:"";var M={direction:L,fromAirport:E.formatAirport(N,O),toAirport:E.formatAirport(R,O)};return G.replaceData(M,J)}};E.extend(A,F);E.WlFlightList.Lazy=A});YUI.add("wl-select-flights-datatable-formatters-common",function(A){A.WlSelectFlights.DataTable.CommonFormatters=function(F){var I=F.timeFormat;var K=F.departAirportFormat;var B=F.arriveAirportFormat;var D=F.destinationAirportFormat;var L=F.originAirportFormat;var N=F.stopsAirportFormat;YAHOO.widget.DataTable=YAHOO.widget.DataTable||{};YAHOO.widget.DataTable.Formatter=YAHOO.widget.DataTable.Formatter||{};YAHOO.widget.DataTable.Formatter.dateNumberFormatter=function(R,S,Q){return Q?'<em data-wl-date="'+Q+"+"+I+'">'+O(Q)+"</em>":""};YAHOO.widget.DataTable.Formatter.dateFormatter=function(T,U,S){var R=C(T,U);var Q=J(T,U);return R+Q};YAHOO.widget.DataTable.Formatter.departDateAndAirportCode=function(R,S,Q){return G(R,S,K)};YAHOO.widget.DataTable.Formatter.arriveDateAndAirportCode=function(R,S,Q){return G(R,S,B)};YAHOO.widget.DataTable.Formatter.flightDuration=function(S,T,Q){var R=S.flightDuration;return E(S,T,R)};YAHOO.widget.DataTable.Formatter.flightNumber=function(R,S,Q){return Q?P(Q,null):""};YAHOO.widget.DataTable.Formatter.flightNumberAndAirlineCode=function(R,S,Q){return R?P(Q,R.airlineCodes):""};YAHOO.widget.DataTable.Formatter.flightNumberNoLink=function(R,S,Q){return Q?H(R.flightNumber,null,false):""};YAHOO.widget.DataTable.Formatter.flightNumberAndAirlineCodeNoLink=function(R,S,Q){return R?H(R.flightNumber,R.airlineCodes,false):""};YAHOO.widget.DataTable.Formatter.availableSeats=function(R,S,Q){if(R.seatsPreviewLinkEnabled){return'<p class="view-seats"><a href="#" class="translate" data-wl-translate="label.flc.viewSeats"></a></p>'}else{return'<p><span class="translate" data-wl-translate="label.flc.viewSeats.unavailable"></span></p>'}};YAHOO.widget.DataTable.Formatter.operatingCarrierFullName=function(U,W,T){if(!T){return""}var S="";var Q=U.wetLeaseCarrier;if(A.Lang.isArray(T)){for(var R=0;R<T.length;R++){var V=A.getFullAirlineName(T[R]);if(Q&&Q[R]!=null){V=Q[R]}S+="<p>"+A.getFullAirlineName(V)+"</p>"}}else{if(Q){S+=Q}else{S+=A.getFullAirlineName(T)}}return S};YAHOO.widget.DataTable.Formatter.operatingCarrierImage=function(T,U,S){if(!S){return""}var R="";if(A.Lang.isArray(S)){for(var Q=0;Q<S.length;Q++){R+='<p class="operating-carrier-image carrier-'+S[Q]+'">'+S[Q]+"</p>"}}else{R+='<p class="operating-carrier-image carrier-'+S+'">'+S+"</p>"}return R};YAHOO.widget.DataTable.Formatter.arrayToString=function(T,U,S){if(S===null||typeof S==="undefined"){return""}var R="";if(A.Lang.isArray(S)){for(var Q=0;Q<S.length;Q++){R+="<p>"+S[Q]+"</p>"}}else{R+="<p>"+S+"</p>"}return R};YAHOO.widget.DataTable.Formatter.destinationFormatter=function(S,T,R){if(!R){return""}var Q="";if(A.Lang.isArray(R)){Q+="<p>"+A.formatAirport(R[0],D)+"</p>"}else{Q+="<p>"+A.formatAirport(R,D)+"</p>"}return Q};YAHOO.widget.DataTable.Formatter.originFormatter=function(S,T,R){if(!R){return""}var Q="";if(A.Lang.isArray(R)){Q+="<p>"+A.formatAirport(R[0],L)+"</p>"}else{Q+="<p>"+A.formatAirport(R,L)+"</p>"}return Q};YAHOO.widget.DataTable.Formatter.classOfService=function(R,S,Q){return Q?'<p class="translate" data-wl-translate="label.flc.cabin.'+Q+'">'+Q+"</p>":""};YAHOO.widget.DataTable.Formatter.rowNumber=function(T,U,R){if(!R){return""}var Q=T.index;var S="";if(A.Lang.isArray(Q)&&Q.length>2){S=Q[2]}if(S==="bundled"){return'<em class="translate" data-wl-translate="label.flc.bundled.direction'+parseInt(R,10)+'">'+A.translateParametrized("label.flc.bundled.direction"+parseInt(R))+"</em>"}else{return"<em>"+(parseInt(R,10)+1)+"</em>"}};YAHOO.widget.DataTable.Formatter.flightStops=function(U,V,T){if(!T){return""}var S;if(A.Lang.isArray(T)){S=T.length}else{S=A.DataType.Number.parse(T)}if(S>0){var R=[];for(var Q in T){R[Q]=A.formatAirport(T[Q],N)}S+=" ("+R.join(", ")+")"}return S};YAHOO.widget.DataTable.Formatter.rowFormatter=function(Q,R){M.call(this,Q,R);return true};YAHOO.widget.DataTable.Formatter.mcRowFormatter=function(Q,T){var S=A.one(Q);var R=T.index;if(R==null){S.addClass("emptyTableRow")}else{if(A.Lang.isArray(R)){R=R[0]}if(R===0){S.addClass("first")}else{S.addClass("rest")}}M.call(this,Q,T);return true};var M=function(Q,V){var T=V.pricePerPerson;var S=V.index;var U=this.getContainerEl().id.split("-")[1];var R;if(T&&T.itineraryData){R={segments:T.itineraryData.segments}}A.WlSelectFlights.DataTable.EventHandlers.storeData(this.getContainerEl().id,V.getId(),{index:S,direction:U,data:R})};function C(T,Q){var S=T[Q];var R;if(A.Lang.isArray(S)){if(/departureDate/.test(Q)){R=S[0]}if(/arrivalDate/.test(Q)){R=S[S.length-1]}}else{R=S}return O(R)}function O(Q){return'<span class="translate" data-wl-date="'+Q+","+I+'">'+A.DataType.Date.format(new Date(Q),{format:I})+"</span>"}function G(W,X,R){var V=X.replace("DateAndCode","");var U=W[V+"Date"];var S=O(U);var T=W[V+"Code"];var Q=J(W,X);return'<span class="airport_code">'+A.formatAirport(T,R)+"</span>"+S+Q}function J(U,T){if(/arrival/.test(T)){var R=U.arrivalDate;var V=U.departureDate;var S=A.DataType.Date.parse(V);var Q=A.DataType.Date.parse(R);if(Q.getDate()!==S.getDate()){return A.getHtml("flc","_nextDayIndicator")}}return""}function H(W,X,R){var T="";var U=R?'<a href="#">':"";var Q=R?"</a>":"";if(A.Lang.isArray(W)){for(var S=0;S<W.length;S++){var V=X&&X[S]?X[S]:"";if(S===0){T+='<p class="flight-number">'+U+V+" "+W[S]+Q+"</p>"}else{T+='<p class="flight-number">'+U+V+" "+W[S]+' <img alt="Connecting Flight" src="'+sabre.config.global.commonResourcesPath+'images/logo-tiny.gif">'+Q+"</p>"}}}else{T+='<p class="flight-number">'+U+X+" "+W+Q+"</p>"}return T}function P(Q,R){return H(Q,R,true)}function E(S,T,R){var Q="label.flc.durationFormat|"+Math.floor(R/3600000)+"|"+Math.ceil((R%3600000)/60000);return R?'<p class="translate" data-wl-translate="'+Q+'">'+A.translateParametrized(Q)+"</p>":""}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-eventhandlers",function(A){A.WlSelectFlights.DataTable.EventHandlers=A.WlSelectFlights.DataTable.EventHandlers||(function(){var C={};function F(G,I,H){C[G]=C[G]||{};C[G][I]=H}function D(G,H){return C[G]&&C[G][H]}function E(H,I){var G=H.replace("#","");C[G]=C[G]||{};I(H,C[G])}function B(G){C[G]={}}return{storeData:F,clearStoredData:B,attachHandlers:E,getStoredData:D}}())},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-common",function(A){A.WlSelectFlights.DataTable.selectedBasketHashRef=A.WlSelectFlights.DataTable.selectedBasketHashRef||{};A.WlSelectFlights.DataTable.selectedBasketPrice=A.WlSelectFlights.DataTable.selectedBasketPrice||{};A.WlSelectFlights.DataTable.Common=function(AK,AF,M){var r=this;var AD=AK.compInstConfig;var AJ="";r.advancedShopping=AK.initData.advancedModel;var U=AD.flightListCurrencyOrder?AD.flightListCurrencyOrder.toLowerCase():"before";var j=AD.flightListMilesPosition?AD.flightListMilesPosition.toLowerCase():"before";var d=AD.showFaresOnExchange;var H=AK.initData.flightExchanged;var v="_flightDetailsOverlay";var E="_flightDetailsOverlayRow";var o="_marketingTextOverlay";var q="_fareIndicatorTextOverlay";var W="_compareBenefitsOverlay";var c="_ancillaryDetailsOverlay";var D=[];var y=null;var u=null;var T=AK.htmlBody[AK.state].dataTable.overlayColumnDefs;var X={fields:["airlineCodes","departureDate","departureCode","arrivalDate","arrivalCode","wetLeaseCarrier"]};var G={fields:["airlineCodes","departureDate","departureCode","arrivalDate","arrivalCode","index","wetLeaseCarrier"]};var b=AK.state==="lazy"?"lazy":M==="multicity"?"bundled":M==="both"?"both":M;var x=AK.state==="lazy"?"lazy":M==="multicity"?"bundled":M==="both"?"outbounds":M;var AC=A.WlSelectFlights.DataTable.selectedBasketHashRef;var g=A.WlSelectFlights.DataTable.selectedBasketPrice;var I="flight-fare";if(C()){r.itineraryPartsCount=1}else{r.itineraryPartsCount=AK.initData.airSearchCriteria.itineraryAirportPairs.length}var m=AK.compInstConfig.tableColumns.split(",");A.Array.each(m,function(AM,AL){m[AL]=A.Lang.trim(m[AL])});function Y(AM,AN,AL){if(!AM.one("#dtcontainer-"+AN)&&AM.get("id")!=="dtcontainer-"+AN){AM.append('<div id="dtcontainer-'+AN+'"></div>')}A.Event.purgeElement("#dtcontainer-"+AN,true);A.WlSelectFlights.DataTable.EventHandlers.attachHandlers("#dtcontainer-"+AN,AL);AJ="dtcontainer-"+AN;N(AJ);return AJ}function N(AL){YUI().use("tabview",function(AO){var AN=0;var AM=AO.one("#"+AL).all(".flight-ancillaries-tab");AM.each(function(AP){AP.removeClass("flight-info-init-state");AP.setAttribute("id","view-tab-"+AL+"-"+AN);var AQ=AP.getAttribute("id");new AO.TabView({srcNode:"#"+AQ}).render();AN++})})}function K(AM,AR,AU,AL,AQ){var AS=AR+AL;var AT=A.one("#"+AS);if(!AT){if(!AQ){var AN=AF.getPartial(AU,{id:AR});AM.append(AN)}}var AP=new YAHOO.widget.Dialog(AS,{visible:false,draggable:false,zIndex:520,close:true});var AO=true;AP.showEvent.subscribe(function(AV){A.one(this.element).translate();A.on(AS+"|click",function(AX){if(AO){AO=false}else{var AW=AX.target;if(!AW.inRegion(AP.element,true)){AP.hide()}}},A.one("#ROOT"))});AP.hideEvent.subscribe(function(){A.detach(AS+"|click");AO=true});D[AU]=AP;AP.render(document.body);return A.one("#"+AS)}function z(AM,AS,AU,AL,AR){var AT=AS+AL;var AP=A.one("#"+AT);if(!AP){if(!AR){var AN=AF.getPartial(AU,{id:AS});AM.append(AN)}}var AQ=new YAHOO.widget.Dialog(AT,{visible:false,draggable:false,zIndex:520,close:true});var AO=true;AQ.showEvent.subscribe(function(AV){A.one(this.element).translate();A.on(AT+"|click",function(AX){if(AO){AO=false}else{var AW=AX.target;if(!AW.inRegion(AQ.element,true)){AQ.hide()}}},document)});AQ.hideEvent.subscribe(function(){A.detach(AT+"|click");AO=true});D[AU]=AQ;AQ.render(document.body);return A.one("#"+AT)}function AE(AM,AN){var AL=K(AM,AN,v,"-flightDetails",true);AL.addClass("modal flight-details")}function e(AM,AP,AL){var AO=AM;var AN=AP;AL.all(".view-seats").on("click",function(AV){AV.preventDefault();var AT=AV.currentTarget;if(AN===null){var AX=AO[AT.ancestor("tr").get("id")];var AS=L(AT.ancestor("tr").get("id"));var AQ=0}else{var AX=AO[AN];var AS=L(AN);var AQ=F(AV)}var AU=AX.data;var AW=AU.segments;if(AX.direction=="multicity"||AX.direction=="bundled"){var AR=n(AO,AN!=null?AN:AT.ancestor("tr").get("id"));AQ=AQ+AR.segmentIndexOffset;AW=AR.segments}AF.fireEvent("view-seats",{basketsHashRef:AU.basketsRef,rbdsAndPrices:AS,selectedSegmentIndex:AQ,segmentList:AW,selectedBasketHashRef:P(M,AU.basketsRef)})})}function n(AP,AN){var AO=[];var AM=0;var AQ=true;var AL=AN.substring(0,AN.lastIndexOf("-"));for(var AR in AP){var AT=AR.substring(0,AR.lastIndexOf("-"));if(AT==AL){if(AR==AN){AQ=false}for(var AS in AP[AR].data.segments){if(AQ){AM++}AO.push(AP[AR].data.segments[AS])}}}return{segments:AO,segmentIndexOffset:AM}}function L(AN){var AM=A.one("#"+AN).all(".price");var AP=[];var AL=[];var AO=[];AP.push(AO);AP.push(AL);AM.each(function(AQ){if(!t(AQ)){AO.push(AQ.getAttribute("fare-family-key"));if(AQ.one(".prices-all")==null){AL.push("soldOut")}else{if(AQ.hasClass("insufficient-miles")){AL.push("insufficientMiles")}else{if(AQ.hasClass("invalid-flight")){AL.push("invalidFlight")}else{AL.push(AQ.one(".prices-all")._node.outerHTML.replace("&nbsp;"," "))}}}}});return AP}function t(AL){return !AL.hasAttribute("fare-family-key")||AL.getAttribute("fare-family-key")==="default"}function F(AL){allSeatsLinks=A.all(".view-seats")._nodes;index=0;for(seatsLink in allSeatsLinks){if(allSeatsLinks[seatsLink]===AL.currentTarget._node){return index}index++}return 0}function w(Ac,Ad,AM,AX,AY,AS,Af){if(!D[v]){AE(A.one("body"),Ac)}var AW=D[v];if(AW){f();var Ae=A.templateHtml.flc[E];var AT=[];for(var Aa=0;Aa<AX.length;Aa++){var AQ=AX[Aa];var AL={};for(var AZ=0;AZ<AM.length;AZ++){var AN=AM[AZ];AL[AN.key+"_"+AN.formatter]=YAHOO.widget.DataTable.Formatter[AN.formatter](AQ,AN.key,AQ[AN.key])}AT.push(AF.replaceData(AL,Ae))}var AO=A.templateHtml.flc[v];var Ab=AF.replaceData({id:Ac,tableRows:AT.join("")},AO);AW.setBody(Ab);var AU=A.isCurrentLanguageRtl();var AV=AU?"tr":"tl";var AR=AU?"br":"bl";var AP=(Af==="left")?-32:0;AW.cfg.setProperty("context",[A.Node.getDOMNode(Ad),AR,AV,["beforeShow","windowResize"],[AP,0]]);AW.show();e(AY,AS,A.one("#"+Ac+"-flightDetails"))}}function f(){if(D[v]){D[v].hide()}}function P(AO,AP){var AN=A.WlSelectFlights.DataTable.selectedBasketHashRef[AO];if(AN!=null){for(var AM in AP){var AL=AP[AM];if(AL){if(AL.brandedBasketHashRef&&AL.brandedBasketHashRef==AN){return AN}}}}return null}function k(AM){r.createFareIndicatorTextOverlay(A.one("body"));if(r.overlayContainers[q]){var AN=AM.currentTarget;var AR=AN._node.getAttribute("data-translationkey");var AO=r.overlayContainers[q];var AQ=A.one(AO.element);var AW=AQ.one(".marketingOverlayContent");var AX=A.Node.create("<span data-wl-translate="+AR+"></span>");AX.addClass("translate");AW.append(AX);AW.translate();var AV=AF.node.get("id");var AT=AN.get("id");var AU=YAHOO.util.Dom.getXY(AV)[0];var AZ=YAHOO.util.Dom.getXY(AT)[0];var AY=AF.node.get("offsetWidth");var AP="tl";var AL="br";var AS=3;if(AZ>=AU+AY/2){AP="tr";AL="bl";AS=-AS}AO.cfg.setProperty("context",[AT,AP,AL,["beforeShow","windowResize"],[AS,-23]]);s(AQ)}}function B(AU,AM){AU.preventDefault();AI();f();var AN=AU.currentTarget;var AP=AN.ancestor("tr").get("id");var AL=AM[AP];var AV=AL.direction;var AQ=AN.getAttribute("data-subcode");if(!r.overlayContainers[c]){r.createAncillariesDetailsTextOverlay(AN,AV)}var AR=r.overlayContainers[c];if(AR){var AT=A.one(AR.element);var AO=AT.one(".ancillaryDetailsOverlayHeader");var AS=AT.one(".ancillaryDetailsOverlayText");if(AO&&AS){AO.setContent(J("Ancillary.name.",AQ));AS.setContent(J("Ancillary.description.",AQ))}AR.cfg.setProperty("context",[AU.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[-32,0]]);AR.show()}}function J(AN,AP){var AM=AN+AP;var AO=AN+"default";var AL=A.Node.create('<span data-wl-translate="'+AM+'" data-wl-fallback-translate="'+AO+"|"+AP+'"></span>');AL.addClass("translate");return AL}function AI(){if(D[c]){D[c].hide()}}function AA(AO){var AN=A.getCurrentTranslations();var AL=AO.marketingText;var AM=AN[AL];if(AM===undefined){AM=AL}else{AM='<span data-wl-translate="'+AL+'" class="translate">'+AM+"</span>"}return AM.replace(/&apos;/g,"'")}function s(AL){AL.setStyle("opacity",0);AL.setStyle("visibility","visible");var AM=new A.Anim({node:"#"+AL.get("id"),from:{opacity:0},to:{opacity:1},duration:0.3});AM.run()}A.WlSelectFlights.DataTable.Formaters=A.WlSelectFlights.DataTable.Formaters||function(){A.WlSelectFlights.DataTable.CommonFormatters(AD);return true}();function Q(AV,AN,AT){AV.preventDefault();AI();var AO=AV.currentTarget;var AP=AO.ancestor("tr").get("id");var AM=AN[AP];var AU=AM.index;var AW=AM.direction;var AR=AM.data;if(!AV.target.hasClass("price")&&!AV.target.hasClass(I)){if(!AR){AR=AG(AW,AU)}var AX=AK.compInstConfig.overlayTableColumns.split(",");var AQ=R(T,AX);var AS=AR.segments;var AL;if(isNaN(AW)){AL=AW}else{AL="flight_"+AW}w(AL,AO,AQ,AS,AN,AP,AT)}}function R(AM,AT){var AO=[];var AP=[],AR,AL;for(AL in AM){var AS=AM[AL].key;var AQ=A.Array.indexOf(AT,AS);if(AQ>=0){AP[AQ]=AM[AL]}}for(AR=0;AR<=AP.length;AR++){if(A.Lang.isObject(AP[AR])){var AN=AO.length;AO[AN]=AP[AR]}}return AO}function AB(AS,AM){AS.preventDefault();var AN=AS.currentTarget;var AO=AN.ancestor("tr").get("id");var AL=AM[AO];var AR=AL.index;var AU=AL.direction;var AQ=AL.data;if(!AQ){AQ=r.getOffer(AU,AR)}var AP=AS.target.getAttribute("index");if(AP==""){AP=AS.target.ancestor("a").getAttribute("index")}var AV=AQ.segments[AP];var AT=new A.widgets.OnTimePerformanceWidget(AK,AV);AT.show()}function AG(AN,AL){var AM;if(A.Lang.isArray(AL)){AM=AK.initData.offers[AL[1]].parts[AL[0]]}else{AM=(AN==="both"?AK.initData.outbounds[AL]:AK.initData[AN][AL])}return AM}function C(){return AK.initData.advancedModel&&AK.initData.changedItineraries&&AK.initData.changedItineraries.length==1}function AH(AM,AL){return A.JSON.stringify(AM)===A.JSON.stringify(AL)}r.responseSchema=function(){return G}();r.overlayColumns=function(){return T}();r.overlayResponseSchema=function(){return X}();r.configurationColumns=function(){return m}();r.flightDetailsOverlayContainerName=function(){return v}();r.marketingTextOverlayContainerName=function(){return o}();r.ancillaryDetailsOverlayContainerName=function(){return c}();r.fareIndicatorTextOverlayName=function(){return q}();r.compareBenefitsOverlayContainerName=function(){return W}();r.overlayContainers=function(){return D}();r.getStoredColumnKey=function(AL){var AM=A.WlSelectFlights.DataTable.EventHandlers.getStoredData(AJ,AL.get("id"));return AM&&AM.ffKey};r.getStoredItineraryData=function(AL){var AM=A.WlSelectFlights.DataTable.EventHandlers.getStoredData(AJ,"tr-"+AL+"-0");return AM&&AM.data};r.getSelectedHashRef=function(){return AC[b]};r.getSelectedBasketPrice=function(){return g[b]};r.setModelSelectedBasketHash=function(AL){AK.initData[x+"SelectedBasketHash"]=AL};r.getModelSelectedBasketHash=function(){return AK.initData[x+"SelectedBasketHash"]};r.resetSelection=function(){AC[b]=null;g[b]=null};r.refreshFlightList=function(AN){var AM=AN.data.direction;if(AM=="outbounds"){var AL="__unbundled_inbounds";AF.itinerarySelectedReloadLeg("inbounds","inbounds",AM,AL)}else{if(AM=="inbounds"){var AL="__unbundled_outbounds";AF.itinerarySelectedReloadLeg("outbounds","outbounds",AM,AL)}else{AF.itinerarySelectedNoLegReload(AM)}}};r.reselectFlights=function(AP,AS,AQ,AR){var AN="#flight_"+AS+"_"+AQ;var AM=AP.one(AN);if(AM){var AL=AM.ancestor("td").get("id");var AO=A.WlSelectFlights.DataTable.EventHandlers.getStoredData("dtcontainer-"+AS,AL);if(AO&&AH(AO.price,AR)){AM.set("checked",true);r.selectFlightAction(AL,AO)}else{AM.set("checked",false)}}};r.selectFlightAction=function l(AL,AU){var AQ=AU.brandedBasketHashRef;var AN=AU.price;var AP=AU.direction;var AO=AU.index;var AR=AU.fareFamily;var AM=AU.programId;var AS=r.getItineraryData(AP,AO);AF.showProgressOnSelectFlights();r.setModelSelectedBasketHash(AQ);A.WlSelectFlights.DataTable.selectedBasketHashRef[AP]=AQ;A.WlSelectFlights.DataTable.selectedBasketPrice[AP]=AN;var AT=A.merge(AS,{fareFamily:AR,programId:AM,price:AN,departureDate:AS.itineraryPartData.departureDate});AF.flightWasSelected(AP,AT,AQ)};r.createMarketingTextOverlay=function(AM,AN){r.createOverlay(AM,AN,o,"-marketingTextDetails");var AL=AM.one("#"+AN+"-compare-benefits-link");if(AL){AL.on("click",r.showCompareBenefitsOverlay,A,AN)}A.on("load",function(AP){var AO=AP.target.get("parentNode");AO.removeClass("loading");AO.removeClass("loading-iframe");AP.target.removeClass("hidden")},".marketing-iframe")};r.createAncillariesDetailsTextOverlay=function(AL,AM){r.createOverlay(A.one("body"),AM,c,"-ancillaryTextDetails")};r.createFareIndicatorTextOverlay=function(AL){r.createFareIndicatorOverlay(AL,"fareIndicator",q,"-marketingTextDetails")};r.showMarketingTextOverlay=function(AS,AW,AP,AV){if(!r.overlayContainers[o]){r.createMarketingTextOverlay(A.one("body"),AV)}if(r.overlayContainers[o]){var AM=r.overlayContainers[o];var AR=A.one(AM.element);if(AP==="hover"){A.on("marketingTextMessage|mouseout",r.hideMarketingTextOverlayIfNotInOverlayRegion,AR)}if(AW){if(AK.compInstConfig.contentFromUrl){var AN=AR.one(".marketing-iframe");AN.addClass("hidden");var AQ=AN.get("parentNode");AQ.addClass("loading loading-iframe");AN.set("src",S(AW.brandLabel).replace(/&amp;/g,"&"))}else{var AL=AR.one(".marketingOverlayHeader");var AT=AR.one(".marketingOverlayText");var AO=AR.one(".brandAncillariesInfoContent");var AU=AR.one(".brandAncillariesInfoText");AU.addClass("hidden");AO.set("innerHTML","");if(!AL||!AT){r.createMarketingTextOverlay(A.one("body"),AV);AM=r.overlayContainers[o];AR=A.one(AM.element);AL=AR.one(".marketingOverlayHeader");AT=AR.one(".marketingOverlayText")}if(AW.marketingTexts&&AW.marketingTexts.length>0){AL.set("innerHTML",V(AW.brandLabel));AT.set("innerHTML",V(a(AW.marketingTexts)))}if(AW.brandAncillaries&&AW.brandAncillaries.flightAncillaryTOs&&AW.brandAncillaries.flightAncillaryTOs.length>0){AU.removeClass("hidden");AO.appendChild(Z(AW.brandAncillaries.flightAncillaryTOs))}A.translateNode(AR)}AM.cfg.setProperty("context",[AS.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[0,-10]]);AM.show()}}};r.showMarketingTextOverlayWithDelay=function(AM,AO,AN,AL){if(AM.target===AM.currentTarget||!AM.currentTarget.contains(AM.relatedTarget)){h(y);h(u);u=A.later(300,null,r.showMarketingTextOverlay,[AM,AO,AN,AL])}};r.hideMarketingTextOverlay=function(AL){if(r.overlayContainers[o]){r.overlayContainers[o].hide()}};r.hideFareIndicatorTextOverlay=function(AL){if(r.overlayContainers[q]){r.overlayContainers[q].destroy(true)}};r.hideAncillaryDetailsOverlay=function(AL){if(r.overlayContainers[c]){r.overlayContainers[c].destroy(true)}};r.hideMarketingTextOverlayIfNotInOverlayRegion=function(AL){if(!AL.currentTarget.contains(AL.relatedTarget)){h(y);h(u);y=A.later(100,null,function(AM){if(r.overlayContainers[o]&&!p(AM,r.overlayContainers[o].element)){r.hideMarketingTextOverlay()}},AL)}};function Z(AM){var AL="";var AN;for(AN in AM){AL+='<div class="ancillary-info-image ancillary-'+AM[AN].subCode+'" ></div>'}return A.Node.create(AL)}function V(AN){var AM=A.translations.lang;AM=AM.toLowerCase();var AL="";if(AN&&A.Lang.isArray(AN)){A.Array.some(AN,function(AO){if(AM===AO.languageId.toLowerCase()){AL=O(AO);return true}})}return AL}function a(AN){var AL=[],AM;for(AM=0;AM<AN.length;AM++){var AP=AN[AM].languageId;var AO=AN[AM].marketingText;AL.push({languageId:AP,marketingText:A.decodeHtmlEntities(AO)})}return AL}function S(AN){var AM=A.translations.lang;AM=AM.toLowerCase();var AL="";if(AN&&A.Lang.isArray(AN)){A.Array.some(AN,function(AO){if(AM===AO.languageId.toLowerCase()){AL=AO.brandLabelUrl;return true}})}return AL}function O(AO){var AN=A.getCurrentTranslations();var AL=AO.marketingText;var AM=AN[AL];if(AM===undefined){AM=AL}else{AM='<span data-wl-translate="'+AL+'" class="translate">'+AM+"</span>"}return AM.replace(/&apos;/g,"'")}function p(AO,AN){var AS=AO.pageX;var AQ=AO.pageY;AN=A.one(AN);var AP=AN.get("region").top;var AR=AN.get("region").bottom;var AM=AN.get("region").left;var AL=AN.get("region").right;return AS>AM&&AS<AL&&AQ>AP&&AQ<AR}function h(AL){if(AL){AL.cancel()}}r.createDataTableContainer=Y;r.createOverlay=K;r.createFareIndicatorOverlay=z;r.showFlightDetailsOverlay=w;r.hideFlightDetailsOverlay=f;r.showFareIndicatorTextOverlay=k;r.getOffer=AG;r.getTextInCurrentLanguage=V;r.decodeHtmlEntities=a;r.commonEventHandlers=function(AM,AN){var AL=A.one(AM);if(AL){AL=AL.get("parentNode");if(AK.initData.onTimePerformanceAvailable){A.delegate("click",AB,AL,".flight-number",A,AN);A.delegate("click",AB,AL,".flight-number-and-direction",A,AN);A.delegate("click",Q,AL,".flight-number-details",A,AN);e(AN,null,AL)}else{A.delegate("click",Q,AL,".flight-number",A,AN);A.delegate("click",Q,AL,".flight-number-and-direction",A,AN);e(AN,null,AL)}A.delegate("mousemove",Q,AL,".ancillary-info-image.static",A,AN,"left");A.delegate("mousemove",B,AL,".ancillary-info-image.dynamic",A,AN);A.delegate("mouseleave",f,A,".flight-details",A,AN,"left");A.delegate("mouseleave",AI,A,".ancillary-details",A,AN)}r.createAdvisorsSuccessHandler=function AO(AS,AR,AT,AQ){return function AP(Ad,AW){var AX="flight-advisory-"+AQ+"-row";var Ac=A.one("#"+AX);var Aa=AQ+"-selected-with-advisors";if(r.advancedShopping){Aa="leg-selected-with-advisors"}var AZ=AR.ancestor().all("."+Aa);AZ.each(function(Ag){Ag.removeClass(Aa)});if(Ac){Ac.remove(false)}var AY=AW.partials;if(AY){var Ab=AY[AT];if(Ab.length>0){var AU=A.one("#"+AS);var AV=AU.one("div");AV.addClass(Aa);var Af=document.createElement("tr");Af.id=AX;var Ae=document.createElement("td");Ae.colSpan=1000;Ae.innerHTML=A.decodeHtmlEntities(Ab);Af.appendChild(Ae);AR.insert(Af,"after")}}}}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-multicity",function(A){A.WlSelectFlights.DataTable.Multicity=function(D,M,U){var J=this;A.augment(J,A.WlSelectFlights.DataTable.Common,false,null,[D,M,U]);var K="__flightAdvisorOutboundRow";var X=J.fareIndicatorTextOverlayName;var P=J.overlayContainers;var O;var G=0;var V=[];var Q=J.responseSchema;var I=A.WlSelectFlights.DataTable.selectedBasketHashRef;var C=D.state==="lazy"?"lazy":U==="multicity"?"bundled":U;I[C]=D.initData[C+"SelectedBasketHash"];var H=D.compInstConfig.bundledAndMulticityTablesColumns.split(",");A.Array.each(H,function(Z,Y){H[Y]=A.Lang.trim(H[Y])});J.getSelectedHashRef=function(){return I[C]};function F(Y){B();return J.createDataTableContainer(Y,U,function(Z,a){var b=D.initData.branded?"td.price":"td.multicityPrice";A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(Z);A.delegate("click",E,Z,b,A,a);J.commonEventHandlers(Z,a)})}J.applyEvents=function(a){var Y=F(a);var Z=D.initData.offers;D.initData.branded?N(Z,Y):W(Z,Y);M.getDomEvents()};function N(c,f){var Y=D.initData.fareFamilies;var d,Z,h=c.length,g=Y.length;for(d=0;d<h;d++){A.WlSelectFlights.DataTable.EventHandlers.storeData(f,"tr-"+U+"-"+d,{index:d,direction:U,data:c[d]});var b=c[d].parts;for(var a=0;a<b.length;a++){A.WlSelectFlights.DataTable.EventHandlers.storeData(f,"tr-"+d+"-"+a,{index:d,direction:U,data:b[a]})}for(Z=0;Z<g;Z++){var k=Y[Z].brandId;var e=S(Y[Z]);A.WlSelectFlights.DataTable.EventHandlers.storeData(f,U+"-"+k,{ffKey:k});if(c[d].basketsRef[k]){A.WlSelectFlights.DataTable.EventHandlers.storeData(f,"td-"+U+"-"+k+"-"+d,{fareFamily:k,programId:e,index:d,direction:U,brandedBasketHashRef:c[d].basketsRef[k].brandedBasketHashRef,price:c[d].basketsRef[k].prices})}}}}function S(Y){if(Y.brandLabel[0]){return Y.brandLabel[0].programId}else{if(Y.marketingTexts[0]){return Y.marketingTexts[0].programId}}return }function W(d,a){var c,Y=d.length;for(c=0;c<Y;c++){A.WlSelectFlights.DataTable.EventHandlers.storeData(a,"td-"+c,{index:[0,c,d.dynamicState],basketHashRef:d[c].basketHashRef,price:d[c].offerPrice});var e=d[c].parts?d[c].parts:[];for(var b=0,Z=e.length;b<Z;b++){A.WlSelectFlights.DataTable.EventHandlers.storeData(a,"tr-"+c+"-"+b,{index:c,direction:U,data:e[b]})}}}function T(b){var f=[],d,a,Z;for(a in b.offers){if(a>0){f[f.length]={}}var g=b.offers[a];var e=true;for(d in g.parts){var c=g.parts[d];var Y=f.length;f[Y]={};for(Z in c.itineraryPartData){f[Y][Z]=c.itineraryPartData[Z]}if(e===true){f[Y].pricePerPerson={basketHashRef:g.basketHashRef,price:g.offerPrice,discountApplied:g.discountApplied,negotiatedFare:g.negotiatedFare,moreMilesRequired:g.moreMilesRequired,seatsRemaining:g.seatsRemaining,disabled:g.disabled};e=false}f[Y].index=[d,a,b.dynamicState]}V[a]=g.parts.length}return f}function L(){A.all("tr.rest td.yui-dt-col-pricePerPerson").remove();A.all("tr.first td.yui-dt-col-pricePerPerson").each(function(Z,Y){Z.setAttribute("rowspan",V[Y]||1)})}function B(){var a=A.one(".flight-list");var Z=a.cloneNode(true);var b=A.all(".price-cell");var Y=Z.all(".price-cell");b.each(function(e,d){var f=Y.item(d);if(f){var c=e.get("offsetHeight");f.one(".content-holder").setStyle("height",c)}});a.replace(Z)}J.hideFareIndicatorTextOverlay=function(Y){if(P[X]){P[X].destroy(true)}};J.createFareIndicatorTextOverlay=function(Y){J.createFareIndicatorOverlay(Y,"fareIndicator",X,"-marketingTextDetails")};J.showCompareBenefitsOverlay=function(a,Z){if(!P[_compareBenefitsOverlayContainerName]){J.createCompareBenefitsOverlay(A.one("body"),Z)}a.preventDefault();A.log("show compare benefits");if(P[_compareBenefitsOverlayContainerName]){var Y=P[_compareBenefitsOverlayContainerName];Y.cfg.setProperty("fixedcenter",true);Y.cfg.setProperty("modal",true);Y.show()}};function E(f,Y){var b=f.currentTarget;var a=b.get("id");var j=Y[a];var h=D.initData.branded?j.brandedBasketHashRef:j.basketHashRef;var c=j.price;var d=j.index;var Z=D.initData.branded?D.initData.offers[d]:D.initData.offers[d[1]];f.stopImmediatePropagation();var g=b.one("input");if(!g){return }g.set("checked",true);M.showProgressOnSelectFlights();D.initData.multicitySelectedBasketHash=h;A.WlSelectFlights.DataTable.selectedBasketHashRef.bundled=h;A.WlSelectFlights.DataTable.selectedBasketPrice.bundled=c;R(a,j);M.flightWasSelected("multicity",Z.parts,h)}function R(a,c){var b="outbound";var Z=K;var g=A.one("#"+a).ancestor();var Y=g.next(".emptyTableRow");var e=Y==null?e=g.ancestor().one("> tr:last-of-type"):e=Y.previous();var f="flight-advisory-"+b+"-row";e=e.getAttribute("id")==f?e.previous():e;var d={data:{basketHashRefs:[D.initData.branded?c.brandedBasketHashRef:c.basketHashRef],direction:b,requestPartials:[Z]},on:{success:J.createAdvisorsSuccessHandler(a,e,Z,b)}};M.fireEvent("to-ajax",{cfg:d,actionCode:"getAdvisors"})}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-lazy",function(A){A.WlSelectFlights.DataTable.Lazy=function(B,M,V,E){var J=this;var N;A.augment(J,A.WlSelectFlights.DataTable.Common,false,null,[B,M,V]);var X=J.fareIndicatorTextOverlayName;var D="__lazyViewWrapperInbounds";var L="__flightAdvisorOutboundRow";var W="__flightAdvisorInboundRow";var I=E.lazyStep;var K=B.initData.selectedParts[I];var F=0;var P=J.responseSchema;var O=J.overlayContainers;P.fields.push("step","pricePerPerson");var H=B.compInstConfig.tableColumns.split(",");A.Array.each(H,function(Z,Y){H[Y]=A.Lang.trim(H[Y])});function C(Y){return J.createDataTableContainer(Y,V,function(Z,a){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(Z);A.delegate("click",R,Z,"td.lazyPrice",A,a);J.commonEventHandlers(Z,a)})}J.applyEvents=function(a,Z){var Y=C(a);T(Z,Y);M.getDomEvents()};J.destroy=function(){if(N){var Y=A.one(N.getContainerEl());N.destroy();N=null;Y.purge(true);Y.remove()}};J.getSelectedHashRef=function(){return K};J.resetSelection=function(){K=null};J.createFareIndicatorTextOverlay=function(Y){J.createFareIndicatorOverlay(Y,"fareIndicator",X,"-marketingTextDetails")};J.hideFareIndicatorTextOverlay=function(Y){if(O[X]){O[X].destroy(true)}};function T(b,Z){var d=b;var a,Y=d.length;for(a=0;a<Y;a++){var c={departureDate:d[a].itineraryPart.itineraryPartData.departureDate,segments:d[a].itineraryPart.segments,fareIndicators:d[a].itineraryPart.fareIndicators};A.WlSelectFlights.DataTable.EventHandlers.storeData(Z,"td-lazy-"+I+"-"+a,{step:I,index:a,brandedBasketHashRef:d[a].basketHashRef,offerHashCode:d[a].offerHashCode,itineraryData:c,price:d[a].minPrice});A.WlSelectFlights.DataTable.EventHandlers.storeData(Z,"tr-lazy-"+I+"-"+a,{index:a,direction:V,data:c})}}function U(d){var b=[],a,Z;for(a in d){var c=d[a];var Y=b.length;b[Y]=b[Y]||{};for(Z in c.itineraryPart.itineraryPartData){b[Y][Z]=c.itineraryPart.itineraryPartData[Z]}b[Y].pricePerPerson={basketHashRef:c.basketHashRef,offerHashCode:c.offerHashCode,price:c.minPrice,discountApplied:c.discountApplied,negotiatedFare:c.negotiatedFare,moreMilesRequired:c.moreMilesRequired,seatsRemaining:c.seatsRemaining,disabled:c.disabled,itineraryData:{departureDate:c.itineraryPart.itineraryPartData.departureDate,segments:c.itineraryPart.segments}};b[Y].index=a}return b}function R(c,Y){c.stopImmediatePropagation();var a=c.currentTarget;var d=a.one("input");if(!d||d.get("disabled")){return }d.set("checked",true);var Z=a.get("id");var h=Y[Z];var f=h.brandedBasketHashRef;var g=h.offerHashCode;K=g;M.showProgressOnSelectFlights();M.fireEvent("lazy-flight-selection",{data:{step:h.step,index:h.index,selectedHashRef:f,offerHashCode:g,itinerary:h.itineraryData}});if(!f&&g&&M.rendered){M.showProgressOnSelectFlights();var b={data:{basketHashRefs:[g],requestPartials:[D]},on:{success:S}};M.fireEvent("to-ajax",{cfg:b,actionCode:"itineraryPartSelected"})}Q(Z,h);M.unblockSubmitIfFlightsSelected()}function Q(c,Z){var b=Z.step==1?"inbound":"outbound";var d=Z.step==1?W:L;var a=A.one("#"+c).ancestor();var Y={data:{step:Z.step,offerIndex:Z.index,requestPartials:[d]},on:{success:J.createAdvisorsSuccessHandler(c,a,d,b)}};M.fireEvent("to-ajax",{cfg:Y,actionCode:"getAdvisors"})}function G(Z,Y){return Z==="both"?B.initData.outbounds[Y]:B.initData[Z][Y]}var S=function(c,a){var b=a.partials;if(b){var Z=b[D];var Y=M.node.one("#lazy"+(I+1));if(Y){Y.set("innerHTML",A.decodeHtmlEntities(Z));M.renderLazySelectFlights(I+1,a.model.offers);M.hideProgressOnSelectFlights()}}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable",function(A){A.WlSelectFlights.DataTable.Regular=function(E,L,M){var K=this;A.augment(K,A.WlSelectFlights.DataTable.Common,false,null,[E,L,M]);var G;var I="_compareBenefitsOverlayTableHeaderCell";var J="_compareBenefitsOverlayTableCell";var P="_compareBenefitsOverlayTable";var B="__flightAdvisorOutboundRow";var C="__flightAdvisorInboundRow";var O=K.marketingTextOverlayContainerName;var H=K.compareBenefitsOverlayContainerName;var F=K.fareIndicatorTextOverlayName;K.createDataTableWithEvents=function(Q){return K.createDataTableContainer(Q,M,function(R,S){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(R);A.delegate("click",K.selectFlightCallback,R,"td.price",A,S);K.commonEventHandlers(R,S)})};K.applyEvents=function(R){var Q=K.createDataTableWithEvents(R);K.storeItineraryData(Q,M);L.fire("widget-rendered",M)};K.translateBrands=function(Q){if(E.compInstConfig.brandedDescriptionEnabled){var R=K.getFareFamilies();A.Array.each(R,function(U){var T=K.getTextInCurrentLanguage(U.brandLabel);if(T){var S=Q.one(".translate-brand-name-"+U.brandId);S.setContent(T)}})}};K.showTableMessage=function(Q,R){G.showTableMessage(Q,R)};K.getRow=function(Q){return G.getTrEl(Q)};K.storeItineraryData=function(Q,R){K.storeItineraryDataWithBrands(Q,R)};K.storeItineraryDataWithBrands=function(V,X){var S=K.getOffers();var Q=K.getFareFamilies();var T,R,Y=S.length,W=Q.length;for(T=0;T<Y;T++){A.WlSelectFlights.DataTable.EventHandlers.storeData(V,"tr-"+X+"-"+T,{index:T,direction:X,data:S[T]});for(R=0;R<W;R++){var Z=Q[R].brandId;var U=D(Q[R]);A.WlSelectFlights.DataTable.EventHandlers.storeData(V,X+"-"+Z,{ffKey:Z});if(S[T].basketsRef[Z]&&!K.isInvalidCombination(S[T].basketsRef[Z].brandedBasketHashRef)){A.WlSelectFlights.DataTable.EventHandlers.storeData(V,"td-"+X+"-"+Z+"-"+T,{fareFamily:Z,programId:U,index:T,direction:X,brandedBasketHashRef:S[T].basketsRef[Z].brandedBasketHashRef,price:S[T].basketsRef[Z].prices})}}}};K.isInvalidCombination=function(R){var Q=L.getValidBasketRefs(M);return A.Lang.isArray(Q)&&A.Array.indexOf(Q,R)===-1};function D(Q){if(Q.brandLabel[0]){return Q.brandLabel[0].programId}else{if(Q.marketingTexts[0]){return Q.marketingTexts[0].programId}}return }function N(a){var b=K.overlayContainers[H];var S=K.getFareFamilies();var U=A.templateHtml.flc[I];var d=A.templateHtml.flc[J];var T=A.templateHtml.flc[P];var V=[];var X=[],W;for(W=0;W<S.length;W++){var c=K.getTextInCurrentLanguage(K.decodeHtmlEntities(S[W].marketingTexts));if(c!=""){var Y={key:S[W].brandId,label:K.getTextInCurrentLanguage(S[W].brandLabel),text:c};V.push(L.replaceData(Y,U));X.push(L.replaceData(Y,d))}}if(A.Object.size(X)>0){var Z=L.replaceData({tableHeader:V.join(""),tableRow:X.join("")},T);A.one("#"+a+"-compareBenefitsOverlayTable").set("innerHTML",Z);if(A.UA.ie>0){var Q=A.one(b.element).one("table").getComputedStyle("width");Q=parseInt(Q,10);var R=A.one(b.element).get("winWidth");Q=Q>R*0.9?R*0.9:Q;b.cfg.setProperty("width",Q)}b.fireEvent("changeContent")}else{if(A.UA.ie>0){b.cfg.setProperty("width","0px")}}}K.selectFlightCallback=function(V,Q){V.stopImmediatePropagation();if(V.target.get("nodeName")==="LABEL"){return }var R=V.currentTarget;var T=R.one("input");if(!T||T.get("disabled")){return }T.set("checked",true);var U=R.get("id");var S=Q[U];K.selectFlightAction(U,S);K.showFlightAdvisors(U,S);return false};K.updateDataTableFromSelectedBasketHash=function(U){var V=K.getModelSelectedBasketHash();if(V){var S="#flight_"+M+"_"+V;var R=U.one(S);if(R){var Q=R.ancestor("td").get("id");var T=A.WlSelectFlights.DataTable.EventHandlers.getStoredData("dtcontainer-"+M,Q);A.WlSelectFlights.DataTable.selectedBasketHashRef[M]=V;A.WlSelectFlights.DataTable.selectedBasketPrice[M]=T.price;if(E.compInstConfig.preSelectEnabled&&E.initData.airSearchCriteria.journey==="ROUND_TRIP"){if(!E.initData.selectedHashRefs[(M==="outbounds"||M==="0")?1:0]){A.on("pageHtmlLoaded",function(){K.selectFlightAction(Q,T)})}}}}};K.createCompareBenefitsOverlay=function(Q,R){K.createOverlay(Q,R,H,"-compareBenefitsDetails");N(R);A.on("click",K.hideCompareBenefitsOverlay,"#"+R+"-close-compare-benefits")};K.getColumnKeyByHeader=function(Q){return G.getColumn(A.Node.getDOMNode(Q)).getKey()};K.showCompareBenefitsOverlay=function(S,R){if(!K.overlayContainers[H]){K.createCompareBenefitsOverlay(A.one("body"),R)}S.preventDefault();A.log("show compare benefits");if(K.overlayContainers[H]){var Q=K.overlayContainers[H];Q.cfg.setProperty("fixedcenter",true);Q.cfg.setProperty("modal",true);Q.show()}};K.hideCompareBenefitsOverlay=function(Q){if(K.overlayContainers[H]){K.overlayContainers[H].hide()}};K.getFareFamilies=function(){return E.initData[M+"FareFamilies"]||E.initData.outboundsFareFamilies};K.getOffers=function(){return E.initData[M]||E.initData.outbounds};K.getItineraryData=function(R,Q){return R==="both"?E.initData.outbounds[Q]:E.initData[R][Q]};K.showFlightAdvisors=function(U,R){var T=R.direction=="inbounds"?"inbound":"outbound";var V=R.direction=="inbounds"?C:B;var S=A.one("#"+U).ancestor();var Q={data:{basketHashRefs:[R.brandedBasketHashRef],direction:R.direction,requestPartials:[V]},on:{success:K.createAdvisorsSuccessHandler(U,S,V,T)}};L.fireEvent("to-ajax",{cfg:Q,actionCode:"getAdvisors"})}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-advanced",function(A){A.WlSelectFlights.DataTable.Advanced=function(D,C,B){var F=this;A.augment(F,A.WlSelectFlights.DataTable.Regular,false,null,[D,C,B]);var G="__flightAdvisorRow";var H=D.compInstConfig;F.storeItineraryData=function(I,J){F.storeItineraryDataAdvanced(I,J)};F.storeItineraryDataAdvanced=function(I,J){if(D.initData.branded){F.storeItineraryDataWithBrands(I,J)}else{E(I)}};function E(I){var M=F.getOffers();var L,N,J=M.length;for(L=0;L<J;L++){A.WlSelectFlights.DataTable.EventHandlers.storeData(I,"tr-"+B+"-"+L,{index:L,direction:B,data:M[L]});var K="DEFAULT";A.WlSelectFlights.DataTable.EventHandlers.storeData(I,B+"-"+K,{ffKey:K});if(M[L].basketsRef[K]&&!F.isInvalidCombination(M[L].basketsRef[K].brandedBasketHashRef)){A.WlSelectFlights.DataTable.EventHandlers.storeData(I,"td-"+B+"-"+K+"-"+L,{fareFamily:K,index:L,direction:B,brandedBasketHashRef:M[L].basketsRef[K].brandedBasketHashRef,price:M[L].basketsRef[K].prices})}}}F.getFareFamilies=function(){return D.initData.fareFamilies[B]};F.getOffers=function(){return D.initData.offers[B]};F.setModelSelectedBasketHash=function(I){D.initData.selectedHashRefs[B]=I};F.getModelSelectedBasketHash=function(){return D.initData.selectedHashRefs[B]};F.showFlightAdvisors=function(M,J){var L=J.direction;var K=A.one("#"+M).ancestor();var I={data:{basketHashRefs:[J.brandedBasketHashRef],direction:L,flightIndex:isNaN(L)?-1:parseInt(L),offerIndex:J.index,requestPartials:[G]},on:{success:F.createAdvisorsSuccessHandler(M,K,G,L)}};C.fireEvent("to-ajax",{cfg:I,actionCode:"getAdvisorsAdvanced"})};F.getItineraryData=function(J,I){return D.initData.offers[J][I]};F.getOffer=function(J,I){return D.initData.offers[J][I]};F.refreshFlightList=function(K){var J=K.data.direction;var I="__advanced_unbundled_static_leg";if(F.itineraryPartsCount==2){if(J==0){C.itinerarySelectedReloadLeg("flight_1",1,J,I)}else{C.itinerarySelectedReloadLeg("flight_0",0,J,I)}}else{C.itinerarySelectedNoLegReload(J)}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-dynamic",function(A){A.WlSelectFlights.DataTable.Dynamic=function(C,L,I,E){var J=this;A.augment(J,A.WlSelectFlights.DataTable.Advanced,false,null,[C,L,I]);var G=E.state||"active";var B=E.donotRefresh||false;var S=E.upgradeOption||false;var N=C.compInstConfig;J.updateOptions=function(U){E=A.merge(E,U);G=E.state;B=E.donotRefresh;S=E.upgradeOption};J.showFlightAdvisors=function(V,U){};J.createDataTableWithEvents=function(V){var U="dtcontainer-"+I;if(G==="collapsed"){K(U)}else{J.storeItineraryDataAdvanced(U,I)}return J.createDataTableContainer(V,I,function(W,X){if(G==="collapsed"){A.delegate("click",H,W,"button.changeFlightDynamic",A,X);if(C.initData.branded){R(V,I)}}else{A.delegate("click",F,W,"td.price",A,X)}J.commonEventHandlers(W,X)})};J.storeItineraryData=function(U,V){};function K(U){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(U);A.WlSelectFlights.DataTable.EventHandlers.storeData(U,"tr-"+I+"-"+0,{index:0,direction:I,data:C.initData.selectedOffers[I]})}J.updateDataTableFromSelectedBasketHash=function(U){var V=J.getModelSelectedBasketHash();if(V){A.WlSelectFlights.DataTable.selectedBasketHashRef[I]=V;A.WlSelectFlights.DataTable.selectedBasketPrice[I]=C.initData.selectedBasketRefs[I].prices}};var F=function(V,U){V.preventDefault();J.selectFlightCallback(V,U)};var H=function(V,U){V.preventDefault();L.showProgressOnSelectFlights();L.changeFlights(I)};function R(W,V){var Y=O(C.initData,V);if(N.brandedDescriptionEnabled){var U=W.one(".price");var X=A.Event.getListeners(U);var Z=T(J.getStoredItineraryData(V),V);var a=M(Z,Y);if(!X&&a&&((a.marketingTexts&&a.marketingTexts.length>0)||(N.contentFromUrl&&a.brandLabel&&A.Lang.isArray(a.brandLabel)&&a.brandLabel.length>0))){if(N.brandedHoveringEnabled){A.on("marketingMessage|mouseover",J.showMarketingTextOverlayWithDelay,U,null,a,"hover");A.on("marketingMessage|mouseout",J.hideMarketingTextOverlayIfNotInOverlayRegion,U)}else{if(N.brandedClickingEnabled){A.on("marketingMessage|click",J.showMarketingTextOverlay,U,null,a,"click")}}}}}function O(U,V){var W=[];D(W,U.fareFamilies[V]);return W}function D(V,Y){var U;if(Y){for(U in Y){var X=Y[U].brandId;var W=M(X,V)!=null;if(!W){V.push(Y[U])}}}}function M(W,V){var U;for(U in V){if(V[U].brandId===W){return V[U]}}return null}function T(X,W){if(X&&X.basketHashRef){for(var V in X.basketsRef){var U=X.basketsRef[V];if(U.brandedBasketHashRef===C.initData.selectedHashRefs[W]){return V}}}return null}J.refreshFlightList=function(U){if(B){B=false;L.hideProgressOnSelectFlights()}else{if(G=="active"){G="collapsed";L.showNextFlightAdvancedDynamic(I)}else{if(S){S=false;if(I+1===J.itineraryPartsCount){L.refreshPricePerPerson()}else{L.hideProgressOnSelectFlights()}}else{if(G=="collapsed"){G="active";L.rollbackNextFlightsAdvancedDynamic(I)}else{L.hideProgressOnSelectFlights()}}}}};J.selectFlightAction=function Q(U,e){var V=P(U);var a=e.brandedBasketHashRef;var X=e.price;var Z=e.direction;var Y=e.index;var b=e.fareFamily;var W=e.programId;var c=J.getItineraryData(Z,Y);J.setModelSelectedBasketHash(a);A.WlSelectFlights.DataTable.selectedBasketHashRef[Z]=a;A.WlSelectFlights.DataTable.selectedBasketPrice[Z]=X;var d=A.merge(c,{fareFamily:b,programId:W,price:X,departureDate:c.itineraryPartData.departureDate});L.showProgressOnSelectFlights();if(V){L.upgradeReloadHtml(Z)}else{L.flightWasSelected(Z,d,a)}};function P(V){var U=A.one("#"+V);if(U.hasClass("upgrade-option-offer")){return true}return false}}},"1.0.0",{requires:[]});YUI.add("onTimePerformanceWidget",function(B){var A=function(E,R){var L=this;var H=B.one("body");var C="onTimePerformance";var M;if(E.otpDialog){E.otpDialog.hide();E.otpDialog.destroy()}var G=sabre.config.satConfiguration.onTimePerformanceConfiguration;var N="_onTimePerformanceOverlay";var D=G.width;var Q=G.height;var O=P();var F={visible:false,draggable:false,zIndex:520,close:true,fixedcenter:true};if(G.displayInNewWindow){window.open(O,"FlightPerformance","width="+D+", height="+Q)}else{var J={link:O,width:D,height:Q};var I=E.component.getPartial(N,J);H.append(I);M=new YAHOO.widget.Dialog(C,F);var K=true;M.showEvent.subscribe(function(){B.one(this.element).translate();B.on(C+"|click",function(U){if(K){K=false}else{var T=U.target;if(!T.inRegion(M.element,true)){M.hide()}}},document)});M.hideEvent.subscribe(function(){B.detach(C+"|click");K=true});M.render(document.body);E.otpDialog=M}function P(){var V=B.DataType.Date.parse(R.departureDate);var T={flightNumber:R.flightNumber[0],origin:R.departureCode,destination:R.arrivalCode,departureDate:S(V,G.dateFormat),departureTime:S(V,G.timeFormat)};var U=B.decodeHtmlEntities(G.url);return E.component.replaceData(T,U)}function S(T,U){return B.DataType.Date.format(T,{format:U})||null}L.show=function(){M.show()}};B.widgets=B.widgets||{};B.widgets.OnTimePerformanceWidget=A},"1.0.0",{requires:[]});YUI.add("wl-flc",function(A){A.components.Flc=function(Ac){var p=this;var U={};var N=[];var A4=false;var L=false;var Al=true;var BA=Ac.compInstConfig;var AB="__advanced_collapsed_leg";var V="__advanced_active_leg";var d="__advanced_unbundled_upgrade";var q="__advanced_price_per_person";var w={TIMEOUT:"timeout",INVALID_PASSENGER_TYPE:"invalidPassengerType",TOO_MANY_PASSENGER_TYPES:"tooManyPassengerTypes",NO_FLIGHTS_AVAILABLE:"noFlightsAvailable",NO_FLIGHTS_AVAILABLE_OVERLAY:"noFlightsAvailableOverlay",NO_FLIGHTS_AVAILABLE_OVERLAY_OUTBOUND:"noFlightsAvailableOverlayOutbound",NO_FLIGHTS_AVAILABLE_OVERLAY_INBOUND:"noFlightsAvailableOverlayInbound"};var AZ={NO_FLIGHTS_AVAILABLE:"noFlightsAvailableRbe",NO_FLIGHTS_AVAILABLE_OVERLAY:"noFlightsAvailableOverlayRbe",NO_FLIGHTS_AVAILABLE_OVERLAY_OUTBOUND:"noFlightsAvailableOverlayOutboundRbe",NO_FLIGHTS_AVAILABLE_OVERLAY_INBOUND:"noFlightsAvailableOverlayInboundRbe"};Ac.state=Ac.initData.dynamicState||"oneway";var AF,s;Ap();S();var X,H,Av,AG,A1,I,P,y,An,v,o,AK;var Au;p.onCreate=function(){p.setInitData(Ac.initData);if(Ad()){Ac.state="exchange"}k(Ac,p.node,function(){E();Ar()});W(Ac.initData.discountApplied);AY()};function BE(BF){if(!BF){return }if(Y(BF)){return }BF.updateDataTableFromSelectedBasketHash()}p.onRenderState={async:function(){},oneway:function(){AR();AN();Ai();AT();Am()},multicity:function(){AT();Am();AN()},bundled:function(){AR();AN();AT();Am();AN()},unbundled:function(){AR();AN();Ai();AT();Am()},exchange:function(){AR();Ai();AT();Am()},lazy:function(){AT();AN();Am()}};function AU(){if(Ac.state==="lazy"&&U[1]){delete U[1]}}function Ad(){return Ac.initData.advancedModel&&Ac.initData.changedItineraries&&Ac.initData.changedItineraries.length==1}p.incomingEvents={refresh_list:function(BG){if(X.dynamicState==="unbundled"||X.dynamicState==="oneway"){var BF=BG.data.direction;U[Ax(BF)].refreshFlightList(BG)}else{p.hideProgressOnSelectFlights()}Ar()},reset_selection:function(BF){AU();u(A5);Aa();Ar()},refresh_lazy_flc:function(BF){var BG=BF.data.selectedHashRefs;f(BG);Ar()},"ff-logged-in":function(BG){Al=false;L=BG.data&&BG.data.forceRedemptionFaresReload;var BF=BG.data&&BG.data.enoughMilesForSelectedOffers;if(L){K(true,BF)}L=true;p.fireEvent("unblock_submit",{type:"login"})},"logged-out":function(BF){if(Ac.initData.airSearchCriteria.awardBooking){p.fireEvent("block_submit",{type:"login"});if(L||Al){L=false;K(false);Ah(null)}}},"block-list":function(BF){p.showProgressOnSelectFlights()},refresh_search:function(BF){u(AH);A8();Ar()},change_lang:function(BF){u(Aj)},cart_cleared:function(BF){u(t)},checkSelectionDuplicates:function(BG){if(BG.selectCallback&&BG.selectedBasketRefs){var BF={data:{selectedHashRefs:BG.selectedBasketRefs},on:{success:function(BJ,BI){var BH=BI.selectedHashRefs?BI.selectedHashRefs:BG.selectedBasketRefs;p.fireEvent("select_callback",{selectCallback:BG.selectCallback,selectedHashRefs:BH})}}};p.fireEvent("to-ajax",{cfg:BF,actionCode:"checkSelectedDuplicates"})}}};function Ax(BF){if(isNaN(BF)){if(BF==="outbounds"||BF==="both"||BF==="oneway"){return 0}else{if(Ac.state==="exchange"&&!v&&!Ac.initData.retainInbound&&BF==="inbounds"){return 0}else{return 1}}}else{return BF}}p.on("widget-rendered",function(BG){U[Ax(BG)].rendered=true;var BF=true;for(var BH in U){if(!U[BH].rendered){BF=false}}if(BF){u(BE);p.getDomEvents()}});function AY(){A.on("pageHtmlLoaded",function(){p.node.all(".enable-when-pageHtmlLoaded").each(function(BF){BF.set("disabled","")})})}function Ap(){var BF=365;var BH=new Date(sabre.config.global.currentTimeInMillis);BH=BH.getTime()-(BH.getTime()%(1000*60*60*24))+1000*60*BH.getTimezoneOffset();AF=A.DataType.Date.parse(BH);var BG=new Date(sabre.config.global.currentTimeInMillis);BG=BG.getTime()-(BG.getTime()%(1000*60*60*24));BG=A.DataType.Date.parse(BG);BG=BG.setDate(BG.getDate()+BF);s=A.DataType.Date.parse(BG)}p.setInitData=function(BF){Ac.initData=BF;X=BF;v=X.advancedModel;if(Ad()){An=1}else{An=X.airSearchCriteria.itineraryAirportPairs.length}if(v){AK=X.dynamicModeEnabled;o=Ac.state==="bundled";if(o){Av=X.calendarPrices||[];H=[];P=X.offers||[];y=[]}else{if(An>2||X.multicity||X.calendarPrices==null){H=[];Av=[];P=[];y=[]}else{H=X.calendarPrices[1]||[];Av=X.calendarPrices[0]||[];y=X.offers[1]||[];P=X.offers[0]||[]}}}else{H=X.inboundCalendarPrices||[];Av=X.outboundCalendarPrices||[];o=!(H.length&&Av.length);P=X.outbounds||[];y=X.inbounds||[]}AG=X.offers||[];A1=X.flightExchanged;I=X.invalidPassengerType};function Am(){p.node.all(".filter_sort").on("change",A9);p.node.all(".filter-checkbox").on("click",e);if(!A4){A.delegate("click",Az,null,".amenties-filter",A);A4=true}}function AW(BG){var BF=p.node.one("#dtcontainer-"+BG);if(BF==null&&Ac.state=="oneway"){return p.node.one("#dtcontainer-both")}else{return BF}}function A9(BL){BL.stopImmediatePropagation();var BM=BL.currentTarget.get("value");var BK=BL.currentTarget.ancestor(".filter-options").getAttribute("flight-index");var BF=Ax(BK);var BH=AW(BK);BH.addClass("loading");var BJ=AE(Ac.state,BK);var BI=null;if(U.bundled&&U.bundled.getSelectedHashRef()){BI=[U.bundled.getSelectedHashRef()]}var BG={data:{direction:BK,flightIndex:BF,sortOption:BM,requestPartials:[BJ],basketHashRefs:BI},on:{end:function(){BH.removeClass("loading")},success:function(BO,BN){AM(BF,BN,BJ)}}};p.fireEvent("to-ajax",{cfg:BG,actionCode:"sortFlights"})}function A2(BK){var BM=A.one("#amenities-"+BK);var BJ=BM.ancestor(".filter-options");var BL="overlayed_"+BM.get("id");BM.set("id",BL);var BI=BJ.getAttribute("flight-index");BM.append('<span class="amenity-filter-direction hidden">'+BI+"</span>");var BF=BK+"_dialog";var BH=new YAHOO.widget.Dialog(BF,{visible:false,draggable:false,zIndex:500,close:false});var BG=true;BH.showEvent.subscribe(function(BN){A.one(this.element).translate();A.on(BF+"|click",function(BO){if(BG){BG=false}else{if(BO.target.hasClass("btn-popup")){BH.hide()}}},document)});BH.hideEvent.subscribe(function(){A.detach(BF+"|click");BG=true});BM.remove();BM.removeClass("hidden");BH.setBody(BM._node);N[BK]=BH;BH.render(document.body);A.delegate("mouseleave",AX,null,"#"+BF,A);BM.all(".filter-amenities").on("click",Ay);return A.one("#"+BF)}function Az(BF){BF.preventDefault();var BG=BF.target.get("id");var BG=BG.substring(7);if(!N[BG]||!N[BG].showing){B(BF)}else{Ae(BF)}}function B(BF){BF.preventDefault();var BG=BF.target.get("id");var BG=BG.substring(7);if(!N[BG]){A2(BG)}var BH=N[BG];BH.cfg.setProperty("context",[BF.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[0,0]]);BH.show();BH.showing=true}function Ae(BF){BF.preventDefault();var BG=BF.target.get("id");var BG=BG.substring(7);if(N[BG]){N[BG].hide();N[BG].showing=false}}function AX(BG){BG.preventDefault();for(var BF in N){N[BF].hide();N[BF].showing=false}}function Ay(BH){BH.stopImmediatePropagation();var BL=BH.target.get("value");var BM=BH.target.get("checked");var BJ=BH.target.ancestor(".amenties-list");var BK=BJ.one(".amenity-filter-direction").get("text");var BO=Ax(BK);var BF=AW(BK);BF.addClass("loading");var BN=AE(Ac.state,BK);var BI=null;if(U.bundled&&U.bundled.getSelectedHashRef()){BI=[U.bundled.getSelectedHashRef()]}var BG={data:{direction:BK,flightIndex:BO,amenity:BL,amenityChecked:BM,requestPartials:[BN],basketHashRefs:BI},on:{end:function(){BF.removeClass("loading")},success:function(BQ,BP){AM(BO,BP,BN)}}};p.fireEvent("to-ajax",{cfg:BG,actionCode:"amenitiesFilter"})}function e(BM){BM.stopImmediatePropagation();var BL=BM.currentTarget.ancestor(".filter-options");var BK=BL.getAttribute("flight-index");var BF=Ax(BK);var BH=AW(BK);var BJ=AE(Ac.state,BK);var BI=null;if(U.bundled&&U.bundled.getSelectedHashRef()){BI=[U.bundled.getSelectedHashRef()]}var BG={data:{direction:BK,flightIndex:BF,nonStop:BM.target.get("checked"),requestPartials:[BJ],basketHashRefs:BI},on:{end:function(){},success:function(BO,BN){AM(BF,BN,BJ)}}};p.fireEvent("to-ajax",{cfg:BG,actionCode:"filterChanged"})}function f(BF){Au=BF.length;D(p.node,Au,X.offers,BF);u(z)}function A5(BF){BF.resetSelection()}function AJ(BG,BF){p.fireEvent("render_retained",{data:{node:BG,label:BF}})}function Ar(){var BF=sabre.config.satConfiguration.frequentFlyer.loyaltyProviderString=="CONVERSION_LOGIC";if(BF&&X.awardBooking&&!X.conversionRatesFound){p.fireEvent("add-messages",{data:{messages:[{id:"noConversionRatesFound",level:"warn"}]}});p.fireEvent("modify_search",{forceInitialize:true})}else{p.fireEvent("remove-messages",{data:{messages:["noConversionRatesFound"]}})}}function W(BF){if(BF){O();if(!Ao()){p.fireEvent("add-messages",{data:{messages:[{id:"promocodeNotValid",code:"",level:"warn"}]}})}}}function O(){p.fireEvent("remove-messages",{data:{messages:["promocodeNotValid"]}})}function Ao(){var BK=P==null||P.length==0;var BH=!BK&&AS(P);var BG=y==null||y.length==0;var BJ=!BG&&AS(y);var BI=BK&&BG;var BF=BH||BJ;return BI||BF}function AS(BH){for(var BF=0;BF<BH.length;BF++){for(var BG in BH[BF].basketsRef){if(BH[BF].basketsRef[BG].discountApplied){return true}}}return false}function S(){if(!Ac.initData.airSearchCriteria.awardBooking){Ah(null)}}function Ah(BG){var BF=["ffFlightsUnavailable","ffSomeFlightsUnavailable","ffSelectedFlightsUnavailable"];p.fireEvent("remove-messages",{data:{messages:BF}});if(null!==BG&&-1!==A.Array.indexOf(BF,BG.id)){p.fireEvent("add-messages",{data:{messages:[BG]}})}}function AV(BH,BI,BF,BG){if(asyncExec.containsTimeoutError()){AP();l(AD("TIMEOUT"))}else{if(BG.errorUrl){window.location.href=A.decodeHtmlEntities(BG.errorUrl)}else{if(BG.model){p.setInitData(BG.model);BH.state=BH.initData.dynamicState||"oneway";k(BH,BI,BF);Ah(BG.insufficientMilesMessage)}}}}function AP(){p.getDomEvents()}function k(BG,BH,BF){switch(BG.state){case"async":if(asyncExec.results){AV(BG,BH,BF,asyncExec.results)}else{asyncExec.callback=function(BI){AV(BG,BH,BF,BI)}}break;case"exchange":A.use("wl-select-flights-datatable",function(BO){if(v){p.flightList=new BO.WlFlightList.AdvancedUnbundled(BG,p);var BI=BH.get("parentNode");var BP=BO.Node.create('<div id="retained-leg"></div>');if(BG.initData.retainInbound){var BK=new BO.WlSelectFlights(BG,BH,"0",p,{isFlightExchanged:A1,advancedShopping:v});U[0]=BK;BK.setFirstActiveDate(AF);var BM=BG.initData.offers[1][0].parts[0];if(BM&&BM.segments[0]){var BN=BO.DataType.Date.parse(BM.segments[0].departureDate);BK.setLastActiveDate(BN)}BI.append(BP);AJ(BP,"retained.inbound");U[0].renderHtml(BG.initData)}else{BI.prepend(BP);AJ(BP,"retained.outbound");var BM=BG.initData.offers[0][0].parts[0];var BL=BO.DataType.Date.parse(BM.segments[0].departureDate);BK=new BO.WlSelectFlights(BG,BH,"1",p,{isFlightExchanged:A1,advancedShopping:v});U[1]=BK;var BJ=(BL<AF)?AF:BL;BK.setFirstActiveDate(BJ);BK.setLastActiveDate(s);U[1].renderHtml(BG.initData)}}else{p.flightList=new BO.WlFlightList(BG,p);var BI=BH.get("parentNode");var BP=BO.Node.create('<div id="retained-leg"></div>');if(BG.initData.retainInbound){BK=new BO.WlSelectFlights(BG,BH,"outbounds",p,{isFlightExchanged:A1});U[0]=BK;BK.setFirstActiveDate(AF);if(BG.initData.inbounds[0]&&BG.initData.inbounds[0].segments[0]){var BN=BO.DataType.Date.parse(BG.initData.inbounds[0].segments[0].departureDate);BK.setLastActiveDate(BN)}BI.append(BP);AJ(BP,"retained.inbound")}else{BI.prepend(BP);AJ(BP,"retained.outbound");var BL=BO.DataType.Date.parse(BG.initData.outbounds[0].segments[0].departureDate);BK=new BO.WlSelectFlights(BG,BH,"inbounds",p,{isFlightExchanged:A1});U[0]=BK;var BJ=(BL<AF)?AF:BL;BK.setFirstActiveDate(BJ);BK.setLastActiveDate(s)}BF();BK.renderHtml(BG.initData)}});break;case"unbundled":if(v){if(AK){A.use("wl-select-flights-datatable-dynamic",function(BI){p.flightList=new BI.WlFlightList.AdvancedUnbundledDynamic(BG,p);BB(false,false);BF();BH.delegate("click",Aw,"a.flightListFareRulesLink")})}else{A.use("wl-select-flights-datatable-advanced",function(BM){p.flightList=new BM.WlFlightList.AdvancedUnbundled(BG,p);var BJ=new BM.WlSelectFlights(BG,BH,"0",p,{isFlightExchanged:A1,advancedShopping:v});if(An>1){var BL=BM.DataType.Date.parse(BG.initData.airSearchCriteria.inboundDate)}else{var BL=s}BJ.setLastActiveDate(BL);BJ.setFirstActiveDate(AF);U[0]=BJ;if(An==2){var BI=new BM.WlSelectFlights(BG,BH,"1",p,{isFlightExchanged:A1,advancedShopping:v});var BK=BM.DataType.Date.parse(BG.initData.airSearchCriteria.outboundDate);BI.setFirstActiveDate(BK);BI.setLastActiveDate(s);U[1]=BI}BF();U[0].renderHtml(BG.initData);if(An==2){U[1].renderHtml(BG.initData)}})}}else{A.use("wl-select-flights-datatable",function(BL){p.flightList=new BL.WlFlightList(BG,p);var BI=new BL.WlSelectFlights(BG,BH,"outbounds",p,{isFlightExchanged:A1,advancedShopping:v});var BM=new BL.WlSelectFlights(BG,BH,"inbounds",p,{isFlightExchanged:A1,advancedShopping:v});U[0]=BI;U[1]=BM;var BK=BL.DataType.Date.parse(BG.initData.airSearchCriteria.inboundDate);U[0].setLastActiveDate(BK);var BJ=BL.DataType.Date.parse(BG.initData.airSearchCriteria.outboundDate);U[1].setFirstActiveDate(BJ);U[0].setFirstActiveDate(AF);U[1].setLastActiveDate(s);BF();U[0].renderHtml(BG.initData);U[1].renderHtml(BG.initData)})}break;case"multicity":case"bundled":A.use("wl-select-flights-datatable-multicity",function(BJ){BH.addClass("flights-multi");p.flightList=new BJ.WlFlightList.Bundled(BG,p,BG.state);var BI=new BJ.WlSelectFlights(BG,BH,BG.state,p,{isFlightExchanged:A1,advancedShopping:v});U[BG.state]=BI;BF();U[BG.state].renderHtml(BG.initData)});break;case"lazy":A.use("wl-select-flights-datatable-lazy",function(BI){BH.addClass("flights-lazy");p.flightList=new BI.WlFlightList.Lazy(BG,p,"lazy");Aq(BG.initData.selectedParts,BH);BF()});break;default:A.use("wl-select-flights-datatable",function(BJ){if(v){p.flightList=new BJ.WlFlightList.AdvancedUnbundled(BG,p);var BI=new BJ.WlSelectFlights(BG,BH,"0",p,{isFlightExchanged:A1,advancedShopping:v});U[0]=BI;BF();U[0].renderHtml(BG.initData)}else{p.flightList=new BJ.WlFlightList(BG,p);var BI=new BJ.WlSelectFlights(BG,BH,"both",p,{isFlightExchanged:A1});U[0]=BI;BF();U[0].renderHtml(BG.initData)}});break}if(Ag()){p.fireEvent("itinerary-selected",{isFlightSelected:true})}}function Aq(BG,BF){A.use("wl-select-flights-datatable-lazy",function(BI){var BH;for(BH=0;BH<=An;BH++){Au=BH;if(Au==0||BG[Au]){D(BF,BH,Ac.initData.offers,BG)}}})}function D(BI,BH,BG,BJ){var BF=BJ.slice(0,BH);U[BH]=new A.WlSelectFlights(Ac,BI,"lazy"+BH,p,{isFlightExchanged:A1,lazyStep:BH,hashCodesPath:BF});p.renderLazySelectFlights(BH,BG)}p.renderLazySelectFlights=function(BG,BF){U[BG].renderHtml(BF[BG]||[])};function AR(){u(n);Ai()}function AN(){u(Af)}p.showProgressOnSelectFlights=function(BF){if(!A.Lang.isUndefined(BF)&&!A.Lang.isUndefined(U[BF])){AH(U[BF])}else{u(AH)}};p.hideProgressOnSelectFlights=function(BF){if(BF&&U[BF]){z(U[BF])}else{u(z)}};p.unblockSubmitIfFlightsSelected=function(){AT()};p.flightWasSelected=function(BJ,BF,BG){var BI=Ac.state==="unbundled"?"send_value_unb":"send_value";var BH={tripType:X.dynamicState,direction:BJ,itinerary:BF,selectedBasketRefs:BG,advancedShopping:v,duplicateExists:v&&X.duplicateDetected};BC();p.fireEvent(BI,{data:BH});p.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})};p.getValidBasketRefs=function(BG){if(!Ac.initData.flightExchanged||Ac.state==="unbundled"){var BH,BI,BF;if(BG=="outbounds"){BH=U[1].getSelectedHashRef();BI=Ac.initData.brandedInOutMappings}else{if(BG=="inbounds"){BH=U[0].getSelectedHashRef();BI=Ac.initData.brandedOutInMappings}}if(BH){BF=BI[BH]}return BF}};function n(BF){var BG=A3(Ac.initData);if(BF&&BA.brandedDescriptionEnabled){BF.getNode().all("th.price").each(function(BI){var BH=A.Event.getListeners(BI);var BJ=p.rendered?A6(BF.getStoredColumnKey(BI),BG):A6(BF.getColumnKeyByHeader(BI),BG);if(!BH&&BJ&&((BJ.marketingTexts&&BJ.marketingTexts.length>0)||(BJ.brandAncillaries&&BJ.brandAncillaries.flightAncillaryTOs&&BJ.brandAncillaries.flightAncillaryTOs.length>0)||(BA.contentFromUrl&&BJ.brandLabel&&A.Lang.isArray(BJ.brandLabel)&&BJ.brandLabel.length>0))){if(BA.brandedHoveringEnabled){A.on("marketingMessage|mouseover",BF.showMarketingTextOverlayWithDelay,BI,null,BJ,"hover");A.on("marketingMessage|mouseout",BF.hideMarketingTextOverlayIfNotInOverlayRegion,BI)}else{if(BA.brandedClickingEnabled){A.on("marketingMessage|click",BF.showMarketingTextOverlay,BI,null,BJ,"click")}}}})}}function Af(BF){var BG=BF.getNode();BG.delegate("mouseover",BF.showFareIndicatorTextOverlay,".fare-indicator-row");BG.delegate("mouseout",BF.hideFareIndicatorTextOverlay,".fare-indicator-row")}function A3(BF){var BG=[];if(BF.advancedModel&&BF.dynamicState=="bundled"){j(BG,BF.fareFamilies)}else{j(BG,BF.outboundsFareFamilies);j(BG,BF.inboundsFareFamilies)}return BG}function j(BG,BJ){var BF;if(BJ){for(BF in BJ){var BI=BJ[BF].brandId;var BH=A6(BI,BG)!=null;if(!BH){BG.push(BJ[BF])}}}}function A6(BH,BG){var BF;for(BF in BG){if(BG[BF].brandId===BH){return BG[BF]}}return null}function Aj(BF){BF.translateBrands()}function AH(BF){BF.showProgress()}function z(BF){BF.hideProgress()}function Ak(BF){BF.disablePrev7AndNext7Buttons()}function AQ(){var BG;var BF;if(Ac.state==="unbundled"){BG=U[0].getCurrentDate();if(An==2&&U[1]!==undefined){BF=U[1].getCurrentDate()}else{BF=A.DataType.Date.parse(Ac.initData.airSearchCriteria.inboundDate)}}else{if(Ac.state==="exchange"){if(v){if(Ac.initData.retainInbound){BG=U[0].getCurrentDate();BF=A.DataType.Date.parse(Ac.initData.offers[1][0].parts[0].segments[0].departureDate)}else{BG=U[1].getCurrentDate()}}else{BG=U[0].getCurrentDate();if(Ac.initData.retainInbound){BF=A.DataType.Date.parse(Ac.initData.inbounds[0].segments[0].departureDate)}else{BF=A.DataType.Date.parse(Ac.initData.outbounds[0].segments[0].departureDate)}}}else{if(Ac.state==="bundled"){BG=U[Ac.state].getCurrentDate();BF=U[Ac.state].getCurrentDateInbound()}else{BG=U[0].getCurrentDate();BF=null}}}return{departureDate:b(BG),returnDate:b(BF)}}function R(BJ){var BI=AQ();var BH=At(Ac.state);var BG=function(BP,BK){p.setInitData(BK.model);if(Ac.initData.airSearchCriteria.journey==="ROUND_TRIP"){if(v){if(Ac.state==="unbundled"){if(U[1]!==undefined){var BN=U[1].getCurrentDate();U[1].setFirstActiveDate(U[0].getCurrentDate())}else{var BN=A.DataType.Date.parse(Ac.initData.airSearchCriteria.inboundDate)}U[0].setLastActiveDate(BN)}else{if(Ac.state==="exchange"){if(Ac.initData.retainInbound){var BO=Ac.initData.offers[1][0].parts[0];if(BO&&BO.segments[0]){var BQ=A.DataType.Date.parse(BO.segments[0].departureDate);U[0].setLastActiveDate(BQ)}}else{var BO=Ac.initData.offers[0][0].parts[0];var BM=A.DataType.Date.parse(BO.segments[0].departureDate);var BL=(BM<AF)?AF:BM;U[1].setFirstActiveDate(BL);U[1].setLastActiveDate(s)}}}}else{if(!Ac.initData.flightExchanged||Ac.state==="unbundled"){U[0].setLastActiveDate(U[1].getCurrentDate());U[1].setFirstActiveDate(U[0].getCurrentDate())}}}E();BD(BK,BH);a();p.translateTemplate(Ac,p.node);F(BI);Ah(BK.insufficientMilesMessage);W(Ac.initData.discountApplied);if(!AK){p.fireEvent("search_refreshed")}};var BF=C(AI(),BJ);Ab(BI,BF,BG,BH)}p.handleDatesPeriodChange=function(BF){a();u(AH);u(Ak);R(BF)};function b(BF){return A.DataType.Date.format(BF,{format:sabre.config.dateTimeJSONFormat})||null}function t(BG){if(BG){var BH=Y(BG);var BF=AL(BG);if(BH&&BF){BG.reselectFlights(BH,BF)}}}function C(BF,BH){var BG=Ax(BH);BF[BG]=null;return BF}function At(BG){if(v){var BF="__advanced_"+BG}else{var BF="__"+BG}return BF}function AE(BH,BG){if(v){if(AK){var BF="__advanced_active_leg"}else{var BF="__advanced_"+BH}}else{var BF="__"+BH;if(BH=="lazy"){if(BG=="inbounds"){BF="__lazyViewWrapperInbounds"}else{BF="__lazyViewWrapperOutbound"}}}return BF}function AM(BK,BH,BI){Ac.initData=BH.model;p.setInitData(Ac.initData);var BJ=BH.partials;if(BJ){var BG=BJ[BI];if(Ac.state==="lazy"){var BF=p.node.one("#lazy"+(BK));if(BF){BF.set("innerHTML",A.decodeHtmlEntities(BG))}p.renderLazySelectFlights(BK,BH.model.offers)}else{if(v&&AK){A7(BH,[BI],[BK],["flight_"+BK])}else{BD(BH,BI)}}}}function BB(BH,BJ){a();Z();var BG=0;var BI=-1;A.all(".flight-list-container").each(function(BK){var BM=BK.getAttribute("leg-state");if(BM==="collapsed"){BI++}var BL=x(BG,{state:BM,donotRefresh:false,upgradeOption:false});BL.renderHtml(Ac.initData);BG++});p.showProgressOnSelectFlights();if(BI>=0){var BF={upgradeOption:BJ};if(!BH){BF=A.merge(BF,{donotRefresh:true})}U[BI].updateOptions(BF);r(BI);if(AC()){p.showSubmit();p.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}}else{p.hideProgressOnSelectFlights()}}function BD(BF,BG){BG=BG||AE(Ac.state);p.node.purge(true);p.node.setContent(A.decodeHtmlEntities(BF.partials[BG]));if(v&&AK){BB(false,false)}else{u(function(BH){BH.renderHtml(Ac.initData)});p.hideProgressOnSelectFlights()}}function Ab(BJ,BG,BI,BH){var BF={data:{basketHashRefs:BG,departureDate:BJ.departureDate,returnDate:BJ.returnDate,requestPartials:[BH]},on:{success:BI,end:function(){p.hideProgressOnSelectFlights()}}};p.fireEvent("to-ajax",{cfg:BF,actionCode:"dateChanged"})}function F(BH){var BG=Ac.initData.airSearchCriteria.itineraryAirportPairs;var BI=[];for(var BF=0;BF<BG.length;BF++){BI.push({departureAirport:BG[BF].departureCode,arrivalAirport:BG[BF].arrivalCode,date:BF===0?BH.departureDate:BH.returnDate})}p.fireEvent("update-data",{data:{itineraryParts:BI}})}function K(BI,BG){a();var BH="initialized";var BF={data:{requestPartials:[BH]},on:{complete:function(){u(z);G()},success:function(BK,BJ){AU();m(BJ,BH);E();if(!BG){u(A5)}p.fireEvent("search_refreshed");p.fireEvent("block_submit",{type:"flc"})}}};u(AH);p.fireEvent("to-ajax",{cfg:BF,actionCode:"updateRedemptionFares"})}function G(){var BF=A.one("#flow-message-ffNotLoggedIn");if(BF){BF.removeClass("hidden")}}function A8(){a();var BG="__"+Ac.state;var BF={data:{requestPartials:[BG]},on:{complete:function(){p.hideProgressOnSelectFlights()},success:function(BI,BH){m(BH,BG);E();u(AT);p.fireEvent("search_refreshed")}}};p.fireEvent("to-ajax",{cfg:BF,actionCode:"refreshSearch"})}function Aw(BF){BF.preventDefault();p.fireEvent("show_rules")}function T(){p.fireEvent("hide-sbmt",{forceInitialize:true})}function a(){p.fireEvent("block_submit")}function AT(){if(AC()){BC()}}function As(){if(X.selectedHashRefs&&X.selectedHashRefs.length===An){var BF=true;A.Object.each(X.selectedHashRefs,function(BG){if(A.Lang.isUndefined(BG)){BF=false}});return BF}return false}function Ag(){var BF=false;A.Object.each(U,function(BG){if(Y(BG)){BF=true}});return BF}function AC(){if(AK){return As()}else{var BF=true;A.Object.each(U,function(BG){if(!Y(BG)){BF=false}});return BF}}function Y(BF){return BF.getSelectedHashRef()}function AL(BF){return BF.getSelectedBasketPrice()}function BC(){p.fireEvent("unblock_submit",{data:{},forceInitialize:true})}function E(){if(AO()||A0()){return }var BG=(H&&H.length)||false;var BJ=(Av&&Av.length)||false;var BI=P.length;var BK=y.length;switch(Ac.state){case"unbundled":if(v){var BH=false;for(var BF in X.offers){if(X.offers.hasOwnProperty(BF)&&!X.offers[BF]||X.offers[BF].length===0){BH=true}}if(BH){l(AD("NO_FLIGHTS_AVAILABLE_OVERLAY"));p.fireEvent("add-messages",{data:{messages:[{id:AD("NO_FLIGHTS_AVAILABLE"),code:"",level:"error"}]}})}else{p.fireEvent("remove-messages",{data:{messages:[AD("NO_FLIGHTS_AVAILABLE")]}})}}else{if(!(BI&&BK)){if(!BG&&!BJ){l(AD("NO_FLIGHTS_AVAILABLE_OVERLAY"))}else{if(BG&&!BJ){l(AD("NO_FLIGHTS_AVAILABLE_OVERLAY_OUTBOUND"))}else{if(!BG&&BJ){l(AD("NO_FLIGHTS_AVAILABLE_OVERLAY_INBOUND"))}}}}else{if(!(BG&&BJ)){u(AA)}}}break;case"lazy":case"multicity":case"bundled":if(!AG.length){l(AD("NO_FLIGHTS_AVAILABLE_OVERLAY"));a()}break;case"oneway":if(!BI&&!BJ){l(AD("NO_FLIGHTS_AVAILABLE_OVERLAY"))}else{if(!BJ){u(AA)}}break}}function u(BF){var BG=Array.prototype.slice.call(arguments,1);A.Object.each(U,function(BH){BF.apply(BH,[BH].concat(BG))})}function AA(BF){BF.hideAlternateDates()}function Ai(){if((!o&&!AK&&(H.length==0||Av.length==0))||(o&&(Av.length==0&&H.length==0))){a()}}function AO(){if(I){l(AD("INVALID_PASSENGER_TYPE"));return true}return false}function A0(){if(Ac.initData.tooManyPassengerTypes){l(AD("TOO_MANY_PASSENGER_TYPES"));return true}return false}function l(BF){p.fireEvent("modify_search",{errorMessage:BF,forceInitialize:true})}function AD(BG){var BF;if(Ac.initData.awardBooking&&AZ[BG]!=null){BF=AZ[BG]}else{BF=w[BG]}return BF}function AI(){var BF=[];if(Ad()){if(Ac.initData.changedItineraries[0]==0){BF.push(U[0].getSelectedHashRef(),null)}else{if(Ac.initData.changedItineraries[0]==1){BF.push(null,U[1].getSelectedHashRef())}}}else{for(var BG in U){BF.push(U[BG].getSelectedHashRef())}}return BF}function m(BH,BF){p.setInitData(BH.model);var BG=BH.partials;if(BG){Ac.state=Ac.initData.dynamicState||"oneway";BD(BH,BF)}}var M=function(BI){var BH=AI();p.fireEvent("itinerary-selected",{basketHashRefs:BH,isFlightSelected:true});var BG=[];if(BI.partials){if(A.Lang.isArray(BI.partials)){BG=BI.partials}else{BG=[BI.partials]}}var BF={data:{basketHashRefs:BH,requestPartials:BG,direction:BI.selectedDirection,flightIndex:isNaN(BI.selectedDirection)?-1:parseInt(BI.selectedDirection,10)},on:{success:function(BK,BJ){if(A.Lang.isFunction(BI.successCallback)){BI.successCallback(BJ,BI.partials,BI.reloadDirections,BI.nodesId,BI.selectedDirection)}Ah(BJ.insufficientMilesMessage)}}};p.fireEvent("to-ajax",{cfg:BF,actionCode:"itineraryPartSelected"})};var h=function(BK,BJ,BI,BL){var BH=AI();var BF=Ag();p.fireEvent("itinerary-selected",{basketHashRefs:BH,isFlightSelected:BF});var BG={data:{basketHashRefs:BH,requestPartials:BK?[BK]:[],direction:BI,flightIndex:isNaN(BI)?-1:parseInt(BI)},on:{success:function(BN,BM){BJ(BM,[BK],[BI],[BL]);Ah(BM.insufficientMilesMessage)}}};p.fireEvent("to-ajax",{cfg:BG,actionCode:"dynamicFlightChanged"})};p.refreshPricePerPerson=function(){var BF=function(BH){var BG=A.one("> .flight-list-container:last-of-type");BG.append(A.Node.create(A.decodeHtmlEntities(BH.partials[q])));p.hideProgressOnSelectFlights()};Q(BF)};var Q=function(BG){var BF={data:{requestPartials:[q]},on:{success:function(BI,BH){BG(BH)}}};p.fireEvent("to-ajax",{cfg:BF,actionCode:"getPricePerPerson"})};function Aa(){var BF=At(Ac.state);if(v&&AK){h(BF,m,0)}else{M({partials:BF,successCallback:m})}}p.itinerarySelectedReloadLeg=function(BI,BH,BG,BF){M({partials:A.Lang.isArray(BF)?BF:[BF],successCallback:A7,reloadDirections:A.Lang.isArray(BH)?BH:[BH],selectedDirection:BG,nodesId:A.Lang.isArray(BI)?BI:[BI]})};p.showSubmit=function(){p.fireEvent("show-sbmt")};p.itinerarySelectedNoLegReload=function(BG){var BF=function(BH){p.hideProgressOnSelectFlights();if(AC()){p.showSubmit();p.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}};M({successCallback:BF,selectedDirections:BG})};var A7=function(BN,BI,BH,BT,BK){p.setInitData(BN.model);var BP=BN.partials;if(BP){for(var BM=0;BM<BI.length;++BM){var BQ=BP[BI[BM]];var BJ=BT[BM];var BS=BH[BM];if(v&&A.Lang.isArray(BJ)){var BO=BS[BS.length-1];var BG=A.one("#"+BJ[BO]);var BU=BG.next(".flight-list-container");for(var BL=0;BL<BS.length;BL++){U[Ax(BS[BL])].destroy(true)}if(BU){p.node.insertBefore(A.Node.create(A.decodeHtmlEntities(BQ)),BU)}else{p.node.append(A.Node.create(A.decodeHtmlEntities(BQ)))}for(var BL=0;BL<BS.length;BL++){var BR=U[Ax(BS[BL])];BR.updateDataTableFromSelectedBasketHash();BR.recreateEvents(Ac.initData)}}else{var BF=p.node.one("#"+BJ);if(BF){BF.set("innerHTML",A.decodeHtmlEntities(BQ));U[Ax(BS)].recreateEvents(Ac.initData)}else{BF=A.Node.create('<div id="'+BJ+'" class="flight-list-container"/>');p.node.append(BF);BF.set("innerHTML",A.decodeHtmlEntities(BQ));var BR=x(BS,{state:"active",donotRefresh:false,upgradeOption:false});BR.renderHtml(Ac.initData)}}}p.fireEvent("cart_size_change");p.hideProgressOnSelectFlights()}};var J=function(BF,BG){p.showProgressOnSelectFlights();p.setInitData(BF.model);var BH=BF.partials;if(BH){Ac.state=Ac.initData.dynamicState||"oneway";BG=BG||AE(Ac.state);p.node.purge(true);p.node.setContent(A.decodeHtmlEntities(BF.partials[BG]));BB(true,true);E()}};function r(BI){var BG=AI();var BH=Ac.initData.selectedOffers;for(var BJ=0;BJ<BH.length;BJ++){var BF=BH[BJ];if(BF){var BK=Ac.initData.selectedFareFamilies[BJ];if(BK){BF=A.merge(BF,{fareFamily:BK.brandId,programId:g(BK)})}BF=A.merge(BF,{departureDate:BF.itineraryPartData.departureDate});BH[BJ]=BF}}p.fireEvent("upgrade_offers_advanced",{data:{flightIndex:BI,selectedBasketRefs:BG,itineraries:BH},forceInitialize:true})}function g(BF){if(BF.brandLabel[0]){return BF.brandLabel[0].programId}else{if(BF.marketingTexts[0]){return BF.marketingTexts[0].programId}}return }function x(BL,BH){var BK=A.merge(BH,{isFlightExchanged:A1,advancedShopping:v});var BJ=new A.WlSelectFlights(Ac,p.node,BL,p,BK);var BG=parseInt(Ax(BL));if(BG===0){var BI=AF}else{var BI=A.DataType.Date.parse(Ac.initData.airSearchCriteria.itineraryAirportPairs[BG-1].date)}BJ.setFirstActiveDate(BI);if(BG+1===An){var BF=s}else{var BF=A.DataType.Date.parse(Ac.initData.airSearchCriteria.itineraryAirportPairs[BG+1].date)}BJ.setLastActiveDate(BF);U[BG]=BJ;return BJ}p.showNextFlightAdvancedDynamic=function(BH){var BG=[],BJ=[],BI=[];BI.push(AB);BG.push("flight_"+BH);BJ.push(BH);if(BH+1===An){p.itinerarySelectedReloadLeg(BG,BJ,BH,BI);p.showSubmit()}else{var BF=parseInt(BH)+1;BG.push("flight_"+BF);BJ.push(BF);BI.push(V);p.itinerarySelectedReloadLeg(BG,BJ,BH,BI)}};p.upgradeReloadHtml=function(BG){var BF=d;M({partials:BF,successCallback:J,selectedDirection:BG})};p.rollbackNextFlightsAdvancedDynamic=function(BF){h("__advanced_active_leg",A7,BF,"flight_"+BF)};p.changeFlights=function(BH){if(AC()){a();T()}var BF=Ag();p.fireEvent("itinerary-selected",{isFlightSelected:BF});var BJ=c();for(var BI=BH;BI<BJ;BI++){U[BI].resetSelection();if(BI>BH){U[BI].destroy();delete U[BI]}}var BG=AI();p.fireEvent("update_offers_advanced",{data:{flightIndex:BH,selectedBasketRefs:BG,advancedShopping:v}});p.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})};function Z(){for(var BF in U){var BG=U[BF];BG.resetSelection();delete U[BF]}}function c(){var BG=0;for(var BF in U){BG++}return BG}}});YUI.add("wl-customhtml",function(A){A.components.Customhtml=function(B){}});YUI.add("forgotPassword",function(C){var R=function(U,T,S){U.preventDefault();L(T,S)};var G={NOT_AVAILABLE:"notAvailable"};var N;function L(T,Z){var V=T.component.node;var S=V.one(".username");var X="send";var a="label.login.forgotPasswordOverlayContinue";var U=null;var b="_forgotPasswordOverlayForm";var Y;var W="";if(Z){W=T.overrideUserLoginId}else{if(S){W=S.get("value")}}if(W==""){Y=T.getId()||T.initData.contextId;U={forgotPasswordError:"",contextId:Y};I(V,T,b,U,{buttonText:a,mode:X,contextId:Y},P)}else{E(W,V,T)}}function E(W,V,T){if(O(T.component.node)){return }I(V,T,"_loading");var U={overlayPartial:"_forgotPasswordOverlaySuccess",overlayData:null,buttonText:"label.login.close",buttonMode:"close"};var S={overlayPartial:"_forgotPasswordOverlayForm",overlayData:{forgotPasswordError:"label.login.usernameError",contextId:T.getId()},buttonText:"label.login.forgotPasswordOverlayContinue",buttonMode:"send"};M(V,T,W,U,S)}function O(S){return S.hasClass("loading")}function I(V,T,c,U,a,W){var Z=T.component;var e=A(T);var X=T.getId()||T.initData.contextId;var b="";if(c=="_forgotPasswordOverlaySuccess"){b=D()}else{if(c=="_forgotPasswordOverlayForm"){b=B(T,U.forgotPasswordError)}else{if(c=="_loading"){b=F()}}}var Y=a?K(X,a.mode,a.buttonText):"";var d=C.one(e.element);d.one(".overlay-content").set("innerHTML",b);d.one(".buttons").set("innerHTML",Y);if(C.Lang.isFunction(W)){W(V,T,d)}function S(){e.show()}Z.translateTemplate(T,C.one(e.element),S)}function M(X,V,Y,Z,U){var W=V.component;var T=function(c,b){Z=U;if(!c){Z.overlayData={forgotPasswordError:"label.login.ajaxError"}}else{if(G[b]){Z.overlayData={forgotPasswordError:"label.login."+G[b]}}}var a={buttonText:Z.buttonText,mode:Z.buttonMode};I(X,V,Z.overlayPartial,Z.overlayData,a,P)};var S={data:{username:escape((Y=="")?" ":Y)},on:{success:function(b,a){var c=a.verificationResult;if(c!=="OK"){T(true,c)}else{I(X,V,Z.overlayPartial,Z.overlayData,{buttonText:Z.buttonText,mode:Z.buttonMode},Q)}},failure:T}};W.fireEvent("to-ajax",{componentType:"login",cfg:S,actionCode:"resetPassword"})}function P(V,T,U){U.detach("forgetPassw|*");C.on("forgetPassw|click",function(W){J(W,U,V,T)},U.one(".btn-send-forgotten-password"));C.on("keypress",S,U.one(".ovUsername"));function S(W){if(W.charCode===13){J(W,U,V,T)}}}function J(V,T,U,S){V.halt();var W=T.one(".ovUsername").get("value");E(W,U,S)}function A(S){var U=S.component;if(!N){U.node.append(H());var V=U.node.one(".forgotPasswordOverlay");var T=C.Node.getDOMNode(V);U.translateTemplate(S,V);N=new YAHOO.widget.Dialog(T,{width:"320px",fixedcenter:true,draggable:false,close:true,visible:false,modal:false,zIndex:10});N.render(document.body)}return N}function Q(V,S,U){var T=A(S);U.on("forgetPassw|click",function(){T.hide()},".btn-send-forgotten-password")}function D(){return'<p class="translate" data-wl-translate="label.login.forgotPassword"></p>'}function B(V,U){var S=V.compInstConfig.maxLength;var T=V.getId()||V.initData.contextId;return'<p class="error translate" data-wl-translate="'+U+'"></p><p class="translate" data-wl-translate="label.login.forgotPasswordOverlayDescription"></p><p><label for="ovUsername-'+T+'" class="translate" data-wl-translate="label.login.forgotPasswordOverlayUsername"></label> <input id="ovUsername-'+T+'" class="textfield ovUsername" type="text" name="username" maxlength="'+S+'"/></p>'}function H(){return'<div class="forgotPasswordOverlay"><div class="forgot-password-form"><div class="hd">&nbsp;</div><div class="bd"><h3 class="translate" data-wl-translate="label.login.forgotPasswordOverlayHeader"></h3><div class="overlay-content"></div></div><div class="ft buttons"></div><div class="clear-both" /></div></div>'}function F(){return'<p class="loadingContainer"></p>'}function K(S,U,T){return'<div class="button button-smaller align-right"><input type="button" id="btn-send-forgotten-password-'+S+'" class="translate '+U+' btn-send-forgotten-password" data-wl-translate="'+T+'"/></div>'}C.widgets=C.widgets||{};C.widgets.ForgotPassword=R},"1.0.0",{requires:[]});YUI.add("wl-login",function(A){A.components.Login=function(AH){var p=this;AH.form=true;var v=false;var E;var y=false;var V=false;var h="";p.incomingEvents={loginCheck:function(){if(y){p.fireEvent("logged-in");return true}return false},show_login_overlay:function(){G()},"block-submit":function(){v=true},travelBankViewBalance:function(){AL()},"in-logged-out":function(AM){if(AK()){if(AH.initData.redemptionSearch){p.node.one(".login-component").removeClass("hidden");s();y=false;AH.initData.user=null}}else{AI()}},"in-internal-logged-in":function(AM){AH.initData.user=AM.user;y=true;if(AK()){if(AH.initData.redemptionSearch){p.node.one(".login-component").addClass("hidden");s()}}else{if(AM.updateContent){p.node.addClass("loading");Q(AM.user)}}},"set-logout-confirm":function(AM){I=AM.callback},"sso-token-deleted":function(){if(y&&!AK()){if(B()){O()}else{var AM=A.one("a.logout");if(AM){var AN=AM.getAttribute("href");if(AN){window.location.href=AN}}}}},change_lang:function(){if(y&&h!=""){P(h)}}};p.onRenderState={initialized:function(AM){w(AM)},rbeSelectFlights:function(AM){w(AM);AE()},mybLanding:function(AN){AN.removeClass("loading");AN.purge(true,"submit");A.on("login|submit",u,AN);A.on("blur",A.wlValidation.validate,AN.all("input.textfield"));if(AH.compInstConfig.forgotPasswordPopUpEnabled){A.on("click",n,AN.all(".forgot-password"))}var AM=AH.initData.loginActionResult.authenticationResult;if(AM&&AM!="SUCCESSFUL"){R(AM,AN)}else{AN.one("input.username").setAttribute("data-wl-value","")}}};function w(AM){D(AM);if(AH.initData.loggedIn){Y(AM,AH.initData.user)}}function G(){if(!AK()){var AM={id:"login-overlay_component",width:"350px",height:"245px",close:true,needTranslation:true};var AN=p.getPartial("_login_overlay",{});if(A.widgets.loginPopupOverlay==null){A.widgets.loginPopupOverlay=new A.widgets.PopupWidget(A.one(document.body),AN,AM)}else{A.widgets.loginPopupOverlay.update(AN)}A.widgets.loginPopupOverlay.show();p.node.removeClass("loading");l()}}function l(){var AM=A.one("#login-overlay-popup");if(AM){AM.one("#btn-overlay").on("submit|click",g);if(AH.compInstConfig.forgotPasswordPopUpEnabled){AM.delegate("click",o,".forgot-password")}AM.delegate("blur",A.wlValidation.validate,"input.textfield")}}function s(){p.node.one("input.username").set("value","");p.node.one("input.password").set("value","");AD(p.node.one(".component-section-error"),"")}function Y(AO,AN){y=true;if(AN.travelBankCredentials){b(AN)}if(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled&&AN.travelBankCredentials){var AM=AO.one("#loginComponentTraveBankViewDetailsLink");if(AM){A.on("click",AJ,AM)}}else{F()}K(AN);AO.removeClass("loading");if(B()){A.on("login|click",T,AO.all(".logout"))}else{if(AH.compInstConfig.agentUserConfiguration.logoutRedirectToAgentHome){A.on("login|click",e,AO.all(".logout"))}}}function B(){return AH.compInstConfig.byAjaxLogout}var I=function(){return false};function b(AM){var AO=A.one("#ExternalForms");if(AO){var AN=AO.one("#TravelBankViewDetailsForm");if(AN){H(AO,AM)}else{AG(AO,AM)}}else{A.log("Cannot find #ExternalForms node.","warn")}}function H(AN,AM){var AP=AN.one("#loginComponentTraveBankViewDetailsUsername");if(AP){AP.set("value",AM.travelBankCredentials.username)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsUsername node.","warn")}var AO=AN.one("#loginComponentTraveBankViewDetailsPassword");if(AO){AO.set("value",AM.travelBankCredentials.password)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsPassword node.","warn")}}function F(){var AM=A.one("#TravelBankViewDetailsForm");if(AM){AM.remove()}}function AG(AN,AM){var AO={username:AM.travelBankCredentials.username,password:AM.travelBankCredentials.password};p.renderPartialInNode("_travelBankViewDetailsForm",AO,AN,false)}function AJ(AM){AM.preventDefault();AL();return false}function AL(){document.TBDetails.action=sabre.config.satConfiguration.travelBankConfiguration.balanceUrlKey;document.TBDetails.method="POST";document.TBDetails.submit()}function K(AQ){if(!AQ){return }if(AQ.frequentFlyerProfile){A.one("#loginComponentLoyaltyDiv").removeClass("hidden")}else{A.one("#loginComponentLoyaltyDiv").addClass("hidden")}if(AQ.travelBankCredentials&&(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled||X(AQ))){A.one("#loginComponentTraveBankDiv").removeClass("hidden")}else{A.one("#loginComponentTraveBankDiv").addClass("hidden")}var AS=AQ.loyaltyTier;h="";if(AS){h=AS;P(AS)}if(AQ.loyaltyBalanceRetrievalError){A.one("#balanceNotAvailable").removeClass("hidden");return }if(AQ.agentProfile){var AT=false;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");var AN=AQ.agentInfoTO.superUser;Z(AN,AT,"agentName","agentNameEnabled",AQ.firstName+" "+AQ.lastName);Z(AN,AT,"agencyName","agencyNameEnabled",AQ.agencyInfoTO.travelAgencyName);Z(AN,AT,"agencyIdentifier","agencyIATAEnabled",AQ.agencyInfoTO.travelAgencyIdentifier);if(AQ.creditLimitRetrievalError){A.one("#loginComponentAgencyBalanceDiv").addClass("hidden");return }Z(AN,AT,"agencyCreditLimit","creditLimitEnabled",d(AQ.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");Z(AN,AT,"agencyBalance","balanceEnabled",d(AQ.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd");if(AQ.creditLimitInformationTO.differentBalanceAndBookingCurrency&&sabre.config.satConfiguration.travelBankConfiguration.convertAgentCreditLimit){Z(AN,AT,"creditLimitInBookingCurrency","creditLimitEnabled");Z(AN,AT,"convertedAgencyCreditLimit","creditLimitEnabled",d(AQ.creditLimitInformationTO.accountCreditLimit),"convertedCreditLimitDd");Z(AN,AT,"convertedAgencyBalance","balanceEnabled",d(AQ.creditLimitInformationTO.accountBalance),"convertedBalanceDd")}}else{if(AQ.agencyProfile){var AT=true;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");Z(AN,AT,"agencyContactName","agencyContactNameEnabled",AQ.firstName+" "+AQ.lastName);Z(AN,AT,"agencyName","agencyNameEnabled",AQ.agencyInfoTO.travelAgencyName);if(!AQ.creditLimitRetrievalError){Z(AN,AT,"agencyCreditLimit","creditLimitEnabled",d(AQ.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");Z(AN,AT,"agencyBalance","balanceEnabled",d(AQ.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd")}}else{A.one("#loginComponentAgencyBalanceDiv").addClass("hidden")}}if(AQ.loyaltyBalance==""){return }A.one("#balanceAmount").removeClass("hidden");A.one("#balanceAvailable").removeClass("hidden");var AV={thousandsSeparator:","};var AR=A.DataType.Number.format(parseInt(AQ.loyaltyBalance,10),AV);M(AR);var AP=AQ.balanceDate;if(AP!=0){var AM=sabre.config.satConfiguration.dateFormat;var AO=A.DataType.Date.format(new Date(AP),{format:AM});var AX="label.login.balanceDate|"+AO;var AU=A.translateParametrized(AX);var AW=A.one("#balanceDate");if(AW){AW.setContent(AU);AW.setAttribute("data-wl-translate",AX);AW.removeClass("hidden")}}}function P(AM){var AN=A.translateParametrized("TierLevel."+AM);var AQ="label.login.member|"+AN;var AO=A.translateParametrized(AQ);var AP=A.one("#loyaltyTier");AP.setAttribute("data-wl-translate",AQ);AP.setContent(AO)}function Z(AQ,AT,AO,AS,AP,AM){var AR=A.one("#"+AO);var AN=AH.compInstConfig.agentUserConfiguration;if(AQ){AN=AH.compInstConfig.agentSuperUserConfiguration}else{if(AT){AN=AH.compInstConfig.agencyUserConfiguration}}if(AN[AS]){if(AM!=undefined){A.one("#"+AM).setContent(AP)}else{if(AP!=undefined){AR.setContent(AP)}}AR.removeClass("hidden")}else{AR.addClass("hidden")}}function X(AM){if(AM.agentProfile){var AN=AH.compInstConfig.agentUserConfiguration;if(AM.agentInfoTO.superUser){AN=AH.compInstConfig.agentSuperUserConfiguration}return AN.viewBalanceEnabled}else{if(AM.agencyProfile){return AH.compInstConfig.agencyUserConfiguration.viewBalanceEnabled}}return false}function d(AM){if(!AM){return""}var AO={decimalPlaces:A.getDecimals(AM.currency.code)};var AN=A.DataType.Number.format(parseFloat(AM.amount),AO);return A.formatPrice({value:AN,currencyCode:AM.currency.code},{currencyCodeSeparator:" "})}function M(AN){var AM=A.one("#amount");AM.setContent(AN);var AP=sabre.config.satConfiguration.frequentFlyer.denomination||"";var AO=A.one("#denomination");AO.setContent("&nbsp;"+A.translateParametrized(AP));AO.setAttribute("data-wl-translate",AP)}function D(AM){AM.removeClass("loading");AM.purge(true,"submit");A.on("login|submit",m,AM);if(AH.compInstConfig.forgotPasswordPopUpEnabled){AM.delegate("click",n,".forgot-password")}AM.delegate("click",c,".toggler");AM.delegate("blur",A.wlValidation.validate,"input.textfield")}function R(AN,AP){var AM;switch(AN){case"FAILED":AM="_loginFailedAuthentication";break;case"SYSTEM_ERROR":AM="_loginFailedSystemError";break;case"NOT_ALLOWED":AM="_loginFailedStatusIsNotAllowed";break;default:var AO="No such result implemented "+AN;A.log(AO,"error");throw AO}AP.one(".login-mybooking .field").prepend(p.getHtml(AM));p.translateTemplate(AH,AP.one(".login-mybooking .field"))}function W(){var AN=p.node;var AM={togglee:AN.one(".togglee"),toggler:AN.one(".toggler a")};return AM.togglee&&AM.toggler?AM:null}function c(){var AM=W();if(AM){AM.togglee.toggleClass("hidden");AM.toggler.toggleClass("open")}}function J(){var AM=W();if(AM){AM.togglee.removeClass("hidden");AM.toggler.addClass("open")}}function AF(){return v||p.node.hasClass("loading")}function g(AN){AN.preventDefault();V=true;if(AF()){return }var AM=A.one("#login-overlay-popup");if(!AM){return }if(!f(AM)){return }A.widgets.loginPopupOverlay.hide();k(AN,AM.ancestor("form"));var AO="#form_"+AH.getId();window.scrollTo(0,A.one(AO).getY())}function m(AM){V=false;AM.preventDefault();if(AF()){return }if(!AC()){return }AB();k(AM,p.node.ancestor("form"))}function k(AM,AN){p.node.addClass("loading");if(AK()){t(AN)}else{a(AN)}}function AK(){return AH.state==="rbeSelectFlights"}function u(AM){V=false;AM.preventDefault();if(!AC()){return }var AN=p.node.ancestor("form");AN.submit()}function AC(){return f(p.node)}function f(AM){A.wlValidation.validate(null,AM.one(".username"));A.wlValidation.validate(null,AM.one(".password"));return !AM.one(".username").hasClass("error")&&!AM.one(".password").hasClass("error")}function e(AO){var AQ=[{text:'<span class="translate" data-wl-translate="label.login.logoutPopup.cancel"></span>',handler:function(){this.hide()}},{text:"<span class='translate' data-wl-translate='label.login.logoutPopup.continue'></span>",handler:function(){window.location.href=AH.initData.logoutUrl;this.hide()}}];var AN={buttons:AQ,close:true,needTranslation:true};var AP='<h3><span class="translate" data-wl-translate="label.login.logoutPopup.title"></span></h3><p><span class="translate" data-wl-translate="label.login.logoutPopup.message"></span></p>';var AM=new A.widgets.PopupWidget(A.one(document.body),AP,AN);AM.show();AO.preventDefault()}function T(AM){AM.preventDefault();if(AF()||I(O)){return }O()}function O(){p.node.addClass("loading");x()}function AE(){var AM=A.one("#login_2");if(AM&&!y&&AH.initData.redemptionSearch){var AN=A.one("#flow-message-ffNotLoggedIn");if(AN&&AN.hasClass("hidden")){AN.removeClass("hidden")}j();J()}}function j(){var AM=["ffFlightsUnavailable","ffSomeFlightsUnavailable","ffSelectedFlightsUnavailable"];p.fireEvent("remove-messages",{data:{messages:AM}})}function q(){A.wlValidation.initializeForPartial(AH.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,p.node)}function o(AN){if(A.widgets.loginPopupOverlay!=null){A.widgets.loginPopupOverlay.hide()}var AM=A.one("#login-overlay-popup");AH.overrideUserLoginId=AM.one(".username").get("value");n(AN,true)}function n(AN,AM){new A.widgets.ForgotPassword(AN,AH,AM)}function AB(){if(E){E.destroy();E=null}}function AI(){y=false;AH.initData.user=null;c();q();D(p.node)}function x(){var AM={data:{requestPartials:["initialized"]},on:{success:function(AR,AQ){var AO=AQ.partials.initialized;N(AO);p.fireEvent("remove-all-messages");p.fireEvent();p.fireEvent("add-messages",{data:{messages:AQ.flowMessagesToEnable}});p.fireEvent("logged-out",{data:{refreshAncillaries:true,isFFUflow:AQ.ffuflow}});var AP=null;C(AP);if(!AH.compInstConfig.folded){J()}}}};var AN={cfg:AM,actionCode:"logout"};if(!B()){AN.url=AH.initData.logoutUrl}p.fireEvent("to-ajax",AN)}function C(AM){p.fireEvent("update-data",{data:{loggedUser:AM}})}function Q(AN){var AM={data:{requestPartials:["initialized"]},on:{end:function(){p.node.removeClass("loading")},success:function(AQ,AP){var AO=AP.partials.initialized;N(AO);Y(p.node,AN)}}};p.fireEvent("to-ajax",{cfg:AM,actionCode:"getLoginContent"})}function r(AM){return{username:escape(AM.one(".username").get("value")),password:escape(AM.one(".password").get("value")),loginFromOverlay:V}}function t(AN){var AM={data:r(AN),on:{end:function(){S();p.node.removeClass("loading")},success:function(AP,AO){switch(AO.authenticationResult){case"SUCCESSFUL":y=true;AA(AO,true);break;case"TRAVEL_BANK_UNAVAILABLE":y=true;AA(AO,true);break;case"FAILED":U(AO);AH.initData.username=AO.username;z("_loginFailedAuthentication");break;case"SYSTEM_ERROR":J();z("_loginFailedSystemError");break;case"NOT_ALLOWED":J();z("_loginFailedStatusIsNotAllowed");break;default:break}}}};L(AM)}function a(AN){var AO=r(AN);AO.requestPartials=["initialized"];var AM={data:AO,on:{end:function(){S();p.node.removeClass("loading")},success:function(AR,AQ){var AP=AQ.partials.initialized;N(AP);switch(AQ.authenticationResult){case"SUCCESSFUL":Y(p.node,AQ.user);AA(AQ,false);break;case"TRAVEL_BANK_UNAVAILABLE":Y(p.node,AQ.user);AA(AQ,false);break;case"FAILED":U(AQ);AH.initData.username=AQ.username;z("_loginFailedAuthentication");break;case"SYSTEM_ERROR":z("_loginFailedSystemError");break;case"NOT_ALLOWED":z("_loginFailedStatusIsNotAllowed");break;default:break}}}};L(AM)}function L(AM){p.fireEvent("login-started",{header:"ssoIgnore",callback:function(){p.fireEvent("to-ajax",{cfg:AM,actionCode:"login",ignoreHeaders:true})}})}function S(){p.fireEvent("login-finished",{header:"ssoIgnore"})}function z(AN){J();var AM=p.node.one(".component-section-error");AD(AM,p.getHtml(AN));p.translateTemplate(AH,AM);q()}function U(AM){p.fireEvent("add-messages",{data:{messages:AM.flowMessagesToEnable}})}function N(AM){AD(p.node,A.decodeHtmlEntities(AM));p.translateTemplate(AH,p.node)}function AD(AN,AM){AN.set("innerHTML",AM)}function AA(AQ,AN){p.fireEvent("remove-all-messages");p.fireEvent("add-messages",{data:{messages:AQ.flowMessagesToEnable}});p.fireEvent("out-internal-logged-in",{user:AQ.user,updateContent:AN});if(AQ.user.frequentFlyerProfile){var AM=false;var AR=false;var AS=V&&AQ.enoughMilesForSelectedOffers;var AO=AQ.ffuflow;if(!AS&&(AQ.flowMessagesToEnable.length>0||AQ.redemptionFareReload)){AM=true;AR=true}if(AS){AM=false}if(!AQ.enoughMilesForSelectedOffers){AR=true}p.fireEvent("ff-logged-in",{data:{forceRedemptionFaresReload:AM,refreshAncillaries:AR,isFFUflow:AO,enoughMilesForSelectedOffers:AQ.enoughMilesForSelectedOffers}})}p.fireEvent("logged-in",AQ);var AP={prefix:AQ.user.prefix,firstName:AQ.user.firstName,lastName:AQ.user.lastName,tierLevel:AQ.user.loyaltyTier,ffNumber:AQ.user.ffNumber,emails:AQ.user.emails};C(AP);if(AS){p.fireEvent("submit-page")}if(!AH.compInstConfig.byAjaxLogin){window.location=window.location}}}});YUI.add("wl-sbmt",function(A){A.components.Sbmt=function(E){var L=this;var f;L.incomingEvents={unblock:T,block:P,"block-ffu":K,"show-in-seats":R,"remote-submit":J,"show-popup":W,refresh:D,"update-on-hold-status":N,"validate-submit":C,"submit-page":X,"show-sbmt-with-msg":H,"hide-sbmt":V,"show-sbmt":I};E.initData=E.initData||{};E.initData.pageCode=sabre.config.pageCode;var c=E.initData.componentCodesUnblockDependency;var G=E.initData.disableSubmitPermanently;L.onRenderState={initialized:function(h){Y()},refund:function(h){O(["label.sbmt.comfirmButton.yes","label.sbmt.comfirmButton.no"]);Y()},exchange:function(h){O(["label.sbmt.exchange.confirmButton.yes","label.sbmt.exchange.confirmButton.no"]);Y()},changePaxDetails:function(h){O(["label.sbmt.changePaxDetails.confirmButton.yes","label.sbmt.changePaxDetails.confirmButton.no"]);Y()},upgrade:function(h){O(["label.sbmt.upgrade.confirmButton.yes","label.sbmt.upgrade.confirmButton.no"]);Y()},sscikiosk:function(h){d()}};function V(){L.node.addClass("hidden")}function I(h){if(L.node.hasClass("hidden")){L.node.removeClass("hidden")}T(h)}function H(k){var l=k.data.translationKey;var m=k.data.translationNode;if(L.node.hasClass("hidden")){L.node.removeClass("hidden")}var j=L.node.one(".return-continue-wrapper");if(m){j.setContent(A.translateParametrized(A.decodeHtmlEntities(m)))}else{if(l){var h=j.one(".return-continue-message");h.setAttribute("data-wl-translate",l);j.translate()}}if(j&&j.hasClass("hidden")){j.removeClass("hidden")}}function F(){return A.utilsUrl.buildExecutionUrl(E.initData.returnUrlSuffix)}function Y(){a(L.node)}function a(j){var h=j.ancestor("form");if(h){h.on("submit",function(k){g(h.get("id"),k)})}}function X(j){var h=L.node.ancestor("form");if(h){h.submit();g(h.get("id"),j)}}function g(j,h){if(S()){L.fireEvent("show_login_overlay",{event:h,actionCode:"ignoreTransaction"});h.preventDefault();return }L.fireEvent("page-submitted",{cfg:{},actionCode:"ignoreTransaction",formId:j,event:h});Z()}function S(){return E.initData.loginOverlayEnabled&&c.length===1&&A.Array.indexOf(c,"login")===0}function Z(){A.all("a").each(function(j){j.set("href","#");j.set("onclick",function(){})});var h=A.all('input[type="submit"]');h.each(function(j){j.set("disabled","disabled");j.addClass("disabled")})}function J(h){L.node.ancestor("form").submit()}function C(j){var h=L.node.ancestor("form");h.all("input[name=_eventId_next]").each(function(k){k.setAttribute("name","_eventId_runValidation")});h.submit()}function R(k){var l=1;var j=A.all(k.selector);var h=L.node.one(".sbmt-seats");j.each(function(n){n.set("innerHTML",h.get("innerHTML"));var m=n.one("input.btn-next");m.setAttribute("id","btn-next-id"+l++);m.setAttribute("data-wl-translate",k.translationKey||E.initData.textKey);n.translate();a(n);L.fireEvent("seats-loaded",{node:n})})}function D(l){var k=L.node.one("input#btn-search");if(k){var j=E.initData.textKey;var m=".onHold";var h=(j.indexOf(m)==j.length-m.length);if(!f&&h){j=j.substring(0,j.length-m.length)}else{if(f&&!h){j+=m}}if(l==="paypal"){j="label.sbmt.submitPayment.paypal"}k.setAttribute("data-wl-translate",j);k.set("value",A.translateParametrized(j));A.translateNode(k)}}function N(h){f=h.isOnHoldEnabled;D("")}function U(j){var h=A.Array.indexOf(c,j);if(h!==-1){c.splice(h,1)}}function e(j){var h=A.Array.indexOf(c,j);if(h===-1){c.push(j)}}function Q(){return !G&&(c.length==0||(E.initData.loginOverlayEnabled&&c.length==1&&A.Array.indexOf(c,"login")===0))}function T(j){if(j.data&&j.data.forceUnblock===true){G=false}if(j.type){U(j.type)}if(Q()){var h=L.node.one("input#btn-search");if(h){h.removeAttribute("disabled");h.removeClass("disabled");L.fireEvent("unblocked")}}}function P(j){if(j.type){e(j.type);if(S()){return }}var h=L.node.one("input#btn-search");if(h){h.set("disabled","disabled").addClass("disabled");L.fireEvent("blocked")}}function K(h){if(h.data.isFFUflow){M("ffInsufficientMiles",null)}}function M(h,j){currentMessage=h;L.fireEvent("add-messages",{data:{messages:[{id:h,code:"",level:"error",originalMessage:j}]}});L.fireEvent("show-messages",{data:{messages:[{id:h,code:"",level:"error"}]}})}function d(){A.one("#btn-back").on("click",function(h){A.one("#_eventId").set("name","_eventId_prev")})}function O(k){var n;var j=A.Node.create('<div class="modalWrapper"></div>');var m=[];var l=A.getCurrentTranslations();var h=L.node.one("#ignoreFlowPopup");m[0]={text:l[k[0]],handler:function(){if(E.compInstConfig.callIgnoreAction){B(j)}else{j.addClass("loading");location.href=F()}}};m[1]={text:l[k[1]],handler:function(){n.hide()}};n=new YAHOO.widget.Dialog("ignoreFlowPopup",{visible:false,draggable:false,zIndex:100,fixedcenter:true,modal:true,close:false,buttons:m,hideaftersubmit:false});b=function(o){if(typeof o.preventDefault=="function"){o.preventDefault()}btn_0=n.firstButton;btn_1=n.lastButton;btn_0.setAttribute("class","translate");btn_1.setAttribute("class","translate");btn_0.setAttribute("data-wl-translate",k[0]);btn_1.setAttribute("data-wl-translate",k[1]);h.translate();h.removeClass("hidden");j.removeClass("loading");n.center();n.show()};A.on("click",b,"#ignoreFlow");A.on("click",b,"#ignoreFlowTranslation");n.renderEvent.subscribe(function(){var o=h.get("children");o.each(function(p){j.append(p)});h.append(j)});n.render(document.body)}var b=function(){};function W(h){b(h)}function B(j){var h={on:{success:function(){location.href=A.utilsUrl.buildExecutionUrl("_eventId_redirectToCameFromURL")},failure:function(){j.removeClass("loading");A.log("Ajax call failed!","error")}}};j.addClass("loading");L.fireEvent("to-ajax",{cfg:h,actionCode:"ignoreTransaction"})}}});YUI.add("wl-lang",function(A){A.components.Lang=function(E){var H=this;H.onRenderState={initialized:function(){M();if(sabre.config.satConfiguration.globalCurrencyConfiguration.currencySelectionEnabled){H.fireEvent("add-me-to-pos-change",{trigger:"fsc",actionCode:"changePointOfSale"})}},hidden:function(){M()},buttons:function(){F()}};H.incomingEvents={changeLanguage:D,change_lang:function(){P()},"before-changePointOfSale":G};function F(){var R=A.one(".initial-active-language").getAttribute("id");B(R)}function M(){A.on("change",L,"#select-language");if(A.one("#select-currency")){A.on("change",Q,"#select-currency")}I();J(E.initData.currency)}function P(){var S=A.config.locale;var R="pageTitle."+sabre.config.pageCode;if(A.translations[S]&&A.translations[S][R]){document.title=A.translations[S][R]}}function Q(S){var R=S.currentTarget.get("value");O(R)}function J(S){var R=H.node.one("#select-currency");if(R){R.setStyle("visibility","visible");if(S){A.config.currency=S;R.set("value",S)}}return S}function D(S){var R=S.currentTarget.get("id");B(R)}function L(S){var R=S.currentTarget.get("value");B(R)}function I(U){U=U||sabre.config.global.language||sabre.config.defaultLang;var T=U.replace("_","-");A.one("html").setAttribute("lang",T);var R=A.one("body");if(A.config.locale&&A.config.locale!==U){R.removeClass("LANGUAGE_"+A.config.locale)}R.addClass("LANGUAGE_"+U);R.setAttribute("lang",T);A.config.locale=U;sabre.config.global.language=U;var S=H.node.one("#select-language");if(S){S.set("value",U);if(E.state!="hidden"){S.setStyle("visibility","visible")}}return U}function B(T){var S="wl-lang-"+T;var R=sabre.config.global.storefrontResourcesPath;if(sabre.config.global.configurationVersion){R+=sabre.config.global.configurationVersion+"/"}R+=sabre.config.templateFolder+sabre.config.translationDir+"/";sabre.config.groups["wl-noncombine"].modules[S]={fullpath:R+T+".js"+sabre.config.global.versionNumber};A.use(S,function(V,U){V.translations[T]=U.success?V.translations[T]:"Translations not found";K(T)})}function K(T){var R=sabre.config.global.language;I(T);var S={data:{selectedLang:T},on:{success:function(){H.fireEvent("change_lang",{data:T});A.wlValidation.refreshOverlaysAlignment(R);H.fireEvent("update-data",{data:{language:T}})},complete:function(){var U=A.one("#progressContainer");if(U){U.remove()}}}};H.fireEvent("to-ajax",{cfg:S,actionCode:"setSelectedLang"})}function O(T){var S=H.node.one("#language-content");S.addClass("loading");N();var R={data:{selectedCurrency:T},on:{complete:function(){S.removeClass("loading")},success:function(){C();H.fireEvent("change_currency",{data:T});H.fireEvent("update-data",{data:{currency:T}})}}};H.fireEvent("to-ajax",{cfg:R,actionCode:"setSelectedCurrency"})}function N(){H.fireEvent("block_submit")}function C(){H.fireEvent("unblock_submit",{data:{}})}function G(){var S=H.node.one("#language-content");S.addClass("loading");N();var T="__currency";var R={data:{requestPartials:[T]},on:{end:function(){S.removeClass("loading")},success:function(Y,W){C();var V=H.node.one(".currency-section");if(V){var X=A.Node.create(A.decodeHtmlEntities(W.partials[T]));V.replace(X);var U=H.node.one("#select-currency").get("value");H.fireEvent("change_currency",{data:U});H.fireEvent("update-data",{data:{currency:U}})}}}};H.fireEvent("to-ajax",{cfg:R,actionCode:"setDefaultCurrency"})}}});YUI.add("wl-ibedata",function(A){A.components.Ibedata=function(C){var D=this;var B=C.initData;D.onRenderState={initialized:function(){WhiteLabel.setIbeData(B)}};D.incomingEvents={"update-data":function(E){if(E.data){B=A.merge(B,E.data);WhiteLabel.setIbeData(B)}}}}});(function(){var D=YAHOO.util;var C=function(G,H,B,A){if(!G){}this.init(G,H,B,A)};C.NAME="Anim";C.prototype={toString:function(){var B=this.getEl()||{};var A=B.id||B.tagName;return(this.constructor.NAME+": "+A)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(F,A,B){return this.method(this.currentFrame,A,B-A,this.totalFrames)},setAttribute:function(H,A,B){var G=this.getEl();if(this.patterns.noNegatives.test(H)){A=(A>0)?A:0}if(H in G&&!("style" in G&&H in G.style)){G[H]=A}else{D.Dom.setStyle(G,H,A+B)}},getAttribute:function(L){var J=this.getEl();var B=D.Dom.getStyle(J,L);if(B!=="auto"&&!this.patterns.offsetUnit.test(B)){return parseFloat(B)}var K=this.patterns.offsetAttribute.exec(L)||[];var A=!!(K[3]);var I=!!(K[2]);if("style" in J){if(I||(D.Dom.getStyle(J,"position")=="absolute"&&A)){B=J["offset"+K[0].charAt(0).toUpperCase()+K[0].substr(1)]}else{B=0}}else{if(L in J){B=J[L]}}return B},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px"}return""},setRuntimeAttribute:function(M){var A;var L;var K=this.attributes;this.runtimeAttributes[M]={};var B=function(E){return(typeof E!=="undefined")};if(!B(K[M]["to"])&&!B(K[M]["by"])){return false}A=(B(K[M]["from"]))?K[M]["from"]:this.getAttribute(M);if(B(K[M]["to"])){L=K[M]["to"]}else{if(B(K[M]["by"])){if(A.constructor==Array){L=[];for(var J=0,N=A.length;J<N;++J){L[J]=A[J]+K[M]["by"][J]*1}}else{L=A+K[M]["by"]*1}}}this.runtimeAttributes[M].start=A;this.runtimeAttributes[M].end=L;this.runtimeAttributes[M].unit=(B(K[M].unit))?K[M]["unit"]:this.getDefaultUnit(M);return true},init:function(T,O,P,B){var A=false;var S=null;var Q=0;T=D.Dom.get(T);this.attributes=O||{};this.duration=!YAHOO.lang.isUndefined(P)?P:1;this.method=B||D.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=D.AnimMgr.fps;this.setEl=function(E){T=D.Dom.get(E)};this.getEl=function(){return T};this.isAnimated=function(){return A};this.getStartTime=function(){return S};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(D.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}D.AnimMgr.registerElement(this);return true};this.stop=function(E){if(!this.isAnimated()){return false}if(E){this.currentFrame=this.totalFrames;this._onTween.fire()}D.AnimMgr.stop(this)};var M=function(){this.onStart.fire();this.runtimeAttributes={};for(var E in this.attributes){this.setRuntimeAttribute(E)}A=true;Q=0;S=new Date()};var N=function(){var E={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};E.toString=function(){return("duration: "+E.duration+", currentFrame: "+E.currentFrame)};this.onTween.fire(E);var F=this.runtimeAttributes;for(var G in F){this.setAttribute(G,this.doMethod(G,F[G].start,F[G].end),F[G].unit)}Q+=1};var R=function(){var F=(new Date()-S)/1000;var E={duration:F,frames:Q,fps:Q/F};E.toString=function(){return("duration: "+E.duration+", frames: "+E.frames+", fps: "+E.fps)};A=false;Q=0;this.onComplete.fire(E)};this._onStart=new D.CustomEvent("_start",this,true);this.onStart=new D.CustomEvent("start",this);this.onTween=new D.CustomEvent("tween",this);this._onTween=new D.CustomEvent("_tween",this,true);this.onComplete=new D.CustomEvent("complete",this);this._onComplete=new D.CustomEvent("_complete",this,true);this._onStart.subscribe(M);this._onTween.subscribe(N);this._onComplete.subscribe(R)}};D.Anim=C})();YAHOO.util.AnimMgr=new function(){var I=null;var J=[];var F=0;this.fps=1000;this.delay=1;this.registerElement=function(A){J[J.length]=A;F+=1;A._onStart.fire();this.start()};this.unRegister=function(A,B){B=B||G(A);if(!A.isAnimated()||B===-1){return false}A._onComplete.fire();J.splice(B,1);F-=1;if(F<=0){this.stop()}return true};this.start=function(){if(I===null){I=setInterval(this.run,this.delay)}};this.stop=function(A){if(!A){clearInterval(I);for(var B=0,C=J.length;B<C;++B){this.unRegister(J[0],0)}J=[];I=null;F=0}else{this.unRegister(A)}};this.run=function(){for(var A=0,C=J.length;A<C;++A){var B=J[A];if(!B||!B.isAnimated()){continue}if(B.currentFrame<B.totalFrames||B.totalFrames===null){B.currentFrame+=1;if(B.useSeconds){H(B)}B._onTween.fire()}else{YAHOO.util.AnimMgr.stop(B,A)}}};var G=function(A){for(var B=0,C=J.length;B<C;++B){if(J[B]===A){return B}}return -1};var H=function(E){var B=E.totalFrames;var C=E.currentFrame;var D=(E.currentFrame*E.duration*1000/E.totalFrames);var L=(new Date()-E.getStartTime());var A=0;if(L<E.duration*1000){A=Math.round((L/D-1)*E.currentFrame)}else{A=B-(C+1)}if(A>0&&isFinite(A)){if(E.currentFrame+A>=B){A=B-(C+1)}E.currentFrame+=A}};this._queue=J;this._getIndex=G};YAHOO.util.Bezier=new function(){this.getPosition=function(I,J){var H=I.length;var K=[];for(var L=0;L<H;++L){K[L]=[I[L][0],I[L][1]]}for(var G=1;G<H;++G){for(L=0;L<H-G;++L){K[L][0]=(1-J)*K[L][0]+J*K[parseInt(L+1,10)][0];K[L][1]=(1-J)*K[L][1]+J*K[parseInt(L+1,10)][1]}}return[K[0][0],K[0][1]]}};(function(){var E=function(C,D,B,A){E.superclass.constructor.call(this,C,D,B,A)};E.NAME="ColorAnim";E.DEFAULT_BGCOLOR="#fff";var G=YAHOO.util;YAHOO.extend(E,G.Anim);var F=E.superclass;var H=E.prototype;H.patterns.color=/color$/i;H.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;H.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;H.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;H.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;H.parseColor=function(B){if(B.length==3){return B}var A=this.patterns.hex.exec(B);if(A&&A.length==4){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}A=this.patterns.rgb.exec(B);if(A&&A.length==4){return[parseInt(A[1],10),parseInt(A[2],10),parseInt(A[3],10)]}A=this.patterns.hex3.exec(B);if(A&&A.length==4){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}return null};H.getAttribute=function(J){var C=this.getEl();if(this.patterns.color.test(J)){var A=YAHOO.util.Dom.getStyle(C,J);var B=this;if(this.patterns.transparent.test(A)){var D=YAHOO.util.Dom.getAncestorBy(C,function(I){return !B.patterns.transparent.test(A)});if(D){A=G.Dom.getStyle(D,J)}else{A=E.DEFAULT_BGCOLOR}}}else{A=F.getAttribute.call(this,J)}return A};H.doMethod=function(K,A,D){var B;if(this.patterns.color.test(K)){B=[];for(var C=0,L=A.length;C<L;++C){B[C]=F.doMethod.call(this,K,A[C],D[C])}B="rgb("+Math.floor(B[0])+","+Math.floor(B[1])+","+Math.floor(B[2])+")"}else{B=F.doMethod.call(this,K,A,D)}return B};H.setRuntimeAttribute=function(K){F.setRuntimeAttribute.call(this,K);if(this.patterns.color.test(K)){var C=this.attributes;var A=this.parseColor(this.runtimeAttributes[K].start);var D=this.parseColor(this.runtimeAttributes[K].end);if(typeof C[K]["to"]==="undefined"&&typeof C[K]["by"]!=="undefined"){D=this.parseColor(C[K].by);for(var B=0,L=A.length;B<L;++B){D[B]=A[B]+D[B]}}this.runtimeAttributes[K].start=A;this.runtimeAttributes[K].end=D}};G.ColorAnim=E})();YAHOO.util.Easing={easeNone:function(H,E,F,G){return F*H/G+E},easeIn:function(H,E,F,G){return F*(H/=G)*H+E},easeOut:function(H,E,F,G){return -F*(H/=G)*(H-2)+E},easeBoth:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H+E}return -F/2*((--H)*(H-2)-1)+E},easeInStrong:function(H,E,F,G){return F*(H/=G)*H*H*H+E},easeOutStrong:function(H,E,F,G){return -F*((H=H/G-1)*H*H*H-1)+E},easeBothStrong:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H*H*H+E}return -F/2*((H-=2)*H*H*H-2)+E},elasticIn:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return -(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H},elasticOut:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return N*Math.pow(2,-10*M)*Math.sin((M*J-L)*(2*Math.PI)/K)+I+H},elasticBoth:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J/2)==2){return H+I}if(!K){K=J*(0.3*1.5)}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}if(M<1){return -0.5*(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H}return N*Math.pow(2,-10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K)*0.5+I+H},backIn:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*(J/=H)*J*((I+1)*J-I)+F},backOut:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*((J=J/H-1)*J*((I+1)*J+I)+1)+F},backBoth:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}if((J/=H/2)<1){return G/2*(J*J*(((I*=(1.525))+1)*J-I))+F}return G/2*((J-=2)*J*(((I*=(1.525))+1)*J+I)+2)+F},bounceIn:function(H,E,F,G){return F-YAHOO.util.Easing.bounceOut(G-H,0,F,G)+E},bounceOut:function(H,E,F,G){if((H/=G)<(1/2.75)){return F*(7.5625*H*H)+E}else{if(H<(2/2.75)){return F*(7.5625*(H-=(1.5/2.75))*H+0.75)+E}else{if(H<(2.5/2.75)){return F*(7.5625*(H-=(2.25/2.75))*H+0.9375)+E}}}return F*(7.5625*(H-=(2.625/2.75))*H+0.984375)+E},bounceBoth:function(H,E,F,G){if(H<G/2){return YAHOO.util.Easing.bounceIn(H*2,0,F,G)*0.5+E}return YAHOO.util.Easing.bounceOut(H*2-G,0,F,G)*0.5+F*0.5+E}};(function(){var G=function(C,D,B,A){if(C){G.superclass.constructor.call(this,C,D,B,A)}};G.NAME="Motion";var I=YAHOO.util;YAHOO.extend(G,I.ColorAnim);var H=G.superclass;var K=G.prototype;K.patterns.points=/^points$/i;K.setAttribute=function(C,A,B){if(this.patterns.points.test(C)){B=B||"px";H.setAttribute.call(this,"left",A[0],B);H.setAttribute.call(this,"top",A[1],B)}else{H.setAttribute.call(this,C,A,B)}};K.getAttribute=function(B){if(this.patterns.points.test(B)){var A=[H.getAttribute.call(this,"left"),H.getAttribute.call(this,"top")]}else{A=H.getAttribute.call(this,B)}return A};K.doMethod=function(E,A,D){var B=null;if(this.patterns.points.test(E)){var C=this.method(this.currentFrame,0,100,this.totalFrames)/100;B=I.Bezier.getPosition(this.runtimeAttributes[E],C)}else{B=H.doMethod.call(this,E,A,D)}return B};K.setRuntimeAttribute=function(A){if(this.patterns.points.test(A)){var S=this.getEl();var Q=this.attributes;var T;var E=Q.points["control"]||[];var R;var D,B;if(E.length>0&&!(E[0] instanceof Array)){E=[E]}else{var F=[];for(D=0,B=E.length;D<B;++D){F[D]=E[D]}E=F}if(I.Dom.getStyle(S,"position")=="static"){I.Dom.setStyle(S,"position","relative")}if(J(Q.points["from"])){I.Dom.setXY(S,Q.points["from"])}else{I.Dom.setXY(S,I.Dom.getXY(S))}T=this.getAttribute("points");if(J(Q.points["to"])){R=L.call(this,Q.points["to"],T);var C=I.Dom.getXY(this.getEl());for(D=0,B=E.length;D<B;++D){E[D]=L.call(this,E[D],T)}}else{if(J(Q.points["by"])){R=[T[0]+Q.points["by"][0],T[1]+Q.points["by"][1]];for(D=0,B=E.length;D<B;++D){E[D]=[T[0]+E[D][0],T[1]+E[D][1]]}}}this.runtimeAttributes[A]=[T];if(E.length>0){this.runtimeAttributes[A]=this.runtimeAttributes[A].concat(E)}this.runtimeAttributes[A][this.runtimeAttributes[A].length]=R}else{H.setRuntimeAttribute.call(this,A)}};var L=function(C,A){var B=I.Dom.getXY(this.getEl());C=[C[0]-B[0]+A[0],C[1]-B[1]+A[1]];return C};var J=function(A){return(typeof A!=="undefined")};I.Motion=G})();(function(){var F=function(C,D,B,A){if(C){F.superclass.constructor.call(this,C,D,B,A)}};F.NAME="Scroll";var H=YAHOO.util;YAHOO.extend(F,H.ColorAnim);var G=F.superclass;var E=F.prototype;E.doMethod=function(D,A,C){var B=null;if(D=="scroll"){B=[this.method(this.currentFrame,A[0],C[0]-A[0],this.totalFrames),this.method(this.currentFrame,A[1],C[1]-A[1],this.totalFrames)]}else{B=G.doMethod.call(this,D,A,C)}return B};E.getAttribute=function(C){var A=null;var B=this.getEl();if(C=="scroll"){A=[B.scrollLeft,B.scrollTop]}else{A=G.getAttribute.call(this,C)}return A};E.setAttribute=function(D,A,B){var C=this.getEl();if(D=="scroll"){C.scrollLeft=A[0];C.scrollTop=A[1]}else{G.setAttribute.call(this,D,A,B)}};H.Scroll=F})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.0r4",build:"2449"});YUI.add("wl-cart-stick-to-screen",function(B){var L=function(N){var M=N;while(true){var O=M.ancestor(".lay > .lay");if(O!==null){M=O}else{return M}}};var D=function(M){return M.all("> .lay")};var F=function(O,N){for(var M=0;M<O.size();M++){if(O.item(M).contains(N)){return O.item(M)}}return null};var I=function(M){return M.getY()};var K=function(M){return M.get("offsetHeight")};var A=function(M){return I(M)+K(M)};var H=function(M){window.setTimeout(M,1)};var G=function(M){M()};var E=(function(h){var a=h.ancestor(".lay").ancestor(".lay");var b=h.getY();var c="initial";var U=L(h);var d=D(U);var f=F(d,h);var Z=function(){};var T=function(){return K(h)};var l=function(){return A(a)};var Y=function(){return B.DOM.docScrollY()};var S=function(){return B.DOM.winHeight()};var m=function(){return Y()+S()};var P=function(){return T()>S()};var X=function(o,p){h.setStyle("position",o);h.setStyle("top",(p!=null)?p+"px":null)};var M=function(o,p){if(c!==o){p();c=o}};var n=function(){M("bottomOfContainer",function(){B.log("Fixing cart position at the bottom of the container","debug");var o=function(){X("relative",0);X("relative",(l()-h.getY()-T()))};if(B.UA.ie>0&&B.UA.ie<8){X(null,null);H(o)}else{G(o)}})};var Q=function(){M("initial",function(){B.log("Fixing cart position at the original position","debug");X(null,null)})};var O=function(){M("topOfViewport",function(){B.log("Sticking cart to the top of the viewport","debug");X("fixed",0)})};var j=function(){M("bottomOfViewport",function(){B.log("Sticking cart to the bottom of the viewport","debug");X("fixed",S()-T())})};var k=function(){if(Y()<b){Q()}else{if(Y()+T()>=l()){n()}else{O()}}};var V=function(){if(m()>=l()){n()}else{if(b+T()<m()){j()}else{Q()}}};var R=function(){var p=0;var o=null;d.each(function(r){var q=K(r);if(q>=p){o=r;p=q}});return o};var e=function(){return f.compareTo(R())};var N=function(){if(P()){V()}else{k()}};var W=function(o){if(e()){return }else{N()}};var g=function(o){c="unknown";N()};return{onScroll:W,onSizeChanged:g}});var C=function(){var M=B.Node.create("<div></div>");M.setStyle("position","fixed");return(M.getStyle("position")==="fixed")};var J=function(N){B.log("Attaching scroll handler for shopping cart movement","debug");var M=E(N);B.on("scroll",M.onScroll);B.on("resize",M.onSizeChanged);B.on("cart:sizeChanged",M.onSizeChanged)};B.on("cart:stickToScreen",function(M){if(C()){J(M.container.ancestor(".lay"))}else{B.log("Running on browser that doesn't support position: fixed. Skipping scroll handler for shopping cart movement attachment","warn")}})});YUI.add("wl-cart",function(A){A.components.Cart=function(AT){var t=this;var Ax=AT.compInstConfig;var d=AT.initData;var Aw=AT.state;var Aj=Ax.insuranceEnabled;var P=Aj&&Ax.insuranceAPartOfFareBreakdown;var Ar=!!d.retainedDirection;var h={};var c="bookingFee";var o=[];var J=d.itineraryParts;var Ad=d.itineraryParts.length;var AM=[];var AK="";var m,x;var n="initialized";var AV;var N;var AX="differentTripTypeOverlay";var AU="getFrequentFlyerAdviceOverlay";t.incomingEvents={show_rules:u,modify_search_rendered:function(){Aq(false)},change_state_unbundled:Am,change_state:y,select_callback:W,update_for_lazy_flc:v,"update-offers-advanced":T,"update-with-insurance":AR,"update-with-ancillary":X,"update-with-hotel":Ac,"update-with-seat-selected":AD,"update-with-fop-surcharge":AP,"update-with-slider":Ab,"before-completedCarSelectAjax":Aa,"update-with-bnpl":Ah,clear_cart:L,clear_basket_prices:M,size_change:w,refresh:j,change_lang:function(){var A2=t.node.all(".fare-family-name");A2.each(function(A6){var A5=A6.getAttribute("data-wl-translate"),A4,A7;if(A5){A4=A5.split("|");A7=A6.getAttribute("data-wl-fare-family");programId=A6.getAttribute("data-wl-program-id");A4[1]=Af(A7,programId);A5=A4.join("|");A6.setAttribute("data-wl-translate",A5);A6.setContent(A.translateParametrized(A5))}});var A3=t.node.all(".fare-summary");A3.each(function(A5){var A7=A5.getAttribute("data-wl-fare-family");var A6=A5.getAttribute("data-wl-program-id");var A4=AZ(A7,A6);A4=A.decodeHtmlEntities(A4);A5.setContent(A4)})},upgrade_refresh:R};function AG(){t.node.removeClass("ftl-created");t.getDomEvents()}function K(){return(Ax.stickToScreen===true)}function Ag(){A.fire("cart:stickToScreen",{container:t.node})}function Ay(){N=A.Node.create('<div class="differentTripType-overlays"></div>');A.one("body").append(N)}t.onCreate=function(A2,A3){Al();AG();if(K()){Ag()}};t.onRenderState={initialized:function(A2){AO(A2);AC(A2);A.fire("cart:sizeChanged");t.fireEvent("cart-updated-with-seats-price",{});t.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"completedCarSelect"});t.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"reload"});t.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"removeCar"});Ay()},flightChanged:function(A2){AO(A2);AC(A2);A.fire("cart:sizeChanged")},exchangeReview:function(A2){AO(A2);AC(A2);A.fire("cart:sizeChanged")},exchange:function(A2){AO(A2);AC(A2);A.fire("cart:sizeChanged")},exchangeFlightSelect:function(A2){n="exchangeFlightSelect";AO(A2);AC(A2);Ay();A.fire("cart:sizeChanged")}};function AO(A3){AJ(A3);var A4=A.all("#fare-rules-anchor");A4.each(function(A5){A5.on("click",Ao)});var A2=A.one("#modify-search-trigger");if(A2){A2.on("click",Ae)}A.delegate("click",AI,"#cart-component","em.crossToggler");A.delegate("click",l,"#cart-component","em.toggler");A.delegate("click",As,"#cart-component",".fare-family-toggler");A.delegate("click",V,"#cart-component","em.paxToggler")}function AJ(A2){if(h.flightFare){var A3=A2.one(".price-details");if(A3){A3.removeClass("hidden")}}}function AC(A2){if(A2){A2.delegate("mouseover",C,".fare-indicator-icon");A2.delegate("mouseout",a,".fare-indicator-icon")}}function C(A6){A6.preventDefault();if(m==null){var A8=A6.currentTarget;var A4={header:"",context:[A6.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[Ax.fareIndicatorOverlayHorizontalPosition,Ax.fareIndicatorOverlayVerticalPosition]],underlay:"none",modal:false,fixedcenter:false,constraintoviewport:false,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.2}};var A5=A8.ancestor();var A7=A5.one(".fiTranslation");if(A7){var A2=A7.get("innerHTML");var BA=A5.ancestor();var A3=new A.Node.create('<div class="fare-indicator-overlay hidden"></div>');x=new A.Node.create('<div id="fare-indicator-overlay-container"></div>');BA.appendChild(A3);BA.appendChild(x);var A9='<div class="fare-indicator-overlay-content">'+A2+"</div>";A4.width=A3.getStyle("width");A4.height=A3.getStyle("height");m=new A.widgets.PopupWidget(x,A9,A4);m.show()}}}function a(A5){A5.preventDefault();var A6=A5.currentTarget;if(m){m.hide();m=null;var A2=A6.ancestor();var A3=A2.ancestor();var A4=A3.one(".fare-indicator-overlay");A3.removeChild(A4);A3.removeChild(x)}}function Z(){for(i=0;i<Ad;i++){if(A.Lang.isUndefined(d.itineraryParts[i])){o[i]=o[i]||undefined}else{o[i]=o[i]||d.itineraryParts[i].shoppingBasketHash}}}function Al(){for(i=0;i<d.itineraryParts.length;i++){o[i]=o[i]||d.itineraryParts[i].shoppingBasketHash}}function v(A5){var A4=A5.data.step;o[A4]=A5.data.selectedHashRef||A5.data.offerHashCode;o=o.slice(0,A4+1);if(Ad===o.length){d.itinerarySelected=true;var A2=o[o.length-1];var A3={selectedBasketRefs:[A2]};F({data:A3,mode:"lazy",selectedBasketsRef:A2})}else{d.itinerarySelected=false;A.Array.each(J,function(A7,A6){if(A6===A4){J[A6]=A5.data.itinerary}else{if(A6>A4){J[A6].segments=null}}});d.itineraryParts=J;Q(d.itineraryParts);AQ();s(A5.data.index);AL([d.itineraryParts])}k()}function R(A5){k();var A2=A5.data.flightIndex;var A6=A5.data.itineraries;o=A5.data.selectedBasketRefs;for(var A3=0;A3<Ad;A3++){if(A3>A2){o[A3]=null}}if(b(o)){var A4={selectedBasketRefs:o};F({data:A4,mode:A2,selectedBasketsRef:o,isUnbundled:true})}else{Az(A6,A2,A5.data.selectedBasketRefs)}}function T(A4){Z();var A2=A4.data.flightIndex;var A5=[];for(var A3=0;A3<d.itineraryParts.length;A3++){if(A3<A2){A5.push(d.itineraryParts[A3])}}for(var A3=0;A3<Ad;A3++){if(A3>=A2){o[A3]=null}}Az(A5,A2,A4.data.selectedBasketRefs);k()}function Am(A3){Z();if(A3.data.advancedShopping){var A2=A3.data.direction}else{var A2=A3.data.direction==="inbounds"?1:0}o[A2]=A3.data.selectedBasketRefs;AM[A2]=A3.data.itinerary.price;if(b(o)){if(A3.data.duplicateExists){t.fireEvent("checkSelectionDuplicates",{selectedBasketRefs:o,selectCallback:function(A5){F({data:A5,mode:A3.data.direction,selectedBasketsRef:A3.data.selectedBasketRefs,isUnbundled:true})}})}else{F({data:{selectedBasketRefs:o},mode:A3.data.direction,selectedBasketsRef:A3.data.selectedBasketRefs,isUnbundled:true})}}else{D(A3.data.itinerary,A2);var A4=[null,null];A4[A2]=A3.data.itinerary;AL(A4,true);AS({direction:A3.data.direction,brandedBasketHashRef:A3.data.selectedBasketRefs})}k();A.fire("cart:sizeChanged")}function b(A3){if(A.Lang.isArray(A3)&&A3.length>0){for(var A2=0;A2<A3.length;A2++){if(A.Lang.isUndefined(A3[A2])||A.Lang.isNull(A3[A2])){return false}}return true}return false}function y(A3){o=[A3.data.selectedBasketRefs];AM[0]=A3.data.itinerary.price;var A2={selectedBasketRefs:o};F({data:A2,mode:A3.data.direction,selectedBasketsRef:A3.data.selectedBasketRefs});k();A.fire("cart:sizeChanged")}function W(A2){if(A2.selectCallback&&A2.selectedHashRefs){A2.selectCallback({selectedBasketRefs:A2.selectedHashRefs})}}function Q(A3){var A2=t.node.one("#cart_itinerariesDetails");if(!A2){return }A.Array.each(A3,function(A4,A5){D(A4,A5)})}function D(A4,A2){A2=A2||0;var A5=t.node.one("#cart_itinerariesDetails");if(!A5){return }var A6=A5.all(".cart_itinerariesDetails_itinerary");var A3=A6.item(A2);var A7=A.Node.create(e(A4,A2));A3.replace(A7);A7.translate();A3.destroy()}function AR(A2){AK=A2.data.offerCode;AA()}function Ab(A2){AA()}function AD(A2){H(A2)}function Aa(A2){p(A2)}function X(A2){f(A2)}function Ac(A2){S(A2)}function Ah(A2){z(A2)}function AP(A2){Y(A2.data)}function u(){Z();AH()}function Ao(A2){A2.preventDefault();u()}function AH(){Aq(true);t.fireEvent("showFareRules",{forceInitialize:true,data:{allFlightsSelected:A1(),callback:function(){Aq(false)}}})}function Aq(A3){var A2=A.one("#cart-component");if(A2){var A4=A2.one("#cart-loading");if(A3){if(!A4){html='<div id="cart-loading" class="cart-loading loading"></div>';A2.prepend(html)}A2.addClass("loading")}else{if(A4){A4.remove()}A2.removeClass("loading")}}}function A1(){return d.itinerarySelected}function Ae(A2){A2.preventDefault();Aq(true);t.fireEvent("modify_search",{forceInitialize:true})}function r(A2){t.node.set("innerHTML",A.decodeHtmlEntities(A2));AG()}function AB(A4,A3){Aq(true);var A2={data:{requestPartials:[Aw]},on:{end:function(){Aq(false)},success:function(A6,A5){if(A5){At(A5.model);r(A5.partials[Aw])}if(A4.cfg&&"function"==typeof A4.cfg.callback){A4.cfg.callback()}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:A3})}function f(A2){AB(A2,"updatePriceWithAncillary")}function S(A2){AB(A2,"updatePriceWithHotel")}function z(A2){AB(A2,"updatePriceWithBNPL")}function AF(A3){var A2=[];A.Object.each(A3,function(A6,A5){var A4=new Number(A5);if(isFinite(A4)){A2.push(A6)}});return A2}function H(A4){Aq(true);A4=AF(A4);var A3={selectedSeats:A4,requestPartials:[Aw]};var A2={data:A3,on:{end:function(){Aq(false);t.fireEvent("cart-updated-with-seats-price",{})},success:function(A6,A5){if(A5){At(A5.model);r(A5.partials[Aw])}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"updatePriceWithSeatSelected"})}function p(A4){var A3={requestPartials:[Aw]};var A2={data:A3,on:{success:function(A6,A5){if(A5){At(A5.model);r(A5.partials[Aw])}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"updatePriceWithCarSelected"})}function AA(){Aq(true);var A2={data:{selectedInsuranceCode:AK,requestPartials:["initialized"]},on:{end:function(){Aq(false)},success:function(A5,A3){if(A3){At(A3.model);var A4=A3.partials.initialized;r(A4)}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"updatePriceWithInsuranceOrSlider"})}function Y(A3){Aq(true);var A2={data:{selectedInsuranceCode:AK,requestPartials:[Aw]},on:{end:function(){Aq(false)},success:function(A5,A4){if(A4){At(A4.model);r(A4.partials[Aw])}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"updatePriceWithFopSurcharge"})}function F(A5){Aq(true);var A4=[n];var A2={data:A.merge({requestPartials:A4},A5.data),on:{end:function(){Aq(false)},success:function(A8,A6){if(A6){if(A6.model.reassociateCriteriaNotMet){Ap();AS({direction:A5.mode,brandedBasketHashRef:A5.selectedBasketsRef});g();k()}else{At(A6.model);var A7=A6.partials[n];r(A7);if(A6.model.itinerarySelected){AS({direction:A5.mode,brandedBasketHashRef:A5.selectedBasketsRef});if(!A6.model.redemptionUserCannotAffordItinerary){A0()}}else{g()}AL(d.itineraryParts,A5.isUnbundled);An(d.total)}if(A.Lang.isArray(A6.messages)&&A6.messages.length>0){t.fireEvent("add-messages",{data:{messages:A6.messages}})}}}}};var A3=A5.mode||A5.mode===0?"checkPrice":"clearSelection";t.fireEvent("remove-all-component-messages");t.fireEvent("to-ajax",{cfg:A2,actionCode:A3})}function q(A2){if(!AV){AV=new A.widgets.PopupWidget(N,A2,{header:"",width:"500px",height:"130px",fixedcenter:true,constraintoviewport:false,close:false});O()}AV.show()}function I(A2){A2.preventDefault();AV.hide()}function O(){if(N){N.delegate("click",I,".differentTripTypePopup-close")}}function Ap(){if(N){var A2={data:{requestPartials:[AX]},on:{end:function(){},success:function(A4,A3){if(A3){q(A.decodeHtmlEntities(A3.partials[AX]))}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:AU})}}function Az(A5,A4,A2){Aq(true);var A3={data:{requestPartials:[n]},on:{end:function(){Aq(false)},success:function(A8,A6){if(A6){var A7=A6.partials[n];r(A7);Q(A5);d.itineraryParts=A5;AL(A5,true);AS({direction:A4,brandedBasketHashRef:A2})}}}};t.fireEvent("to-ajax",{cfg:A3,actionCode:"clearBasketPrices"})}function M(){o=[];Aq(true);var A2={data:{requestPartials:[n]},on:{end:function(){Aq(false)},success:function(A5,A3){if(A3){At(A3.model);var A4=A3.partials[n];r(A4);An(d.total)}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"clearBasketPrices"})}function L(){o=[];Aq(true);var A2={data:{requestPartials:[n]},on:{end:function(){Aq(false)},success:function(A5,A3){if(A3){At(A3.model);var A4=A3.partials[n];r(A4);An(d.total);t.fireEvent("cleared")}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"clearSelection"})}function j(){Aq(true);var A2={data:{requestPartials:[Aw]},on:{end:function(){Aq(false)},success:function(A4,A3){if(A3){At(A3.model);r(A3.partials[Aw])}}}};t.fireEvent("to-ajax",{cfg:A2,actionCode:"refresh"})}function w(){A.fire("cart:sizeChanged")}function B(A2){if(A2&&A2.priceAlternatives){return A2.priceAlternatives}return{}}function U(A3){if(!A3||!A3.segments){return null}var A4=[];for(var A5=0;A5<A3.segments.length;A5++){var A6=A3.segments[A5];var A8=A3.fareFamily;var A7=(A3.basketsRef&&A3.basketsRef[A8])?A3.basketsRef[A8]:undefined;var A2={departure:A6.departureDate,arrival:A6.arrivalDate,departureAirport:A6.departureCode,arrivalAirport:A6.arrivalCode,flightNumber:A6.flightNumber[0],airlineCode:A6.airlineCodes[0],operatingAirlineCode:A6.operatingCarrier[0],brandId:A8,bookingClass:A6.bookingClass,fareBasis:(A7&&A7.fareBasis)?A7.fareBasis:A6.fareBasis,cabinClass:(A7&&A7.classOfService[A5])?A7.classOfService[A5]:A6.classOfService[0],nextDayIndicator:A6.nextDayIndicator};A4.push(A2)}return{segments:A4}}function AL(A8,A5){var A6=[];var A4,A7;for(A4=0;A4<A8.length;A4++){var A2=U(A8[A4]);A6.push(A2)}var A3=[];if(A5&&A6.length>=2){for(A4=0;A4<A6.length;A4++){A7=B(AM[A4]);A3[A4]={parts:A6[A4]?[A6[A4]]:null,fareAmount:A7}}}else{A7=B(AM[0]);A3[0]={parts:A6,fareAmount:A7}}t.fireEvent("update-data",{data:{selectedOffers:A3}})}function An(A2){t.fireEvent("update-data",{data:{total:B(A2)}})}function V(A6){var A5=A6.currentTarget;var A4=A5.one("a");var A3=A5.ancestor("div.cart-pax");if(A3){var A2=A3.one("ol");if(A2){isOpen=A4.hasClass("open");if(isOpen){A4.removeClass("open");A4.addClass("translate");A4.setAttribute("data-wl-translate","label.cart.priceSummary.view");A2.setStyle("display","none")}else{A4.addClass("open");A4.addClass("translate");A4.setAttribute("data-wl-translate","label.cart.priceSummary.hide");A2.setStyle("display","block")}}}t.translateTemplate(AT,A5);A.fire("cart:sizeChanged");A6.preventDefault()}function AI(A2){l(A2,true)}function l(A9,A5){var A8=A9.currentTarget;var A7=A8.ancestor("li");var A3=A7.one("ol");var A4=A8.one("a").hasClass("open");var A6=A8.one("a");if(A4){A6.removeClass("open");if(!A5){A6.addClass("translate");A6.setAttribute("data-wl-translate","label.cart.priceSummary.view")}if(A3){A3.setStyle("display","none")}}else{A6.addClass("open");if(!A5){A6.addClass("translate");A6.setAttribute("data-wl-translate","label.cart.priceSummary.hide")}if(A3){A3.setStyle("display","block");A3.setAttribute("style","display: block;")}}var A2=A.all(".cartPrices");A2.each(function(BA){t.translateTemplate(AT,BA)});A.fire("cart:sizeChanged");A9.preventDefault()}function As(A5){var A6=A5.currentTarget;var A4=A6.one("a");var A3=A4.hasClass("open");var A2=A6.one("div.fare-summary");if(A3){A4.removeClass("open");A4.setAttribute("data-wl-translate","label.cart.fareSummary.viewDetails");A4.addClass("translate");if(A2){A2.setStyle("display","none")}}else{A4.addClass("open");A4.setAttribute("data-wl-translate","label.cart.fareSummary.hideDetails");A4.addClass("translate");if(A2){A2.setStyle("display","block");A2.setAttribute("style","display: block;")}}A.translateNode(A6);A.fire("cart:sizeChanged");A5.preventDefault()}function G(A3){var A4="initialized";var A2;for(A2 in A3){A4=(!A3||!A.Lang.isArray(A3.segments)||A3.segments[0].blank)?"initialized":"flightSelected"}return A4}function E(A3,A2,A5){var A4=A.all(A2);A4.each(function(A7){var A8=t.getPartial(A5,A3);var A6=A.Node.create(A8);A7.set("innerHTML",A6.get("innerHTML"));A.translateNode(A7);A6=null})}function AQ(){var A2=AN();var A3=A.all(".cart-total-price");A3.each(function(A4){A4.remove(true)});E(A2,".cart-price-details-container","_priceInfo");E(A2,"#price-summary","_flightChanged_PriceInfo");E(A2,"#price-info-exchange","_priceInfoExchangeReview")}function AN(){var A2={};A2.farePrice=Ak("fare");A2.taxesPrice=Ak("taxes");A2.discountPrice="";A2.feesPrice=Ak("fees");A2.insurancePrice="";if(AT.state==="exchangeReview"){A2.newTripTotalPrice=Ak("newTrip")}else{A2.newTripTotalPrice=Ak("newPrice")}A2.originalTripPrice=Ak("originalPrice");A2.changeFeePrice=Ak("changeFee");A2.ancillariesPrice=Ak("ancillaries");A2.seatsPrice=Ak("seats");A2.uniqueFareIndicators="";return A2}function Ak(A2){return t.getPartial("_priceInfoItem",{pricePartType:A2,pricePartLink:"",pricePartValue:""})}function Ai(A3,A2){if(!d.showClassOfServicePerSegment){return t.getPartial("_chosenClass_cabinClass",{classOfService:A.translateParametrized("Cabin."+A3),index:A2})}return""}function e(A2,A7){var BL="";var BC;var BF=G(A2);var BM=[];var BB=[];var BP=(A7==0)?"outbound":"inbound";var A8;var BG=A2.fareFamily;var A3=A2.programId;if(BG&&A2.basketsRef){A8=A2.basketsRef[BG]}if(A2.segments&&A2.segments.length>0){var BK=A2.segments[0].arrivalDate;for(BC=0;BC<A2.segments.length;BC++){var BH;var A5=A2.segments[BC];var BJ=A5.departureCode;var BD=A5.departureDate;var BO=A5.arrivalCode;var BA=A8&&A8.classOfService?A8.classOfService:A5.classOfService;var A4=A8&&A8.fareBasis?A8.fareBasis:A5.fareBasis;if(A.Lang.isArray(BA)&&BA.length>0){BH=BA[0];BL=BH}A4=A4.replace(/\/.*/g,"");var A6=(BC==0)?"depart":"connection";BM.push(AE(BJ,BK,BD,A4,A6,A7,BC,BH));BM.push(Au(A7,BC,BH));var BN=AW(A5.flightNumber[0],A5.airlineCodes[0],A5.operatingCarrier[0]);BB.push(BN);BK=A5.arrivalDate}BM.push(AE(BO,BK,BD,A4,"arrive",A7,BC))}if(A.Lang.isArray(A2.overrideClassOfService)&&A2.overrideClassOfService.length>0){BL=A2.overrideClassOfService[0]}var BQ={direction:BP,itineraryPrice:(A2&&A2.price&&A2.price.amount!=0&&!Ar)?AY(A2.price):"",partSegments:BM.join(""),flightNumbers:BB.join(" | "),fareFamily:"",cabinClass:Ai(BL,A7)};if(BG&&BG!="DEFAULT"){var BE=A.decodeHtmlEntities(AZ(BG,A3));var A9=d.fareFamilyGroupDataMap[BG];var BI=A9?A9.familyGroupId:"undefinedGroup";BQ.fareFamily=t.getPartial("_chosenClass_fareFamily",{fareFamily:Af(BG,A3),fareFamilyKey:BG,fareFamilyGroupKey:BI,fareSummary:BE,index:A7})}return t.getPartials("_flightDetails_"+BF,BQ)}function Au(A3,A5,A2){if(d.showClassOfServicePerSegment){var A4={part_index:A3,segment_index:A5+1,classOfService:A.translateParametrized("Cabin."+A2)};return t.getPartial("_segmentClassOfService",A4)}return""}function Av(A3,A5,A7){var A2=d.fareFamilyDataMap[A3];if(A2){var A4=A.getCurrentLanguage();var A6;A.Array.each(A2.localizedData,function(A8){if(A8.languageId===A4&&(A5===undefined||A8.programId===A5)){A6=A8;return }});if(A6&&A6[A7]){return A6[A7]}}return"&nbsp;"}function Af(A2,A3){return Av(A2,A3,"label")}function AZ(A2,A3){return Av(A2,A3,"marketingText")}function AW(A5,A4,A2){var A3=Ax.flightNumberFormat;var A6=A.getFullAirlineName(A2);return t.getPartial("_flightNumber_"+A3.toLowerCase(),{flightNumber:A5,airlineCode:A4,operatingCarrier:A6})}function AE(A3,A8,A9,BA,A4,A7,A5){var A2=A.airports[A3];var A6={flightCode:A3,cityCode:A2&&A2.city||A3,stateCode:A2&&A2.stateProvince||A3,countryCode:A2&&A2.country||A3,arrivalFlightDate:A8,departureFlightDate:A9,fareBasis:BA,flightType:A4,partIndex:A7,segmentIndex:A5+1};if(A4=="depart"){return t.getPartial("_segmentDetailsForDeparture",A6)}else{if(A4=="arrive"){return t.getPartial("_segmentDetailsForArrival",A6)}}return t.getPartial("_segmentDetailsForConnection",A6)}function AY(A2){return A.formatPrice(A2,{currencyCodeSeparator:"&nbsp;"})}function A0(){t.fireEvent("unblock_submit")}function k(){t.fireEvent("block_submit")}function AS(A2){setTimeout(function(){t.fireEvent("refresh_flc",{data:A2})},100)}function s(A2){t.fireEvent("refresh_lazy_flc",{data:{index:A2,selectedHashRefs:o}})}function g(){o=[];t.fireEvent("reset_selection")}function At(A2){d=A2;AT.initData=A2}}});YUI.add("wl-farerules",function(A){A.components.Farerules=function(C){var K=this;var L;var M={};var P=false;var D=C.compInstConfig;K.incomingEvents={showFareRules:B};K.onRenderState={initialized:function(Q){H(Q);if(D.tabHash){A.on("pageHtmlLoaded",function(){K.fireEvent("add_tabs_callback",{data:{tabHash:D.tabHash,additionalCallback:function(R){if(R.newValue){Q.removeClass("hidden")}else{Q.addClass("hidden")}}}})})}},ajax:function(R){if(D.enabled){function Q(){R.removeClass("loading")}R.addClass("loading");O(I,Q,true)}},overlay:function(Q){N()}};function B(R){if(C.state!="overlay"){return }var S=R.data||{};var Q=A.Lang.isFunction(S.callback)&&S.callback;O(G,Q,S.allFlightsSelected)}function O(U,R,T){var S=T?"__fareRulesContent":"__unavailableFareRules";var Q={data:{requestPartials:[S],flightsSelected:T},on:{end:R||function(){},success:function(X,W){if(W){var V=W.partials[S];U(V);H(K.node)}},failure:U}};K.fireEvent("to-ajax",{context:C,type:"farerules",cfg:Q,actionCode:"getFareRules"})}function E(Q){M[C.state]=Q.one(".fare-rules-container")}function H(R){var Q=R.one("ul");if(Q){Q.delegate("click",J,"li")}E(R);F()}function J(S){S.preventDefault();var T=S.currentTarget;if(T.hasClass("selected")){return }T.addClass("selected");T.siblings().removeClass("selected");var Q=T.get("parentNode").get("children").indexOf(T);var R=K.node.one(".yui-content").get("children");R.addClass("yui-hidden");R.item(Q).removeClass("yui-hidden")}function N(){L=new YAHOO.widget.Dialog("fare-rules-overlay",{visible:false,draggable:false,fixedcenter:"contained",zIndex:520,width:"700px",close:true});L.hideEvent.subscribe(function(){P=false;if(!M[C.state]){E(currentNode)}if(!M[C.state]){return }M[C.state].purge(true);M[C.state].set("innerHTML","")})}function I(Q){K.node.one(".fare-rules-list").set("innerHTML",A.decodeHtmlEntities(Q))}function G(Q){if(C.state=="overlay"){if(P){return }P=true;A.one("#fare-rules-overlay").removeClass("hidden");L.render(document.body);L.show();var R=A.one(L.element);if(R){K.node=R;I(Q)}L.center()}}function F(){var Q=C.compInstConfig;K.fireEvent("cssFareRules",{forceInitialize:true,data:{status:Q.status}})}}});YUI.add("event-simulate",function(A){(function(){var K=A.Lang,J=A.Array,F=K.isFunction,D=K.isString,G=K.isBoolean,P=K.isObject,O=K.isNumber,N=A.config.doc,Q={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1},M={keydown:1,keyup:1,keypress:1},C={blur:1,change:1,focus:1,resize:1,scroll:1,select:1},E={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};A.mix(E,Q);A.mix(E,M);function I(V,Z,U,S,b,R,L,a,X,d,c){if(!V){A.error("simulateKeyEvent(): Invalid target.")}if(D(Z)){Z=Z.toLowerCase();switch(Z){case"textevent":Z="keypress";break;case"keyup":case"keydown":case"keypress":break;default:A.error("simulateKeyEvent(): Event type '"+Z+"' not supported.")}}else{A.error("simulateKeyEvent(): Event type must be a string.")}if(!G(U)){U=true}if(!G(S)){S=true}if(!P(b)){b=window}if(!G(R)){R=false}if(!G(L)){L=false}if(!G(a)){a=false}if(!G(X)){X=false}if(!O(d)){d=0}if(!O(c)){c=0}var Y=null;if(F(N.createEvent)){try{Y=N.createEvent("KeyEvents");Y.initKeyEvent(Z,U,S,b,R,L,a,X,d,c)}catch(W){try{Y=N.createEvent("Events")}catch(T){Y=N.createEvent("UIEvents")}finally{Y.initEvent(Z,U,S);Y.view=b;Y.altKey=L;Y.ctrlKey=R;Y.shiftKey=a;Y.metaKey=X;Y.keyCode=d;Y.charCode=c}}V.dispatchEvent(Y)}else{if(P(N.createEventObject)){Y=N.createEventObject();Y.bubbles=U;Y.cancelable=S;Y.view=b;Y.ctrlKey=R;Y.altKey=L;Y.shiftKey=a;Y.metaKey=X;Y.keyCode=(c>0)?c:d;V.fireEvent("on"+Z,Y)}else{A.error("simulateKeyEvent(): No event simulation framework present.")}}}function B(a,f,X,U,g,Z,W,V,T,R,S,L,e,c,Y,b){if(!a){A.error("simulateMouseEvent(): Invalid target.")}if(D(f)){f=f.toLowerCase();if(!Q[f]){A.error("simulateMouseEvent(): Event type '"+f+"' not supported.")}}else{A.error("simulateMouseEvent(): Event type must be a string.")}if(!G(X)){X=true}if(!G(U)){U=(f!="mousemove")}if(!P(g)){g=window}if(!O(Z)){Z=1}if(!O(W)){W=0}if(!O(V)){V=0}if(!O(T)){T=0}if(!O(R)){R=0}if(!G(S)){S=false}if(!G(L)){L=false}if(!G(e)){e=false}if(!G(c)){c=false}if(!O(Y)){Y=0}var d=null;if(F(N.createEvent)){d=N.createEvent("MouseEvents");if(d.initMouseEvent){d.initMouseEvent(f,X,U,g,Z,W,V,T,R,S,L,e,c,Y,b)}else{d=N.createEvent("UIEvents");d.initEvent(f,X,U);d.view=g;d.detail=Z;d.screenX=W;d.screenY=V;d.clientX=T;d.clientY=R;d.ctrlKey=S;d.altKey=L;d.metaKey=c;d.shiftKey=e;d.button=Y;d.relatedTarget=b}if(b&&!d.relatedTarget){if(f=="mouseout"){d.toElement=b}else{if(f=="mouseover"){d.fromElement=b}}}a.dispatchEvent(d)}else{if(P(N.createEventObject)){d=N.createEventObject();d.bubbles=X;d.cancelable=U;d.view=g;d.detail=Z;d.screenX=W;d.screenY=V;d.clientX=T;d.clientY=R;d.ctrlKey=S;d.altKey=L;d.metaKey=c;d.shiftKey=e;switch(Y){case 0:d.button=1;break;case 1:d.button=4;break;case 2:break;default:d.button=0}d.relatedTarget=b;a.fireEvent("on"+f,d)}else{A.error("simulateMouseEvent(): No event simulation framework present.")}}}function H(W,V,S,R,L,U){if(!W){A.error("simulateUIEvent(): Invalid target.")}if(D(V)){V=V.toLowerCase();if(!C[V]){A.error("simulateUIEvent(): Event type '"+V+"' not supported.")}}else{A.error("simulateUIEvent(): Event type must be a string.")}var T=null;if(!G(S)){S=(V in E)}if(!G(R)){R=(V=="submit")}if(!P(L)){L=window}if(!O(U)){U=1}if(F(N.createEvent)){T=N.createEvent("UIEvents");T.initUIEvent(V,S,R,L,U);W.dispatchEvent(T)}else{if(P(N.createEventObject)){T=N.createEventObject();T.bubbles=S;T.cancelable=R;T.view=L;T.detail=U;W.fireEvent("on"+V,T)}else{A.error("simulateUIEvent(): No event simulation framework present.")}}}A.Event.simulate=function(S,R,L){L=L||{};if(Q[R]){B(S,R,L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,L.clientX,L.clientY,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}else{if(M[R]){I(S,R,L.bubbles,L.cancelable,L.view,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.keyCode,L.charCode)}else{if(C[R]){H(S,R,L.bubbles,L.cancelable,L.view,L.detail)}else{A.error("simulate(): Event '"+R+"' can't be simulated.")}}}}})()},"3.1.2",{requires:["event-base"]});YUI.add("node-event-simulate",function(A){A.Node.prototype.simulate=function(C,B){A.Event.simulate(A.Node.getDOMNode(this),C,B)}},"3.1.2",{requires:["node-base","event-simulate"]});YUI.add("wl-yui2-log-control",function(A){if(YAHOO&&YAHOO.widget){YAHOO.widget.Logger=function(){};YAHOO.widget.LogWriter=function(){return{log:function(){}}}}},"1.0.0");(function(){YAHOO.util.Config=function(D){if(D){this.init(D)}if(!D){YAHOO.log("No owner specified for Config object","error","Config")}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE)},checkNumber:function(D){return(!isNaN(D))},fireEvent:function(D,F){YAHOO.log("Firing Config event: "+D+"="+F,"info","Config");var E=this.config[D];if(E&&E.event){E.event.fire(F)}},addProperty:function(E,D){E=E.toLowerCase();YAHOO.log("Added property: "+E,"info","Config");this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner)}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value)}},getConfig:function(){var D={},F=this.config,G,E;for(G in F){if(B.hasOwnProperty(F,G)){E=F[G];if(E&&E.event){D[G]=E.value}}}return D},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value}else{return undefined}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true}}else{return false}},setProperty:function(E,G,D){var F;E=E.toLowerCase();YAHOO.log("setProperty: "+E+"="+G,"info","Config");if(this.queueInProgress&&!D){this.queueProperty(E,G);return true}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G])}return true}}else{return false}}},queueProperty:function(S,P){S=S.toLowerCase();YAHOO.log("queueProperty: "+S+"="+P,"info","Config");var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false}else{if(!B.isUndefined(P)){R.value=P}else{P=R.value}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P])}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break}}}}}YAHOO.log("Config event queue: "+this.outputEventQueue(),"info","Config");return true}else{return false}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D)}else{this.fireEvent(D,E.value)}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F]}}this.initialConfig=E}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F])}}},refresh:function(){var D;for(D in this.config){if(B.hasOwnProperty(this.config,D)){this.refireEvent(D)}}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.eventQueue[E]=null;this.fireEvent(D,G)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(D,E,G,H){var F=this.config[D.toLowerCase()];if(F&&F.event){if(!A.alreadySubscribed(F.event,E,G)){F.event.subscribe(E,G,H)}return true}else{return false}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G)}else{return false}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]"}return D},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", "}}return D},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true}}while(G--)}return false};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider)}());YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(A,D,C){var F=new Date(A.getTime());switch(D){case this.MONTH:var E=A.getMonth()+C;var B=0;if(E<0){while(E<0){E+=12;B-=1}}else{if(E>11){while(E>11){E-=12;B+=1}}}F.setMonth(E);F.setFullYear(A.getFullYear()+B);break;case this.DAY:this._addDays(F,C);break;case this.YEAR:F.setFullYear(A.getFullYear()+C);break;case this.WEEK:this._addDays(F,(C*7));break}return F},_addDays:function(D,C){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){if(C<0){for(var B=-128;C<B;C-=B){D.setDate(D.getDate()+B)}}else{for(var A=96;C>A;C-=A){D.setDate(D.getDate()+A)}}}D.setDate(D.getDate()+C)},subtract:function(A,C,B){return this.add(A,C,(B*-1))},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true}else{return false}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true}else{return false}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true}else{return false}},getJan1:function(A){return this.getDate(A,0,1)},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A},getWeekNumber:function(D,B,G){B=B||0;G=G||this.WEEK_ONE_JAN_DATE;var H=this.clearTime(D),L,M;if(H.getDay()===B){L=H}else{L=this.getFirstDayOfWeek(H,B)}var I=L.getFullYear();M=new Date(L.getTime()+6*this.ONE_DAY_MS);var F;if(I!==M.getFullYear()&&M.getDate()>=G){F=1}else{var E=this.clearTime(this.getDate(I,0,G)),A=this.getFirstDayOfWeek(E,B);var J=Math.round((H.getTime()-A.getTime())/this.ONE_DAY_MS);var K=J%7;var C=(J-K)/7;F=C+1}return F},getFirstDayOfWeek:function(D,A){A=A||0;var B=D.getDay(),C=(B-A+7)%7;return this.subtract(D,this.DAY,C)},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true}return C},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true}return C},findMonthStart:function(A){var B=this.getDate(A.getFullYear(),A.getMonth(),1);return B},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A},clearTime:function(A){A.setHours(12,0,0,0);return A},getDate:function(D,A,C){var B=null;if(YAHOO.lang.isUndefined(C)){C=1}if(D>=100){B=new Date(D,A,C)}else{B=new Date();B.setFullYear(D);B.setMonth(A);B.setDate(C);B.setHours(0,0,0,0)}return B}};(function(){var C=YAHOO.util.Dom,A=YAHOO.util.Event,E=YAHOO.lang,D=YAHOO.widget.DateMath;function F(I,G,H){this.init.apply(this,arguments)}F.IMG_ROOT=null;F.DATE="D";F.MONTH_DAY="MD";F.WEEKDAY="WD";F.RANGE="R";F.MONTH="M";F.DISPLAY_DAYS=42;F.STOP_RENDER="S";F.SHORT="short";F.LONG="long";F.MEDIUM="medium";F.ONE_CHAR="1char";F.DEFAULT_CONFIG={YEAR_OFFSET:{key:"year_offset",value:0,supercedes:["pagedate","selected","mindate","maxdate"]},TODAY:{key:"today",value:new Date(),supercedes:["pagedate"]},PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:[]},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",close:"Close"},supercedes:["close","title"]}};F._DEFAULT_CONFIG=F.DEFAULT_CONFIG;var B=F.DEFAULT_CONFIG;F._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};F.STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4",CSS_WITH_TITLE:"withtitle",CSS_FIXED_SIZE:"fixedsize",CSS_LINK_CLOSE:"link-close"};F._STYLES=F.STYLES;F.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(H){var G={id:null,container:null,config:null};if(H&&H.length&&H.length>0){switch(H.length){case 1:G.id=null;G.container=H[0];G.config=null;break;case 2:if(E.isObject(H[1])&&!H[1].tagName&&!(H[1] instanceof String)){G.id=null;G.container=H[0];G.config=H[1]}else{G.id=H[0];G.container=H[1];G.config=null}break;default:G.id=H[0];G.container=H[1];G.config=H[2];break}}else{this.logger.log("Invalid constructor/init arguments","error")}return G},init:function(J,H,I){var G=this._parseArgs(arguments);J=G.id;H=G.container;I=G.config;this.oDomContainer=C.get(H);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=C.generateId()}if(!J){J=this.oDomContainer.id+"_t"}this.id=J;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("Calendar "+this.id);this.initEvents();this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.initStyles();C.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);C.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(I){this.cfg.applyConfig(I,true)}this.cfg.fireQueue();this.today=this.cfg.getProperty("today")},configIframe:function(I,H,J){var G=H[0];if(!this.parent){if(C.inDocument(this.oDomContainer)){if(G){var K=C.getStyle(this.oDomContainer,"position");if(K=="absolute"||K=="relative"){if(!C.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";C.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6){C.addClass(this.iframe,this.Style.CSS_FIXED_SIZE)}this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)}}}else{if(this.iframe){if(this.iframe.parentNode){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null}}}}},configTitle:function(H,G,I){var K=G[0];if(K){this.createTitleBar(K)}else{var J=this.cfg.getProperty(B.CLOSE.key);if(!J){this.removeTitleBar()}else{this.createTitleBar("&#160;")}}},configClose:function(H,G,I){var K=G[0],J=this.cfg.getProperty(B.TITLE.key);if(K){if(!J){this.createTitleBar("&#160;")}this.createCloseButton()}else{this.removeCloseButton();if(!J){this.removeTitleBar()}}},initEvents:function(){var G=F._EVENT_TYPES,I=YAHOO.util.CustomEvent,H=this;H.beforeSelectEvent=new I(G.BEFORE_SELECT);H.selectEvent=new I(G.SELECT);H.beforeDeselectEvent=new I(G.BEFORE_DESELECT);H.deselectEvent=new I(G.DESELECT);H.changePageEvent=new I(G.CHANGE_PAGE);H.beforeRenderEvent=new I(G.BEFORE_RENDER);H.renderEvent=new I(G.RENDER);H.beforeDestroyEvent=new I(G.BEFORE_DESTROY);H.destroyEvent=new I(G.DESTROY);H.resetEvent=new I(G.RESET);H.clearEvent=new I(G.CLEAR);H.beforeShowEvent=new I(G.BEFORE_SHOW);H.showEvent=new I(G.SHOW);H.beforeHideEvent=new I(G.BEFORE_HIDE);H.hideEvent=new I(G.HIDE);H.beforeShowNavEvent=new I(G.BEFORE_SHOW_NAV);H.showNavEvent=new I(G.SHOW_NAV);H.beforeHideNavEvent=new I(G.BEFORE_HIDE_NAV);H.hideNavEvent=new I(G.HIDE_NAV);H.beforeRenderNavEvent=new I(G.BEFORE_RENDER_NAV);H.renderNavEvent=new I(G.RENDER_NAV);H.beforeSelectEvent.subscribe(H.onBeforeSelect,this,true);H.selectEvent.subscribe(H.onSelect,this,true);H.beforeDeselectEvent.subscribe(H.onBeforeDeselect,this,true);H.deselectEvent.subscribe(H.onDeselect,this,true);H.changePageEvent.subscribe(H.onChangePage,this,true);H.renderEvent.subscribe(H.onRender,this,true);H.resetEvent.subscribe(H.onReset,this,true);H.clearEvent.subscribe(H.onClear,this,true)},doPreviousMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.previousMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_LEFT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doNextMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.nextMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_RIGHT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doSelectCell:function(M,G){var R,O,I,L;var N=A.getTarget(M),H=N.tagName.toLowerCase(),K=false;while(H!="td"&&!C.hasClass(N,G.Style.CSS_CELL_SELECTABLE)){if(!K&&H=="a"&&C.hasClass(N,G.Style.CSS_CELL_SELECTOR)){K=true}N=N.parentNode;H=N.tagName.toLowerCase();if(N==this.oDomContainer||H=="html"){return }}if(K){A.preventDefault(M)}R=N;if(C.hasClass(R,G.Style.CSS_CELL_SELECTABLE)){L=G.getIndexFromId(R.id);if(L>-1){O=G.cellDates[L];if(O){I=D.getDate(O[0],O[1]-1,O[2]);var Q;G.logger.log("Selecting cell "+L+" via click","info");if(G.Options.MULTI_SELECT){Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}var J=G.cellDates[L];var P=G._indexOfSelectedFieldArray(J);if(P>-1){G.deselectCell(L)}else{G.selectCell(L)}}else{Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}G.selectCell(L)}}}}},doCellMouseOver:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.addClass(G,H.Style.CSS_CELL_HOVER)}},doCellMouseOut:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.removeClass(G,H.Style.CSS_CELL_HOVER)}},setupConfig:function(){var G=this.cfg;G.addProperty(B.TODAY.key,{value:new Date(B.TODAY.value.getTime()),supercedes:B.TODAY.supercedes,handler:this.configToday,suppressEvent:true});G.addProperty(B.PAGEDATE.key,{value:B.PAGEDATE.value||new Date(B.TODAY.value.getTime()),handler:this.configPageDate});G.addProperty(B.SELECTED.key,{value:B.SELECTED.value.concat(),handler:this.configSelected});G.addProperty(B.TITLE.key,{value:B.TITLE.value,handler:this.configTitle});G.addProperty(B.CLOSE.key,{value:B.CLOSE.value,handler:this.configClose});G.addProperty(B.IFRAME.key,{value:B.IFRAME.value,handler:this.configIframe,validator:G.checkBoolean});G.addProperty(B.MINDATE.key,{value:B.MINDATE.value,handler:this.configMinDate});G.addProperty(B.MAXDATE.key,{value:B.MAXDATE.value,handler:this.configMaxDate});G.addProperty(B.MULTI_SELECT.key,{value:B.MULTI_SELECT.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.START_WEEKDAY.key,{value:B.START_WEEKDAY.value,handler:this.configOptions,validator:G.checkNumber});G.addProperty(B.SHOW_WEEKDAYS.key,{value:B.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_HEADER.key,{value:B.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_FOOTER.key,{value:B.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.HIDE_BLANK_WEEKS.key,{value:B.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.NAV_ARROW_LEFT.key,{value:B.NAV_ARROW_LEFT.value,handler:this.configOptions});G.addProperty(B.NAV_ARROW_RIGHT.key,{value:B.NAV_ARROW_RIGHT.value,handler:this.configOptions});G.addProperty(B.MONTHS_SHORT.key,{value:B.MONTHS_SHORT.value,handler:this.configLocale});G.addProperty(B.MONTHS_LONG.key,{value:B.MONTHS_LONG.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_1CHAR.key,{value:B.WEEKDAYS_1CHAR.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_SHORT.key,{value:B.WEEKDAYS_SHORT.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_MEDIUM.key,{value:B.WEEKDAYS_MEDIUM.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_LONG.key,{value:B.WEEKDAYS_LONG.value,handler:this.configLocale});var H=function(){G.refireEvent(B.LOCALE_MONTHS.key);G.refireEvent(B.LOCALE_WEEKDAYS.key)};G.subscribeToConfigEvent(B.START_WEEKDAY.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_LONG.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_1CHAR.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_MEDIUM.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_LONG.key,H,this,true);G.addProperty(B.LOCALE_MONTHS.key,{value:B.LOCALE_MONTHS.value,handler:this.configLocaleValues});G.addProperty(B.LOCALE_WEEKDAYS.key,{value:B.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});G.addProperty(B.YEAR_OFFSET.key,{value:B.YEAR_OFFSET.value,supercedes:B.YEAR_OFFSET.supercedes,handler:this.configLocale});G.addProperty(B.DATE_DELIMITER.key,{value:B.DATE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_FIELD_DELIMITER.key,{value:B.DATE_FIELD_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_RANGE_DELIMITER.key,{value:B.DATE_RANGE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.MY_MONTH_POSITION.key,{value:B.MY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_YEAR_POSITION.key,{value:B.MY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_MONTH_POSITION.key,{value:B.MD_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_DAY_POSITION.key,{value:B.MD_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_MONTH_POSITION.key,{value:B.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_DAY_POSITION.key,{value:B.MDY_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_YEAR_POSITION.key,{value:B.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_POSITION.key,{value:B.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_YEAR_POSITION.key,{value:B.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_SUFFIX.key,{value:B.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});G.addProperty(B.MY_LABEL_YEAR_SUFFIX.key,{value:B.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});G.addProperty(B.NAV.key,{value:B.NAV.value,handler:this.configNavigator});G.addProperty(B.STRINGS.key,{value:B.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:B.STRINGS.supercedes})},configStrings:function(H,G,I){var J=E.merge(B.STRINGS.value,G[0]);this.cfg.setProperty(B.STRINGS.key,J,true)},configPageDate:function(H,G,I){this.cfg.setProperty(B.PAGEDATE.key,this._parsePageDate(G[0]),true)},configMinDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MINDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configMaxDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MAXDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configToday:function(I,H,J){var K=H[0];if(E.isString(K)){K=this._parseDate(K)}var G=D.clearTime(K);if(!this.cfg.initialConfig[B.PAGEDATE.key]){this.cfg.setProperty(B.PAGEDATE.key,G)}this.today=G;this.cfg.setProperty(B.TODAY.key,G,true)},configSelected:function(I,G,K){var H=G[0],J=B.SELECTED.key;if(H){if(E.isString(H)){this.cfg.setProperty(J,this._parseDates(H),true)}}if(!this._selectedDates){this._selectedDates=this.cfg.getProperty(J)}},configOptions:function(H,G,I){this.Options[H.toUpperCase()]=G[0]},configLocale:function(H,G,I){this.Locale[H.toUpperCase()]=G[0];this.cfg.refireEvent(B.LOCALE_MONTHS.key);this.cfg.refireEvent(B.LOCALE_WEEKDAYS.key)},configLocaleValues:function(J,I,K){J=J.toLowerCase();var M=I[0],H=this.cfg,N=this.Locale;switch(J){case B.LOCALE_MONTHS.key:switch(M){case F.SHORT:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_SHORT.key).concat();break;case F.LONG:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_LONG.key).concat();break}break;case B.LOCALE_WEEKDAYS.key:switch(M){case F.ONE_CHAR:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_1CHAR.key).concat();break;case F.SHORT:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_SHORT.key).concat();break;case F.MEDIUM:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_MEDIUM.key).concat();break;case F.LONG:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_LONG.key).concat();break}var L=H.getProperty(B.START_WEEKDAY.key);if(L>0){for(var G=0;G<L;++G){N.LOCALE_WEEKDAYS.push(N.LOCALE_WEEKDAYS.shift())}}break}},configNavigator:function(H,G,I){var J=G[0];if(YAHOO.widget.CalendarNavigator&&(J===true||E.isObject(J))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);this.beforeRenderEvent.subscribe(function(){if(!this.pages){this.oNavigator.erase()}},this,true)}}else{if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null}}},initStyles:function(){var G=F.STYLES;this.Style={CSS_ROW_HEADER:G.CSS_ROW_HEADER,CSS_ROW_FOOTER:G.CSS_ROW_FOOTER,CSS_CELL:G.CSS_CELL,CSS_CELL_SELECTOR:G.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:G.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:G.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:G.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:G.CSS_CELL_TODAY,CSS_CELL_OOM:G.CSS_CELL_OOM,CSS_CELL_OOB:G.CSS_CELL_OOB,CSS_HEADER:G.CSS_HEADER,CSS_HEADER_TEXT:G.CSS_HEADER_TEXT,CSS_BODY:G.CSS_BODY,CSS_WEEKDAY_CELL:G.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:G.CSS_WEEKDAY_ROW,CSS_FOOTER:G.CSS_FOOTER,CSS_CALENDAR:G.CSS_CALENDAR,CSS_SINGLE:G.CSS_SINGLE,CSS_CONTAINER:G.CSS_CONTAINER,CSS_NAV_LEFT:G.CSS_NAV_LEFT,CSS_NAV_RIGHT:G.CSS_NAV_RIGHT,CSS_NAV:G.CSS_NAV,CSS_CLOSE:G.CSS_CLOSE,CSS_CELL_TOP:G.CSS_CELL_TOP,CSS_CELL_LEFT:G.CSS_CELL_LEFT,CSS_CELL_RIGHT:G.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:G.CSS_CELL_BOTTOM,CSS_CELL_HOVER:G.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:G.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:G.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:G.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:G.CSS_CELL_HIGHLIGHT4,CSS_WITH_TITLE:G.CSS_WITH_TITLE,CSS_FIXED_SIZE:G.CSS_FIXED_SIZE,CSS_LINK_CLOSE:G.CSS_LINK_CLOSE}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty(B.PAGEDATE.key))},_buildMonthLabel:function(G){var I=this.Locale.LOCALE_MONTHS[G.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX,H=(G.getFullYear()+this.Locale.YEAR_OFFSET)+this.Locale.MY_LABEL_YEAR_SUFFIX;if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1){return H+I}else{return I+H}},buildDayLabel:function(G){return G.getDate()},createTitleBar:function(G){var H=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");H.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;H.innerHTML=G;this.oDomContainer.insertBefore(H,this.oDomContainer.firstChild);C.addClass(this.oDomContainer,this.Style.CSS_WITH_TITLE);return H},removeTitleBar:function(){var G=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}C.removeClass(this.oDomContainer,this.Style.CSS_WITH_TITLE)},createCloseButton:function(){var K=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,J=this.Style.CSS_LINK_CLOSE,M="us/my/bn/x_d.gif",L=C.getElementsByClassName(J,"a",this.oDomContainer)[0],G=this.cfg.getProperty(B.STRINGS.key),H=(G&&G.close)?G.close:"";if(!L){L=document.createElement("a");A.addListener(L,"click",function(O,N){N.hide();A.preventDefault(O)},this)}L.href="#";L.className=J;if(F.IMG_ROOT!==null){var I=C.getElementsByClassName(K,"img",L)[0]||document.createElement("img");I.src=F.IMG_ROOT+M;I.className=K;L.appendChild(I)}else{L.innerHTML='<span class="'+K+" "+this.Style.CSS_CLOSE+'">'+H+"</span>"}this.oDomContainer.appendChild(L);return L},removeCloseButton:function(){var G=C.getElementsByClassName(this.Style.CSS_LINK_CLOSE,"a",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}},renderHeader:function(Q){this.logger.log("Rendering header","render");var P=7,O="us/tr/callt.gif",G="us/tr/calrt.gif",N=this.cfg,K=N.getProperty(B.PAGEDATE.key),L=N.getProperty(B.STRINGS.key),V=(L&&L.previousMonth)?L.previousMonth:"",H=(L&&L.nextMonth)?L.nextMonth:"",M;if(N.getProperty(B.SHOW_WEEK_HEADER.key)){P+=1}if(N.getProperty(B.SHOW_WEEK_FOOTER.key)){P+=1}Q[Q.length]="<thead>";Q[Q.length]="<tr>";Q[Q.length]='<th colspan="'+P+'" class="'+this.Style.CSS_HEADER_TEXT+'">';Q[Q.length]='<div class="'+this.Style.CSS_HEADER+'">';var X,U=false;if(this.parent){if(this.index===0){X=true}if(this.index==(this.parent.cfg.getProperty("pages")-1)){U=true}}else{X=true;U=true}if(X){M=this._buildMonthLabel(D.subtract(K,D.MONTH,1));var R=N.getProperty(B.NAV_ARROW_LEFT.key);if(R===null&&F.IMG_ROOT!==null){R=F.IMG_ROOT+O}var I=(R===null)?"":' style="background-image:url('+R+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_LEFT+'"'+I+' href="#">'+V+" ("+M+")</a>"}var W=this.buildMonthLabel();var S=this.parent||this;if(S.cfg.getProperty("navigator")){W='<a class="'+this.Style.CSS_NAV+'" href="#">'+W+"</a>"}Q[Q.length]=W;if(U){M=this._buildMonthLabel(D.add(K,D.MONTH,1));var T=N.getProperty(B.NAV_ARROW_RIGHT.key);if(T===null&&F.IMG_ROOT!==null){T=F.IMG_ROOT+G}var J=(T===null)?"":' style="background-image:url('+T+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+J+' href="#">'+H+" ("+M+")</a>"}Q[Q.length]="</div>\n</th>\n</tr>";if(N.getProperty(B.SHOW_WEEKDAYS.key)){Q=this.buildWeekdays(Q)}Q[Q.length]="</thead>";return Q},buildWeekdays:function(H){H[H.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(B.SHOW_WEEK_HEADER.key)){H[H.length]="<th>&#160;</th>"}for(var G=0;G<this.Locale.LOCALE_WEEKDAYS.length;++G){H[H.length]='<th class="'+this.Style.CSS_WEEKDAY_CELL+'">'+this.Locale.LOCALE_WEEKDAYS[G]+"</th>"}if(this.cfg.getProperty(B.SHOW_WEEK_FOOTER.key)){H[H.length]="<th>&#160;</th>"}H[H.length]="</tr>";return H},renderBody:function(m,k){this.logger.log("Rendering body","render");var AK=this.cfg.getProperty(B.START_WEEKDAY.key);this.preMonthDays=m.getDay();if(AK>0){this.preMonthDays-=AK}if(this.preMonthDays<0){this.preMonthDays+=7}this.monthDays=D.findMonthEnd(m).getDate();this.postMonthDays=F.DISPLAY_DAYS-this.preMonthDays-this.monthDays;this.logger.log(this.preMonthDays+" preciding out-of-month days","render");this.logger.log(this.monthDays+" month days","render");this.logger.log(this.postMonthDays+" post-month days","render");m=D.subtract(m,D.DAY,this.preMonthDays);this.logger.log("Calendar page starts on "+m,"render");var Y,N,M="w",f="_cell",c="wd",w="d",P,u,AC=this.today,O=this.cfg,W=AC.getFullYear(),v=AC.getMonth(),J=AC.getDate(),AB=O.getProperty(B.PAGEDATE.key),I=O.getProperty(B.HIDE_BLANK_WEEKS.key),j=O.getProperty(B.SHOW_WEEK_FOOTER.key),b=O.getProperty(B.SHOW_WEEK_HEADER.key),U=O.getProperty(B.MINDATE.key),a=O.getProperty(B.MAXDATE.key),T=this.Locale.YEAR_OFFSET;if(U){U=D.clearTime(U)}if(a){a=D.clearTime(a)}k[k.length]='<tbody class="m'+(AB.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var AI=0,Q=document.createElement("div"),l=document.createElement("td");Q.appendChild(l);var AA=this.parent||this;for(var AE=0;AE<6;AE++){Y=D.getWeekNumber(m,AK);N=M+Y;if(AE!==0&&I===true&&m.getMonth()!=AB.getMonth()){break}else{k[k.length]='<tr class="'+N+'">';if(b){k=this.renderRowHeader(Y,k)}for(var AJ=0;AJ<7;AJ++){P=[];this.clearElement(l);l.className=this.Style.CSS_CELL;l.id=this.id+f+AI;this.logger.log("Rendering cell "+l.id+" ("+m.getFullYear()+T+"-"+(m.getMonth()+1)+"-"+m.getDate()+")","cellrender");if(m.getDate()==J&&m.getMonth()==v&&m.getFullYear()==W){P[P.length]=AA.renderCellStyleToday}var Z=[m.getFullYear(),m.getMonth()+1,m.getDate()];this.cellDates[this.cellDates.length]=Z;if(m.getMonth()!=AB.getMonth()){P[P.length]=AA.renderCellNotThisMonth}else{C.addClass(l,c+m.getDay());C.addClass(l,w+m.getDate());for(var AD=0;AD<this.renderStack.length;++AD){u=null;var y=this.renderStack[AD],AL=y[0],H,e,L;switch(AL){case F.DATE:H=y[1][1];e=y[1][2];L=y[1][0];if(m.getMonth()+1==H&&m.getDate()==e&&m.getFullYear()==L){u=y[2];this.renderStack.splice(AD,1)}break;case F.MONTH_DAY:H=y[1][0];e=y[1][1];if(m.getMonth()+1==H&&m.getDate()==e){u=y[2];this.renderStack.splice(AD,1)}break;case F.RANGE:var h=y[1][0],g=y[1][1],n=h[1],S=h[2],X=h[0],AH=D.getDate(X,n-1,S),K=g[1],q=g[2],G=g[0],AG=D.getDate(G,K-1,q);if(m.getTime()>=AH.getTime()&&m.getTime()<=AG.getTime()){u=y[2];if(m.getTime()==AG.getTime()){this.renderStack.splice(AD,1)}}break;case F.WEEKDAY:var R=y[1][0];if(m.getDay()+1==R){u=y[2]}break;case F.MONTH:H=y[1][0];if(m.getMonth()+1==H){u=y[2]}break}if(u){P[P.length]=u}}}if(this._indexOfSelectedFieldArray(Z)>-1){P[P.length]=AA.renderCellStyleSelected}if((U&&(m.getTime()<U.getTime()))||(a&&(m.getTime()>a.getTime()))){P[P.length]=AA.renderOutOfBoundsDate}else{P[P.length]=AA.styleCellDefault;P[P.length]=AA.renderCellDefault}for(var z=0;z<P.length;++z){this.logger.log("renderer["+z+"] for ("+m.getFullYear()+T+"-"+(m.getMonth()+1)+"-"+m.getDate()+")","cellrender");if(P[z].call(AA,m,l)==F.STOP_RENDER){break}}m.setTime(m.getTime()+D.ONE_DAY_MS);m=D.clearTime(m);if(AI>=0&&AI<=6){C.addClass(l,this.Style.CSS_CELL_TOP)}if((AI%7)===0){C.addClass(l,this.Style.CSS_CELL_LEFT)}if(((AI+1)%7)===0){C.addClass(l,this.Style.CSS_CELL_RIGHT)}var o=this.postMonthDays;if(I&&o>=7){var V=Math.floor(o/7);for(var AF=0;AF<V;++AF){o-=7}}if(AI>=((this.preMonthDays+o+this.monthDays)-7)){C.addClass(l,this.Style.CSS_CELL_BOTTOM)}k[k.length]=Q.innerHTML;AI++}if(j){k=this.renderRowFooter(Y,k)}k[k.length]="</tr>"}}k[k.length]="</tbody>";return k},renderFooter:function(G){return G},render:function(){this.beforeRenderEvent.fire();var H=D.findMonthStart(this.cfg.getProperty(B.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;A.purgeElement(this.oDomContainer,true);var G=[];G[G.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+(H.getFullYear()+this.Locale.YEAR_OFFSET)+'" id="'+this.id+'">';G=this.renderHeader(G);G=this.renderBody(H,G);G=this.renderFooter(G);G[G.length]="</table>";this.oDomContainer.innerHTML=G.join("\n");this.applyListeners();this.cells=C.getElementsByClassName(this.Style.CSS_CELL,"td",this.id);this.cfg.refireEvent(B.TITLE.key);this.cfg.refireEvent(B.CLOSE.key);this.cfg.refireEvent(B.IFRAME.key);this.renderEvent.fire()},applyListeners:function(){var P=this.oDomContainer,H=this.parent||this,L="a",S="click";var M=C.getElementsByClassName(this.Style.CSS_NAV_LEFT,L,P),I=C.getElementsByClassName(this.Style.CSS_NAV_RIGHT,L,P);if(M&&M.length>0){this.linkLeft=M[0];A.addListener(this.linkLeft,S,this.doPreviousMonthNav,H,true)}if(I&&I.length>0){this.linkRight=I[0];A.addListener(this.linkRight,S,this.doNextMonthNav,H,true)}if(H.cfg.getProperty("navigator")!==null){this.applyNavListeners()}if(this.domEventMap){var J,G;for(var R in this.domEventMap){if(E.hasOwnProperty(this.domEventMap,R)){var N=this.domEventMap[R];if(!(N instanceof Array)){N=[N]}for(var K=0;K<N.length;K++){var Q=N[K];G=C.getElementsByClassName(R,Q.tag,this.oDomContainer);for(var O=0;O<G.length;O++){J=G[O];A.addListener(J,Q.event,Q.handler,Q.scope,Q.correct)}}}}}A.addListener(this.oDomContainer,"click",this.doSelectCell,this);A.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);A.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var H=this.parent||this,I=this,G=C.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);if(G.length>0){A.addListener(G,"click",function(N,M){var L=A.getTarget(N);if(this===L||C.isAncestor(this,L)){A.preventDefault(N)}var J=H.oNavigator;if(J){var K=I.cfg.getProperty("pagedate");J.setYear(K.getFullYear()+I.Locale.YEAR_OFFSET);J.setMonth(K.getMonth());J.show()}})}},getDateByCellId:function(H){var G=this.getDateFieldsByCellId(H);return(G)?D.getDate(G[0],G[1]-1,G[2]):null},getDateFieldsByCellId:function(G){G=this.getIndexFromId(G);return(G>-1)?this.cellDates[G]:null},getCellIndex:function(I){var H=-1;if(I){var G=I.getMonth(),N=I.getFullYear(),M=I.getDate(),K=this.cellDates;for(var J=0;J<K.length;++J){var L=K[J];if(L[0]===N&&L[1]===G+1&&L[2]===M){H=J;break}}}return H},getIndexFromId:function(I){var H=-1,G=I.lastIndexOf("_cell");if(G>-1){H=parseInt(I.substring(G+5),10)}return H},renderOutOfBoundsDate:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOB);G.innerHTML=H.getDate();return F.STOP_RENDER},renderRowHeader:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_HEADER+'">'+H+"</th>";return G},renderRowFooter:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_FOOTER+'">'+H+"</th>";return G},renderCellDefault:function(H,G){G.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(H)+"</a>"},styleCellDefault:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(H,G){C.addClass(G,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTED)},renderCellNotThisMonth:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOM);G.innerHTML=H.getDate();return F.STOP_RENDER},renderBodyCellRestricted:function(H,G){C.addClass(G,this.Style.CSS_CELL);C.addClass(G,this.Style.CSS_CELL_RESTRICTED);G.innerHTML=H.getDate();return F.STOP_RENDER},addMonths:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.MONTH,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractMonths:function(G){this.addMonths(-1*G)},addYears:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.YEAR,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractYears:function(G){this.addYears(-1*G)},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.addMonths(-1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.addYears(-1)},reset:function(){this.cfg.resetProperty(B.SELECTED.key);this.cfg.resetProperty(B.PAGEDATE.key);this.resetEvent.fire()},clear:function(){this.cfg.setProperty(B.SELECTED.key,[]);this.cfg.setProperty(B.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire()},select:function(I){this.logger.log("Select: "+I,"info");var L=this._toFieldArray(I),H=[],K=[],M=B.SELECTED.key;this.logger.log("Selection field array: "+L,"info");for(var G=0;G<L.length;++G){var J=L[G];if(!this.isDateOOB(this._toDate(J))){if(H.length===0){this.beforeSelectEvent.fire();K=this.cfg.getProperty(M)}H.push(J);if(this._indexOfSelectedFieldArray(J)==-1){K[K.length]=J}}}if(H.length===0){this.logger.log("All provided dates were OOB. beforeSelect and select events not fired","info")}if(H.length>0){if(this.parent){this.parent.cfg.setProperty(M,K)}else{this.cfg.setProperty(M,K)}this.selectEvent.fire(H)}return this.getSelectedDates()},selectCell:function(J){var H=this.cells[J],N=this.cellDates[J],M=this._toDate(N),I=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);this.logger.log("Select: "+M,"info");if(!I){this.logger.log("The cell at cellIndex:"+J+" is not a selectable cell. beforeSelect, select events not fired","info")}if(I){this.beforeSelectEvent.fire();var L=B.SELECTED.key;var K=this.cfg.getProperty(L);var G=N.concat();if(this._indexOfSelectedFieldArray(G)==-1){K[K.length]=G}if(this.parent){this.parent.cfg.setProperty(L,K)}else{this.cfg.setProperty(L,K)}this.renderCellStyleSelected(M,H);this.selectEvent.fire([G]);this.doCellMouseOut.call(H,null,this)}return this.getSelectedDates()},deselect:function(K){this.logger.log("Deselect: "+K,"info");var G=this._toFieldArray(K),J=[],M=[],N=B.SELECTED.key;this.logger.log("Deselection field array: "+G,"info");for(var H=0;H<G.length;++H){var L=G[H];if(!this.isDateOOB(this._toDate(L))){if(J.length===0){this.beforeDeselectEvent.fire();M=this.cfg.getProperty(N)}J.push(L);var I=this._indexOfSelectedFieldArray(L);if(I!=-1){M.splice(I,1)}}}if(J.length===0){this.logger.log("All provided dates were OOB. beforeDeselect and deselect events not fired")}if(J.length>0){if(this.parent){this.parent.cfg.setProperty(N,M)}else{this.cfg.setProperty(N,M)}this.deselectEvent.fire(J)}return this.getSelectedDates()},deselectCell:function(K){var H=this.cells[K],N=this.cellDates[K],I=this._indexOfSelectedFieldArray(N);var J=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);if(!J){this.logger.log("The cell at cellIndex:"+K+" is not a selectable/deselectable cell","info")}if(J){this.beforeDeselectEvent.fire();var L=this.cfg.getProperty(B.SELECTED.key),M=this._toDate(N),G=N.concat();if(I>-1){if(this.cfg.getProperty(B.PAGEDATE.key).getMonth()==M.getMonth()&&this.cfg.getProperty(B.PAGEDATE.key).getFullYear()==M.getFullYear()){C.removeClass(H,this.Style.CSS_CELL_SELECTED)}L.splice(I,1)}if(this.parent){this.parent.cfg.setProperty(B.SELECTED.key,L)}else{this.cfg.setProperty(B.SELECTED.key,L)}this.deselectEvent.fire([G])}return this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();var J=B.SELECTED.key,G=this.cfg.getProperty(J),H=G.length,I=G.concat();if(this.parent){this.parent.cfg.setProperty(J,[])}else{this.cfg.setProperty(J,[])}if(H>0){this.deselectEvent.fire(I)}return this.getSelectedDates()},_toFieldArray:function(H){var G=[];if(H instanceof Date){G=[[H.getFullYear(),H.getMonth()+1,H.getDate()]]}else{if(E.isString(H)){G=this._parseDates(H)}else{if(E.isArray(H)){for(var I=0;I<H.length;++I){var J=H[I];G[G.length]=[J.getFullYear(),J.getMonth()+1,J.getDate()]}}}}return G},toDate:function(G){return this._toDate(G)},_toDate:function(G){if(G instanceof Date){return G}else{return D.getDate(G[0],G[1]-1,G[2])}},_fieldArraysAreEqual:function(I,H){var G=false;if(I[0]==H[0]&&I[1]==H[1]&&I[2]==H[2]){G=true}return G},_indexOfSelectedFieldArray:function(K){var J=-1,G=this.cfg.getProperty(B.SELECTED.key);for(var I=0;I<G.length;++I){var H=G[I];if(K[0]==H[0]&&K[1]==H[1]&&K[2]==H[2]){J=I;break}}return J},isDateOOM:function(G){return(G.getMonth()!=this.cfg.getProperty(B.PAGEDATE.key).getMonth())},isDateOOB:function(I){var J=this.cfg.getProperty(B.MINDATE.key),K=this.cfg.getProperty(B.MAXDATE.key),H=D;if(J){J=H.clearTime(J)}if(K){K=H.clearTime(K)}var G=new Date(I.getTime());G=H.clearTime(G);return((J&&G.getTime()<J.getTime())||(K&&G.getTime()>K.getTime()))},_parsePageDate:function(G){var J;if(G){if(G instanceof Date){J=D.findMonthStart(G)}else{var K,I,H;H=G.split(this.cfg.getProperty(B.DATE_FIELD_DELIMITER.key));K=parseInt(H[this.cfg.getProperty(B.MY_MONTH_POSITION.key)-1],10)-1;I=parseInt(H[this.cfg.getProperty(B.MY_YEAR_POSITION.key)-1],10)-this.Locale.YEAR_OFFSET;J=D.getDate(I,K,1)}}else{J=D.getDate(this.today.getFullYear(),this.today.getMonth(),1)}return J},onBeforeSelect:function(){if(this.cfg.getProperty(B.MULTI_SELECT.key)===false){if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);this.parent.deselectAll()}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll()}}},onSelect:function(G){},onBeforeDeselect:function(){},onDeselect:function(G){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return true},_parseDate:function(I){var J=I.split(this.Locale.DATE_FIELD_DELIMITER),G;if(J.length==2){G=[J[this.Locale.MD_MONTH_POSITION-1],J[this.Locale.MD_DAY_POSITION-1]];G.type=F.MONTH_DAY}else{G=[J[this.Locale.MDY_YEAR_POSITION-1]-this.Locale.YEAR_OFFSET,J[this.Locale.MDY_MONTH_POSITION-1],J[this.Locale.MDY_DAY_POSITION-1]];G.type=F.DATE}for(var H=0;H<G.length;H++){G[H]=parseInt(G[H],10)}return G},_parseDates:function(H){var O=[],N=H.split(this.Locale.DATE_DELIMITER);for(var M=0;M<N.length;++M){var L=N[M];if(L.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=-1){var G=L.split(this.Locale.DATE_RANGE_DELIMITER),K=this._parseDate(G[0]),P=this._parseDate(G[1]),J=this._parseRange(K,P);O=O.concat(J)}else{var I=this._parseDate(L);O.push(I)}}return O},_parseRange:function(G,K){var H=D.add(D.getDate(G[0],G[1]-1,G[2]),D.DAY,1),J=D.getDate(K[0],K[1]-1,K[2]),I=[];I.push(G);while(H.getTime()<=J.getTime()){I.push([H.getFullYear(),H.getMonth()+1,H.getDate()]);H=D.add(H,D.DAY,1)}return I},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[];this.renderStack=[]},clearElement:function(G){G.innerHTML="&#160;";G.className=""},addRenderer:function(G,H){var J=this._parseDates(G);for(var I=0;I<J.length;++I){var K=J[I];if(K.length==2){if(K[0] instanceof Array){this._addRenderer(F.RANGE,K,H)}else{this._addRenderer(F.MONTH_DAY,K,H)}}else{if(K.length==3){this._addRenderer(F.DATE,K,H)}}}},_addRenderer:function(H,I,G){var J=[H,I,G];this.renderStack.unshift(J);this._renderStack=this.renderStack.concat()},addMonthRenderer:function(H,G){this._addRenderer(F.MONTH,[H],G)},addWeekdayRenderer:function(H,G){this._addRenderer(F.WEEKDAY,[H],G)},clearAllBodyCellStyles:function(G){for(var H=0;H<this.cells.length;++H){C.removeClass(this.cells[H],G)}},setMonth:function(I){var G=B.PAGEDATE.key,H=this.cfg.getProperty(G);H.setMonth(parseInt(I,10));this.cfg.setProperty(G,H)},setYear:function(H){var G=B.PAGEDATE.key,I=this.cfg.getProperty(G);I.setFullYear(parseInt(H,10)-this.Locale.YEAR_OFFSET);this.cfg.setProperty(G,I)},getSelectedDates:function(){var I=[],H=this.cfg.getProperty(B.SELECTED.key);for(var K=0;K<H.length;++K){var J=H[K];var G=D.getDate(J[0],J[1]-1,J[2]);I.push(G)}I.sort(function(M,L){return M-L});return I},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire()}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display="block";this.showEvent.fire()}},browser:(function(){var G=navigator.userAgent.toLowerCase();if(G.indexOf("opera")!=-1){return"opera"}else{if(G.indexOf("msie 7")!=-1){return"ie7"}else{if(G.indexOf("msie")!=-1){return"ie"}else{if(G.indexOf("safari")!=-1){return"safari"}else{if(G.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}})(),toString:function(){return"Calendar "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var G=this;if(G.navigator){G.navigator.destroy()}if(G.cfg){G.cfg.destroy()}A.purgeElement(G.oDomContainer,true);C.removeClass(G.oDomContainer,G.Style.CSS_WITH_TITLE);C.removeClass(G.oDomContainer,G.Style.CSS_CONTAINER);C.removeClass(G.oDomContainer,G.Style.CSS_SINGLE);G.oDomContainer.innerHTML="";G.oDomContainer=null;G.cells=null;this.destroyEvent.fire()}}};YAHOO.widget.Calendar=F;YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar})();(function(){var D=YAHOO.util.Dom,F=YAHOO.widget.DateMath,A=YAHOO.util.Event,E=YAHOO.lang,G=YAHOO.widget.Calendar;function B(J,H,I){if(arguments.length>0){this.init.apply(this,arguments)}}B.DEFAULT_CONFIG=B._DEFAULT_CONFIG=G.DEFAULT_CONFIG;B.DEFAULT_CONFIG.PAGES={key:"pages",value:2};var C=B.DEFAULT_CONFIG;B.prototype={init:function(K,I,J){var H=this._parseArgs(arguments);K=H.id;I=H.container;J=H.config;this.oDomContainer=D.get(I);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=D.generateId()}if(!K){K=this.oDomContainer.id+"_t"}this.id=K;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("CalendarGroup "+this.id);this.initEvents();this.initStyles();this.pages=[];D.addClass(this.oDomContainer,B.CSS_CONTAINER);D.addClass(this.oDomContainer,B.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();if(J){this.cfg.applyConfig(J,true)}this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true)}this.logger.log("Initialized "+this.pages.length+"-page CalendarGroup","info")},setupConfig:function(){var H=this.cfg;H.addProperty(C.PAGES.key,{value:C.PAGES.value,validator:H.checkNumber,handler:this.configPages});H.addProperty(C.YEAR_OFFSET.key,{value:C.YEAR_OFFSET.value,handler:this.delegateConfig,supercedes:C.YEAR_OFFSET.supercedes,suppressEvent:true});H.addProperty(C.TODAY.key,{value:new Date(C.TODAY.value.getTime()),supercedes:C.TODAY.supercedes,handler:this.configToday,suppressEvent:false});H.addProperty(C.PAGEDATE.key,{value:C.PAGEDATE.value||new Date(C.TODAY.value.getTime()),handler:this.configPageDate});H.addProperty(C.SELECTED.key,{value:[],handler:this.configSelected});H.addProperty(C.TITLE.key,{value:C.TITLE.value,handler:this.configTitle});H.addProperty(C.CLOSE.key,{value:C.CLOSE.value,handler:this.configClose});H.addProperty(C.IFRAME.key,{value:C.IFRAME.value,handler:this.configIframe,validator:H.checkBoolean});H.addProperty(C.MINDATE.key,{value:C.MINDATE.value,handler:this.delegateConfig});H.addProperty(C.MAXDATE.key,{value:C.MAXDATE.value,handler:this.delegateConfig});H.addProperty(C.MULTI_SELECT.key,{value:C.MULTI_SELECT.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.START_WEEKDAY.key,{value:C.START_WEEKDAY.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.SHOW_WEEKDAYS.key,{value:C.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_HEADER.key,{value:C.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_FOOTER.key,{value:C.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.HIDE_BLANK_WEEKS.key,{value:C.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.NAV_ARROW_LEFT.key,{value:C.NAV_ARROW_LEFT.value,handler:this.delegateConfig});H.addProperty(C.NAV_ARROW_RIGHT.key,{value:C.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_SHORT.key,{value:C.MONTHS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_LONG.key,{value:C.MONTHS_LONG.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_1CHAR.key,{value:C.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_SHORT.key,{value:C.WEEKDAYS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_MEDIUM.key,{value:C.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_LONG.key,{value:C.WEEKDAYS_LONG.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_MONTHS.key,{value:C.LOCALE_MONTHS.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_WEEKDAYS.key,{value:C.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});H.addProperty(C.DATE_DELIMITER.key,{value:C.DATE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_FIELD_DELIMITER.key,{value:C.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_RANGE_DELIMITER.key,{value:C.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.MY_MONTH_POSITION.key,{value:C.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_YEAR_POSITION.key,{value:C.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_MONTH_POSITION.key,{value:C.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_DAY_POSITION.key,{value:C.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_MONTH_POSITION.key,{value:C.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_DAY_POSITION.key,{value:C.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_YEAR_POSITION.key,{value:C.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_POSITION.key,{value:C.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_YEAR_POSITION.key,{value:C.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_SUFFIX.key,{value:C.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.MY_LABEL_YEAR_SUFFIX.key,{value:C.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.NAV.key,{value:C.NAV.value,handler:this.configNavigator});H.addProperty(C.STRINGS.key,{value:C.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:C.STRINGS.supercedes})},initEvents:function(){var J=this,L="Event",M=YAHOO.util.CustomEvent;var I=function(O,R,N){for(var Q=0;Q<J.pages.length;++Q){var P=J.pages[Q];P[this.type+L].subscribe(O,R,N)}};var H=function(N,Q){for(var P=0;P<J.pages.length;++P){var O=J.pages[P];O[this.type+L].unsubscribe(N,Q)}};var K=G._EVENT_TYPES;J.beforeSelectEvent=new M(K.BEFORE_SELECT);J.beforeSelectEvent.subscribe=I;J.beforeSelectEvent.unsubscribe=H;J.selectEvent=new M(K.SELECT);J.selectEvent.subscribe=I;J.selectEvent.unsubscribe=H;J.beforeDeselectEvent=new M(K.BEFORE_DESELECT);J.beforeDeselectEvent.subscribe=I;J.beforeDeselectEvent.unsubscribe=H;J.deselectEvent=new M(K.DESELECT);J.deselectEvent.subscribe=I;J.deselectEvent.unsubscribe=H;J.changePageEvent=new M(K.CHANGE_PAGE);J.changePageEvent.subscribe=I;J.changePageEvent.unsubscribe=H;J.beforeRenderEvent=new M(K.BEFORE_RENDER);J.beforeRenderEvent.subscribe=I;J.beforeRenderEvent.unsubscribe=H;J.renderEvent=new M(K.RENDER);J.renderEvent.subscribe=I;J.renderEvent.unsubscribe=H;J.resetEvent=new M(K.RESET);J.resetEvent.subscribe=I;J.resetEvent.unsubscribe=H;J.clearEvent=new M(K.CLEAR);J.clearEvent.subscribe=I;J.clearEvent.unsubscribe=H;J.beforeShowEvent=new M(K.BEFORE_SHOW);J.showEvent=new M(K.SHOW);J.beforeHideEvent=new M(K.BEFORE_HIDE);J.hideEvent=new M(K.HIDE);J.beforeShowNavEvent=new M(K.BEFORE_SHOW_NAV);J.showNavEvent=new M(K.SHOW_NAV);J.beforeHideNavEvent=new M(K.BEFORE_HIDE_NAV);J.hideNavEvent=new M(K.HIDE_NAV);J.beforeRenderNavEvent=new M(K.BEFORE_RENDER_NAV);J.renderNavEvent=new M(K.RENDER_NAV);J.beforeDestroyEvent=new M(K.BEFORE_DESTROY);J.destroyEvent=new M(K.DESTROY)},configPages:function(T,R,N){var L=R[0],J=C.PAGEDATE.key,W="_",M,O=null,S="groupcal",V="first-of-type",K="last-of-type";for(var I=0;I<L;++I){var U=this.id+W+I,Q=this.containerId+W+I,P=this.cfg.getConfig();P.close=false;P.title=false;P.navigator=null;if(I>0){M=new Date(O);this._setMonthOnDate(M,M.getMonth()+I);P.pageDate=M}var H=this.constructChild(U,Q,P);D.removeClass(H.oDomContainer,this.Style.CSS_SINGLE);D.addClass(H.oDomContainer,S);if(I===0){O=H.cfg.getProperty(J);D.addClass(H.oDomContainer,V)}if(I==(L-1)){D.addClass(H.oDomContainer,K)}H.parent=this;H.index=I;this.pages[this.pages.length]=H}},configPageDate:function(O,N,L){var J=N[0],M;var K=C.PAGEDATE.key;for(var I=0;I<this.pages.length;++I){var H=this.pages[I];if(I===0){M=H._parsePageDate(J);H.cfg.setProperty(K,M)}else{var P=new Date(M);this._setMonthOnDate(P,P.getMonth()+I);H.cfg.setProperty(K,P)}}},configSelected:function(J,H,L){var K=C.SELECTED.key;this.delegateConfig(J,H,L);var I=(this.pages.length>0)?this.pages[0].cfg.getProperty(K):[];this.cfg.setProperty(K,I,true)},delegateConfig:function(I,H,L){var M=H[0];var K;for(var J=0;J<this.pages.length;J++){K=this.pages[J];K.cfg.setProperty(I,M)}},setChildFunction:function(K,I){var H=this.cfg.getProperty(C.PAGES.key);for(var J=0;J<H;++J){this.pages[J][K]=I}},callChildFunction:function(M,I){var H=this.cfg.getProperty(C.PAGES.key);for(var L=0;L<H;++L){var K=this.pages[L];if(K[M]){var J=K[M];J.call(K,I)}}},constructChild:function(K,I,J){var H=document.getElementById(I);if(!H){H=document.createElement("div");H.id=I;this.oDomContainer.appendChild(H)}return new G(K,I,J)},setMonth:function(L){L=parseInt(L,10);var M;var I=C.PAGEDATE.key;for(var K=0;K<this.pages.length;++K){var J=this.pages[K];var H=J.cfg.getProperty(I);if(K===0){M=H.getFullYear()}else{H.setFullYear(M)}this._setMonthOnDate(H,L+K);J.cfg.setProperty(I,H)}},setYear:function(J){var I=C.PAGEDATE.key;J=parseInt(J,10);for(var L=0;L<this.pages.length;++L){var K=this.pages[L];var H=K.cfg.getProperty(I);if((H.getMonth()+1)==1&&L>0){J+=1}K.setYear(J)}},render:function(){this.renderHeader();for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.render()}this.renderFooter()},select:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.select(H)}return this.getSelectedDates()},selectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.selectCell(H)}return this.getSelectedDates()},deselect:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselect(H)}return this.getSelectedDates()},deselectAll:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.deselectAll()}return this.getSelectedDates()},deselectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselectCell(H)}return this.getSelectedDates()},reset:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.reset()}},clear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.clear()}this.cfg.setProperty(C.SELECTED.key,[]);this.cfg.setProperty(C.PAGEDATE.key,new Date(this.pages[0].today.getTime()));this.render()},nextMonth:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextMonth()}},previousMonth:function(){for(var I=this.pages.length-1;I>=0;--I){var H=this.pages[I];H.previousMonth()}},nextYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextYear()}},previousYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.previousYear()}},getSelectedDates:function(){var J=[];var I=this.cfg.getProperty(C.SELECTED.key);for(var L=0;L<I.length;++L){var K=I[L];var H=F.getDate(K[0],K[1]-1,K[2]);J.push(H)}J.sort(function(N,M){return N-M});return J},addRenderer:function(H,I){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addRenderer(H,I)}},addMonthRenderer:function(K,H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.addMonthRenderer(K,H)}},addWeekdayRenderer:function(I,H){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addWeekdayRenderer(I,H)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(H){this.callChildFunction("addMonths",H)},subtractMonths:function(H){this.callChildFunction("subtractMonths",H)},addYears:function(H){this.callChildFunction("addYears",H)},subtractYears:function(H){this.callChildFunction("subtractYears",H)},getCalendarPage:function(K){var M=null;if(K){var N=K.getFullYear(),J=K.getMonth();var I=this.pages;for(var L=0;L<I.length;++L){var H=I[L].cfg.getProperty("pagedate");if(H.getFullYear()===N&&H.getMonth()===J){M=I[L];break}}}return M},_setMonthOnDate:function(I,J){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(J<0||J>11)){var H=F.add(I,F.MONTH,J-I.getMonth());I.setTime(H.getTime())}else{I.setMonth(J)}},_fixWidth:function(){var H=0;for(var J=0;J<this.pages.length;++J){var I=this.pages[J];H+=I.oDomContainer.offsetWidth}if(H>0){this.oDomContainer.style.width=H+"px"}},toString:function(){return"CalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var J=this;if(J.navigator){J.navigator.destroy()}if(J.cfg){J.cfg.destroy()}A.purgeElement(J.oDomContainer,true);D.removeClass(J.oDomContainer,B.CSS_CONTAINER);D.removeClass(J.oDomContainer,B.CSS_MULTI_UP);for(var I=0,H=J.pages.length;I<H;I++){J.pages[I].destroy();J.pages[I]=null}J.oDomContainer.innerHTML="";J.oDomContainer=null;this.destroyEvent.fire()}}};B.CSS_CONTAINER="yui-calcontainer";B.CSS_MULTI_UP="multi";B.CSS_2UPTITLE="title";B.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(B,G,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings","configToday","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalGrp=B;YAHOO.widget.CalendarGroup=B;YAHOO.widget.Calendar2up=function(J,H,I){this.init(J,H,I)};YAHOO.extend(YAHOO.widget.Calendar2up,B);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up})();YAHOO.widget.CalendarNavigator=function(A){this.init(A)};(function(){var A=YAHOO.widget.CalendarNavigator;A.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};A.DEFAULT_CONFIG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,initialFocus:"year"};A._DEFAULT_CFG=A.DEFAULT_CONFIG;A.ID_SUFFIX="_nav";A.MONTH_SUFFIX="_month";A.YEAR_SUFFIX="_year";A.ERROR_SUFFIX="_error";A.CANCEL_SUFFIX="_cancel";A.SUBMIT_SUFFIX="_submit";A.YR_MAX_DIGITS=4;A.YR_MINOR_INC=1;A.YR_MAJOR_INC=10;A.UPDATE_DELAY=50;A.YR_PATTERN=/^\d+$/;A.TRIM=/^\s*(.*?)\s*$/})();YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(A){var C=A.oDomContainer;this.cal=A;this.id=C.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=C.ownerDocument;var B=YAHOO.env.ua.ie;this.__isIEQuirks=(B&&((B<=6)||(this._doc.compatMode=="BackCompat")))},show:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered){this.render()}this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.showNavEvent.fire()}},hide:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.hideNavEvent.fire()}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks){this._syncMask()}},hideMask:function(){this._show(this.maskEl,false)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(A){if(A>=0&&A<12){this._month=A}this._updateMonthUI()},setYear:function(B){var A=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(B)&&A.test(B+"")){this._year=B}this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true}this.cal.renderNavEvent.fire()},createNav:function(){var B=YAHOO.widget.CalendarNavigator;var C=this._doc;var D=C.createElement("div");D.className=B.CLASSES.NAV;var A=this.renderNavContents([]);D.innerHTML=A.join("");this.cal.oDomContainer.appendChild(D);this.navEl=D;this.yearEl=C.getElementById(this.id+B.YEAR_SUFFIX);this.monthEl=C.getElementById(this.id+B.MONTH_SUFFIX);this.errorEl=C.getElementById(this.id+B.ERROR_SUFFIX);this.submitEl=C.getElementById(this.id+B.SUBMIT_SUFFIX);this.cancelEl=C.getElementById(this.id+B.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text"){this.yearEl.setAttribute("autocomplete","off")}this._setFirstLastElements()},createMask:function(){var B=YAHOO.widget.CalendarNavigator.CLASSES;var A=this._doc.createElement("div");A.className=B.MASK;this.cal.oDomContainer.appendChild(A);this.maskEl=A},_syncMask:function(){var B=this.cal.oDomContainer;if(B&&this.maskEl){var A=YAHOO.util.Dom.getRegion(B);YAHOO.util.Dom.setStyle(this.maskEl,"width",A.right-A.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",A.bottom-A.top+"px")}},renderNavContents:function(A){var D=YAHOO.widget.CalendarNavigator,E=D.CLASSES,B=A;B[B.length]='<div class="'+E.MONTH+'">';this.renderMonth(B);B[B.length]="</div>";B[B.length]='<div class="'+E.YEAR+'">';this.renderYear(B);B[B.length]="</div>";B[B.length]='<div class="'+E.BUTTONS+'">';this.renderButtons(B);B[B.length]="</div>";B[B.length]='<div class="'+E.ERROR+'" id="'+this.id+D.ERROR_SUFFIX+'"></div>';return B},renderMonth:function(D){var G=YAHOO.widget.CalendarNavigator,H=G.CLASSES;var I=this.id+G.MONTH_SUFFIX,F=this.__getCfg("monthFormat"),A=this.cal.cfg.getProperty((F==YAHOO.widget.Calendar.SHORT)?"MONTHS_SHORT":"MONTHS_LONG"),E=D;if(A&&A.length>0){E[E.length]='<label for="'+I+'">';E[E.length]=this.__getCfg("month",true);E[E.length]="</label>";E[E.length]='<select name="'+I+'" id="'+I+'" class="'+H.MONTH_CTRL+'">';for(var B=0;B<A.length;B++){E[E.length]='<option value="'+B+'">';E[E.length]=A[B];E[E.length]="</option>"}E[E.length]="</select>"}return E},renderYear:function(B){var E=YAHOO.widget.CalendarNavigator,F=E.CLASSES;var G=this.id+E.YEAR_SUFFIX,A=E.YR_MAX_DIGITS,D=B;D[D.length]='<label for="'+G+'">';D[D.length]=this.__getCfg("year",true);D[D.length]="</label>";D[D.length]='<input type="text" name="'+G+'" id="'+G+'" class="'+F.YEAR_CTRL+'" maxlength="'+A+'"/>';return D},renderButtons:function(A){var D=YAHOO.widget.CalendarNavigator.CLASSES;var B=A;B[B.length]='<span class="'+D.BUTTON+" "+D.DEFAULT+'">';B[B.length]='<button type="button" id="'+this.id+'_submit">';B[B.length]=this.__getCfg("submit",true);B[B.length]="</button>";B[B.length]="</span>";B[B.length]='<span class="'+D.BUTTON+'">';B[B.length]='<button type="button" id="'+this.id+'_cancel">';B[B.length]=this.__getCfg("cancel",true);B[B.length]="</button>";B[B.length]="</span>";return B},applyListeners:function(){var B=YAHOO.util.Event;function A(){if(this.validate()){this.setYear(this._getYearFromUI())}}function C(){this.setMonth(this._getMonthFromUI())}B.on(this.submitEl,"click",this.submit,this,true);B.on(this.cancelEl,"click",this.cancel,this,true);B.on(this.yearEl,"blur",A,this,true);B.on(this.monthEl,"change",C,this,true);if(this.__isIEQuirks){YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true)}this.applyKeyListeners()},purgeListeners:function(){var A=YAHOO.util.Event;A.removeListener(this.submitEl,"click",this.submit);A.removeListener(this.cancelEl,"click",this.cancel);A.removeListener(this.yearEl,"blur");A.removeListener(this.monthEl,"change");if(this.__isIEQuirks){A.removeListener(this.cal.oDomContainer,"resize",this._syncMask)}this.purgeKeyListeners()},applyKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.on(this.yearEl,"keypress",this._handleEnterKey,this,true);D.on(this.yearEl,C,this._handleDirectionKeys,this,true);D.on(this.lastCtrl,B,this._handleTabKey,this,true);D.on(this.firstCtrl,B,this._handleShiftTabKey,this,true)},purgeKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.removeListener(this.yearEl,"keypress",this._handleEnterKey);D.removeListener(this.yearEl,C,this._handleDirectionKeys);D.removeListener(this.lastCtrl,B,this._handleTabKey);D.removeListener(this.firstCtrl,B,this._handleShiftTabKey)},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var B=this.cal;var A=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;if(A>0){var C=this;window.setTimeout(function(){C._update(B)},A)}else{this._update(B)}}},_update:function(B){var A=YAHOO.widget.DateMath.getDate(this.getYear()-B.cfg.getProperty("YEAR_OFFSET"),this.getMonth(),1);B.cfg.setProperty("pagedate",A);B.render()},cancel:function(){this.hide()},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false}},setError:function(A){if(this.errorEl){this.errorEl.innerHTML=A;this._show(this.errorEl,true)}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false)}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError();this.clearYearError()},setInitialFocus:function(){var A=this.submitEl,C=this.__getCfg("initialFocus");if(C&&C.toLowerCase){C=C.toLowerCase();if(C=="year"){A=this.yearEl;try{this.yearEl.select()}catch(B){}}else{if(C=="month"){A=this.monthEl}}}if(A&&YAHOO.lang.isFunction(A.focus)){try{A.focus()}catch(D){}}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl){this.navEl.innerHTML=""}var B=this.navEl.parentNode;if(B){B.removeChild(this.navEl)}this.navEl=null;var A=this.maskEl.parentNode;if(A){A.removeChild(this.maskEl)}this.maskEl=null;this.__rendered=false}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null},_show:function(B,A){if(B){YAHOO.util.Dom.setStyle(B,"display",(A)?"block":"none")}},_getMonthFromUI:function(){if(this.monthEl){return this.monthEl.selectedIndex}else{return 0}},_getYearFromUI:function(){var B=YAHOO.widget.CalendarNavigator;var A=null;if(this.yearEl){var C=this.yearEl.value;C=C.replace(B.TRIM,"$1");if(B.YR_PATTERN.test(C)){A=parseInt(C,10)}}return A},_updateYearUI:function(){if(this.yearEl&&this._year!==null){this.yearEl.value=this._year}},_updateMonthUI:function(){if(this.monthEl){this.monthEl.selectedIndex=this._month}},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl}if(YAHOO.env.ua.gecko){this.firstCtrl=this.yearEl;this.lastCtrl=this.yearEl}}},_handleEnterKey:function(B){var A=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(B)==A.ENTER){YAHOO.util.Event.preventDefault(B);this.submit()}},_handleDirectionKeys:function(H){var G=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY,D=YAHOO.widget.CalendarNavigator;var F=(this.yearEl.value)?parseInt(this.yearEl.value,10):null;if(isFinite(F)){var B=false;switch(G.getCharCode(H)){case A.UP:this.yearEl.value=F+D.YR_MINOR_INC;B=true;break;case A.DOWN:this.yearEl.value=Math.max(F-D.YR_MINOR_INC,0);B=true;break;case A.PAGE_UP:this.yearEl.value=F+D.YR_MAJOR_INC;B=true;break;case A.PAGE_DOWN:this.yearEl.value=Math.max(F-D.YR_MAJOR_INC,0);B=true;break;default:break}if(B){G.preventDefault(H);try{this.yearEl.select()}catch(C){}}}},_handleTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(C.getCharCode(D)==A.TAB&&!D.shiftKey){try{C.preventDefault(D);this.firstCtrl.focus()}catch(B){}}},_handleShiftTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(D.shiftKey&&C.getCharCode(D)==A.TAB){try{C.preventDefault(D);this.lastCtrl.focus()}catch(B){}}},__getCfg:function(D,B){var C=YAHOO.widget.CalendarNavigator.DEFAULT_CONFIG;var A=this.cal.cfg.getProperty("navigator");if(B){return(A!==true&&A.strings&&A.strings[D])?A.strings[D]:C.strings[D]}else{return(A!==true&&A[D])?A[D]:C[D]}},__isMac:(navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1)};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.8.0r4",build:"2449"});YUI.add("wl-calendar",function(C){var D={};var O=[];var H=[];var K={};var E=sabre.config.global.currentTimeInMillis;C.wlCalendar={reset:function(){O=[]},setFlightDates:function(R,S){O=[];var T=R.previous();var Q=T?C.DataType.Date.parse(T.get("value")):new Date(E);if(!Q){Q=new Date()}H[S]=H[S]||{};H[S].date=Q;H[S].textInput=R;H[S].hiddenInput=R.previous();H[S].calendar=null},loadCalendar:function(R,T,S){K.dateFormat=S.dateFormat;K.showCalendar=S.show;K.onSelectCallback=S.onSelectCallback||function(){};K.maxDateRange=S.maxDateRange||365;var Q=R.get("id");R=C.one("#"+Q);var U=F(Q);if(!D[Q]){D[Q]=L(Q);T.registerContainer(D[Q]);D[Q].hideEvent.subscribe(function(){C.wlValidation.validate(null,R.previous());var W=C.one(O[U].oDomContainer);W.removeClass("calendar-container");W.addClass("hidden")})}I(Q);var V=C.one(D[Q].body);V.addClass("loadingContainer");D[Q].show();C.later(5,C,function(){C.use("yui2-calendar",function(Z){if(!Z.Lang.isValue(O[U])){O[U]=new YAHOO.widget.CalendarGroup("calendar-"+Q,{iframe:false});O[U].selectEvent.subscribe(function(j,Y,k){B(k,D[Q],Q,K.dateFormat,T);K.onSelectCallback()},O[U],true);O[U].renderEvent.subscribe(function(){Z.one(O[U].oDomContainer).removeClass("hidden");D[Q].fireEvent("changeContent")});H[U].calendar=O[U]}var f=new Date(E);var e=O[U]&&O[U].getSelectedDates()[0];var d=YAHOO.widget.DateMath;if(document.getElementById("formattedOutboundDepartureDate")&&document.getElementById("formattedOutboundDepartureDate").value){var W=Z.DataType.Date.parse(document.getElementById("formattedOutboundDepartureDate").value)}else{var a=H[U-1];var W=a?Z.DataType.Date.parse(a.hiddenInput.get("value"))||f:f}var g=d.add(f,d.DAY,K.maxDateRange);var c=Z.one("#date"+(U+1));if(c&&c.get("disabled")){var h=Z.one("#date_hidden"+(U+1));if(h){g=Z.DataType.Date.parse(h.get("value"))}}var X=e||W;var b=O[U].cfg;b.setProperty("locale_weekdays","medium");b.setProperty("mindate",W);b.setProperty("maxdate",g);b.setProperty("pagedate",X);b.setProperty("start_weekday",sabre.config.satConfiguration.calendarStartDay);if(T.getTripType()==="oneway"){O[U].removeRenderers()}else{G(O,U)}J(O[U]);O[U].render();Z.on("keyup",function(Y){if(Y.charCode===27){D[Q].hide()}});V.addClass("calendar-container");V.removeClass("loadingContainer");I(Q)})})}};function L(R){var Q=new YAHOO.widget.Panel("container-"+R,{visible:false,draggable:false,zIndex:520,close:true});Q.showEvent.subscribe(function(){Q.fireEvent("changeContent")});Q.setBody('<div class="calendar-container" id="calendar-'+R+'"></div>');Q.render(document.body);return Q}function B(a,b,Q,d,c){var S=C.one("#"+Q);var j=S.previous();var V;var W;if(a.getSelectedDates().length>0){var R=a.getSelectedDates()[0];var f=R.getDate();var l=R.getMonth();var Y=R.getFullYear();V=C.DataType.Date.format(R,{format:d});W=M(Y,l,f);var k=(l+1)+"/"+f+"/"+Y;var g,X,Z,e;var U=F(Q);for(g=U+1;g<H.length;g++){e=H[g];var T=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R>T){e.calendar&&e.calendar.select(k);e.date=R;X=H[g].textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}for(g=U-1;g>-1;g--){e=H[g];var h=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R<h){e.calendar&&e.calendar.select(k);e.date=R;X=e.textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}}else{V="";W=0}S.set("value",V);j.set("value",W);b.hide();if(c.persistInputState){c.persistInputState(Q,W);c.persistInputState("textForField"+Q,V)}}function M(R,S,Q){return C.DataType.Date.format(new Date(R,S,Q),{format:sabre.config.dateInputFormat})}function F(R){var S=new RegExp("^[a-z_\\-]+(\\d+)$","i");var Q=R.match(S);return Q?C.DataType.Number.parse(Q[1]):null}function G(T,U){var W=T[U];var V;var Q;for(var R=0;R<T.length;R++){var S=T[R]&&T[R].getSelectedDates()[0]||H[R].date;if(S){if(!V&&!Q){V=S;Q=S}if(S<V){V=S}if(S>Q){Q=S}}}V=V||new Date(E);Q=Q||new Date(E);W.removeRenderers();W.addRenderer(A(W,V,Q),W.renderCellStyleHighlight1)}function A(T,Q,R){var S=T.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.DATE_RANGE_DELIMITER.key);return(N(T,Q)+S+N(T,R))}function N(U,T){var R=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG;var Q=[];Q[U.cfg.getProperty(R.MDY_MONTH_POSITION.key)-1]=(T.getMonth()+1);Q[U.cfg.getProperty(R.MDY_DAY_POSITION.key)-1]=T.getDate();Q[U.cfg.getProperty(R.MDY_YEAR_POSITION.key)-1]=T.getFullYear();var S=U.cfg.getProperty(R.DATE_FIELD_DELIMITER.key);return Q.join(S)}function J(S){var T=C.config.locale;if(C.DataType.Date.Locale){var R=C.DataType.Date.Locale[T];P(R,S)}else{var Q=T.replace("_","-");C.use("lang/datatype-date-format_"+Q,function(V){V.Intl.setLang("datatype-date-format",Q);var U=V.Intl.get("datatype-date-format");P(U,S)})}}function P(Q,T){if(Q){var R={b:"MONTHS_SHORT",B:"MONTHS_LONG",a:"WEEKDAYS_MEDIUM",A:"WEEKDAYS_LONG"};for(var S in R){if(R.hasOwnProperty(S)){T.cfg.setProperty(R[S],Q[S])}}T.render()}}function I(R){var S=C.isCurrentLanguageRtl();var T=S?"br":"bl";var Q=S?"tr":"tl";D[R].cfg.setProperty("context",[R,Q,T,["beforeShow","windowResize"]])}},"1.0.0",{requires:[]});YUI.add("wl-airport-finder",function(A){A.wlAirportFinder=function(k,V,W){var h;var E;var G={};var I="";var g="";var S=[];var K=[];var j={};W=W||{};var o=W.cityListFormat||"%airport (%code)";var n=W.defaultOriginLabel||"";var H=W.defaultDestinationLabel||"";var a=W.maxRowCount||16;var Z='<div class="table-container"><table><tbody><tr class="ondhead"><td id="originInfoErrorMessage" class="translate" data-wl-translate="label.fsc.noOriginMatch"></td></tr><tr class="foot"><td colspan="5"></td></tr></tbody></table></div>';var O=false;return{showAirportList:N,createAirportList:B,updateAirportInputTranslation:Y,formatCityList:P,setRbeBooking:L};function L(p){O=p}function N(s,r,q,p){A.use("wl-routes",function(t){b(s,r,q,p)})}function M(q,s){var r=A.isCurrentLanguageRtl();var t=r?"br":"bl";var p=r?"tr":"tl";q.cfg.setProperty("context",[s.get("id"),p,t,["beforeShow","windowResize"]])}function b(y,AA,p,AE){var AF;var AB;var AC;var z;var v;B(AA);var u=AA.hasClass("origin_airport");var t=AA.get("id");var w=AA.previous();if(!w){A.log("Cannot show airport finder - unable to find connected input control","warn");return }if(u){AB=w.get("id");z=t;AC=AB.replace("origin","destination");v=z.replace("origin","destination");h=AF=G[z];E=G[v]}else{AC=w.get("id");v=t;AB=AC.replace("destination","origin");z=v.replace("destination","origin");E=AF=G[v];h=G[z]}var AD=y&&y.type==="keyup"?y.charCode:null;var s=AF.cfg.getProperty("visible");if(AD===27||AD===13){AF.hide();if(u){K=R(null,A.one(E.body),AC,AB,p);if(!e(AC)){A.one("#"+AC).next().fire("originChosen")}var x=AC[AC.length-1];d(x)}}else{if(!s||AD!==null){var r=[9,13];AD=!AD||A.Array.indexOf(r,AD)!==-1?null:AD;var q=A.one(AF.body);q.addClass("loadingContainer");AF.cfg.setProperty("visible",true);M(AF,AA);j=A.routes||[];q.removeClass("loadingContainer");if(u){S=m(AD,q,AB,AE)}else{K=R(AD,q,AC,AB,p)}AF.fireEvent("changeContent");if(AD===null){J(t);AA.set("value","");AA.focus()}if(u){A.on("click",function(){K=R(null,A.one(E.body),AC,AB,p);if(!e(AC)){U(AC)}},A.one(h.element).one("a.container-close"))}}}M(AF,AA)}function J(p){U(p,F(p))}function P(v){var q=A.airports[v]||{};var r=q.code||v;var u=q.city||r;var t=A.translateParametrized("Airport."+r);var x=A.translateParametrized("AirportShort."+r);var w=A.translateParametrized("City."+u);var p=A.translateParametrized("StateProvince."+q.stateProvince);var s=A.translateParametrized("Country."+q.country);return A.formatText(o,{code:r,airport:t||"",airportShort:x||"",cityCode:u||"",city:w||"",stateProvince:p||"",country:s||""})}function e(p){return !!F(p).length}function F(w){var t=A.one("#"+w);var s=A.Lang.trim(t.get("value"));if(s.length>0){var r=t.hasClass("origin_airport")?S:K;for(var q=0;q<r.length;q++){var v=r[q][0];var u=P(v);if(u===s){return[u,v]}var p=new RegExp(s,"i");if(u.search(p)>-1){return[u,v]}}}return[]}function X(p,q,r){q=q||"";r=r||"";p.previous().set("value",r);p.previous().set("data-wl-value",r);p.set("data-wl-value","");p.set("value",q)}function U(u,q){var p=A.one("#"+u);if(q&&q.length===2){X(p,q[0],q[1])}else{var t=p.hasClass("origin_airport");var s=A.getCurrentTranslations();var r=t?s[n]:s[H];X(p,r)}}function T(s,v,t,x,w){var q=null;var r=v.get("id");var u={visible:false,draggable:false,zIndex:520,close:true};var p=new YAHOO.widget.Panel(s,u);var y;p.setBody("");p.renderEvent.subscribe(function(){y=A.one("#"+s);y.setStyles({display:"none"});A.delegate("click",function(AC){var AB=AC.target;v=A.one("#"+r);v.set("value",AB.get("innerHTML"));var z=v.previous();z.set("value",AB.get("rel"));if(t){K=R(null,A.one(E.body),x,w,q);if(!e(x)){A.one("#"+x).next().fire("originChosen")}var AA=r.charAt(r.length-1);d(AA)}p.hide();AC.preventDefault()},p.element,"span")});p.render(document.body);p.cfg.setProperty("context",[r,"tl","bl",["beforeShow","windowResize"]]);p.hideEvent.subscribe(function(){v=A.one("#"+r);J(r);if(V.persistInputState){V.persistInputState(r,v.previous().get("value"))}if(V.getTripType()==="roundtrip"){C(W.airportInputsIds,r,v.previous().get("value"))}A.fire("fsc:inputChanged");A.wlValidation.validate(null,v.previous());y.setStyles({display:"none"});if(p.handle){p.handle.detach();p.handle=null}});p.showEvent.subscribe(function(){y.setStyles({display:"block"});p.focus();A.Lang.later(10,null,function(){if(!p.handle){p.handle=A.on("click",function(AA){var z=AA.target;if(!z.inRegion(p.element,true)){p.hide()}},document)}})});V.registerContainer(p);return p}function d(q){var p=A.one("#destination_airport"+q);p.changeTarget({currentTarget:p})}function B(r){var p=r.get("id");var t;var s;var u=r.hasClass("origin_airport");if(u){t=r.previous().get("id");s=t.replace("origin","destination")}else{s=r.previous().get("id");t=s.replace("destination","origin")}if(!G[p]){var q=p+"-cont";G[p]=T(q,r,u,s,t)}}function C(p,q,u){var t=new RegExp("^([a-z_]+)(\\d+)$","i");var s=q.match(t);if(s){var r=s[1];if(r===p.departure){r=p.arrival}else{if(r===p.arrival){r=p.departure}}if(V.setStoredInputValue){V.setStoredInputValue(r,1,u)}}}function D(q){q=q||[];for(var p in q){if(f(q[p])){return true}}return false}function f(p){return p===1||(A.Lang.isObject(p)&&((!O&&p.b2c!==0)||(O&&p.rbe!==0)))}function m(z,r,u,AA){var w=[];var AB=A.one("#"+u);var s=A.Lang.trim(AB.next().get("value"));var x=s||"";x=c(x);var q=new RegExp("^"+x,"i");var p=new RegExp(",\\s"+x,"i");var v=u.split("origin_airport_hidden")[1];for(var y in j){if(!D(j[y])){continue}if(A.airports[y]){if(!AA||AA.length===0||AA.length===1&&v>1||v>=AA.length||AA[v]===null||A.airports[y].country===AA[v]){var t=P(y);if(z!=null&&(A.Lang.trim(x)!=""&&A.Lang.trim(x)!=g)){if(y.match(q)||t.match(q)||t.match(p)||t.toLowerCase().indexOf(x.toLowerCase())>-1){w.push(new Array(y,t))}}else{w.push(new Array(y,t))}}}else{A.log("origin airport not found:"+y,"warn")}}l(w,r,"origins");return w}function R(AJ,w,s,v,p){var AF=[];var AI=A.one("#"+s);var AH=A.one("#"+v);var z=A.Lang.trim(AI.next().get("value"));var AG=z||"";AG=c(AG);var AD=new RegExp("^"+AG,"i");var AC=new RegExp(",\\s"+AG,"i");var AE=[];var y=j[AH.get("value")];if(A.Lang.isValue(y)){AE=y}else{var AB=[];for(var r in j){AB.push(r)}for(var u=0;u<AB.length;u++){for(var t in j[AB[u]]){AE[t]=j[AB[u]][t]}}}var x=s.split("destination_airport_hidden")[1];for(var AA in AE){if(!f(AE[AA])){continue}if(A.airports[AA]){if(!p||p.length===0||x>=p.length||p[x]===null||A.airports[AA].country===p[x]){var q=P(AA)||"";if(AJ!=null&&(A.Lang.trim(AG)!=""&&A.Lang.trim(AG)!=I)){if(AA.match(AD)||q.match(AD)||q.match(AC)||q.toLowerCase().indexOf(AG.toLowerCase())>-1){AF.push([AA,q])}}else{AF.push([AA,q])}}}else{A.log("destination airport not found: "+AA,"warn")}}l(AF,w,"destinations");return AF}function Y(){A.all(".airport-picker").each(function(r){var q=r.previous();p(r,q)});function p(r,q){if(!r||!q){return }var s=q.get("value");if(!s){return }var t=P(s);r.set("value",t);r.setAttribute("data-wl-value",t)}}function l(w,r,y){w.sort(Q);r.addClass("airportsList");if(w.length==0){r.set("innerHTML",Z);r.translate();return }if(!r.one("table")){var z=A.Node.create('<div class="table-container"><table><tbody><tr></tr></tbody></table></div>');r.set("innerHTML","");r.append(z)}var x=r.one("table").one("tr");x.all("td").remove();var p;var s;for(var t=0;t<w.length;t++){var q=w[t][0];var AB=P(q);var AA=A.Node.create("<li></li>");var v=A.Node.create('<span class="airport-name" id="'+y+"-"+q+'" rel="'+q+'">'+AB+"</span>");AA.append(v);if(t===0||(t%a)===0){s=A.Node.create("<ul></ul>");s.append(AA);var u=document.createElement("td");p=A.one(u);p.append(s);x.append(p)}else{if((t%a)!==0){s.append(AA)}}}}function c(q){var p=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return q.replace(p,"\\$&")}function Q(q,p){if(q[0]===""){return -1}if(p[0]===""){return 1}if(q[1]<p[1]){return -1}if(p[1]<q[1]){return 1}return 0}}});YUI.add("wl-fsc-multicity",function(E){var D;var C={init:function(F){D=F}};C.commonMulticityDomEvents=function(G){var F=G.one("#addMoreFlights");if(F){F.on("click",B)}E.on("click",A,".multiFlight-delete-leg")};function B(F){F.preventDefault();D.addFlight()}function A(G){G.preventDefault();var F=E.DataType.Number.parse(this.get("id"));D.removeFlight(F)}E.widgets=E.widgets||{};E.widgets.multicity=C});YUI.add("wl-fsc-modifySearch",function(D){var B;var I;var C,J;var F;var G=false;var E=document.getElementById("promo_box_per_pax");var H={init:function(N,Q,O,M){I=M.errorMsg||"";promoCodesMessage=M.promoCodesMessage||"";J=N;C=Q;var P=D.one("#"+O);F=P?P.get("innerHTML"):""},create:function(P,M,N){var O={visible:true,draggable:false,fixedcenter:false,modal:true,close:true,postmethod:"form",hideaftersubmit:false,monitorresize:true};var R=D.merge(O,N);if(B){if(E==null){B.destroy()}}var Q=D.one("#"+P);if(!Q){Q=D.Node.create('<div id="'+P+'"></div>');Q.set("innerHTML",F);if(G){D.translateNode(Q)}D.one("body").appendChild(Q)}B=new YAHOO.widget.Dialog(P,R);B.renderEvent.subscribe(function(){this.cfg.setProperty("zIndex",100);this.sizeMask();var S=D.one("#modify-search");S.removeClass("hidden");B.center();D.on("modifySearchOverlay|click",A,"#btn-modify-search");D.on("modifySearchOverlay|click",function(){B.hide()},"#btn-cancel");if(I){L(I)}if(promoCodesMessage===true){K()}if(D.Lang.isFunction(M.render)){M.render.call(this,this)}J.fireEvent("modify_search_rendered")});B.hideEvent.subscribe(function(){D.detach("modifySearchOverlay|*");D.wlValidation.errorRendering.hideAllOverlays();if(D.Lang.isFunction(M.hide)){M.hide.call(this,this)}});B.render(document.body)},updateErrorMessages:function(M){I=M;L(M)},getErrorMessages:function(){return I},setTranslationRequired:function(){G=true}};D.widgets=D.widgets||{};D.widgets.modifySearch=H;function A(){var M=D.one("#requestFromModifySearch");if(M){M.set("value",true)}D.one(B.element).addClass("loading");B.submit()}function L(N){var M=D.one("#errors");var O={message:N};J.renderPartialInNode("_flowMessage",O,M,true);M.removeClass("hidden")}function K(N){var M=D.one("#promo-code-error");M.removeClass("hidden")}});YUI.add("wl-multiple-promocodes",function(A){A.wlMultiplePromocodes=function(J,N,G){var U;var H=[];var E=[];var O=[];G=G||{};var T=G.promoCodePerPaxExcludingInfantsEnabled||"";var F=G.promoCodeValuefromModel;var L=G.supportedPax;var I=G.that;var V=G.promoCodeMaxLength;return{addMultiplePromoCodeFields:Q,handleMultiplePromos:C,applyPromoCodeForAllPax:M,getPromoCodeValues:D,removePromoBoxes:B,getPaxType:R};function Q(){var W=S();var Z=A.translateParametrized("label.fsc.promoCode.passengers");var X="";for(var Y=0;Y<W;Y++){X+='<div class="promo_cont">';X+='<label for="promo_per_pax'+Y+'" class="promo_label"><span class="translate" data-wl-translate="label.fsc.promoCode.passengers">'+Z+"</span><span> "+(Y+1)+"</span></label>";X+='<input type="text" class="promo_code_textfield" maxlength="'+V+'" id="promo_per_pax'+Y+'" name="promoCodes['+Y+']"/>';X+="</div>"}if(a==null){var a=A.one("#promo_box_per_pax")}a.append(A.Node.create(X))}function S(){var W=0;E=R();for(var X=0;X<E.length;X++){if(T==true&&(E[X]=="INF"||E[X]=="INS")){continue}var Y=I.node.one("#"+E[X]+"_id");W=W+parseInt(Y.get("value"))}U=W;return W}function R(){for(var W=0;W<L.length;W++){E[W]=L[W].passengerType.code;O[W]=I.node.one("#"+E[W]+"_id")}return E}function C(W){K();B(W);Q();P()}function D(){var Y;var X=(F.length>U)?U:F.length;for(var W=0;W<X;W++){Y=document.getElementById("promo_per_pax"+W);Y.value=F[W]}}function B(W){W.set("innerHTML","")}function P(){var Y;var X=(H.length>U)?U:H.length;for(var W=0;W<X;W++){Y=document.getElementById("promo_per_pax"+W);Y.value=H[W]}}function M(){var Y=document.getElementById("promo_per_pax"+0).value;var X;for(var W=1;W<U;W++){X=document.getElementById("promo_per_pax"+W);X.value=Y}}function K(){H=A.all("#promo_box_per_pax input").get("value")}}});YUI.add("wl-fsc",function(B){var A={ONE_WAY:"oneway",ROUND_TRIP:"roundtrip",MULTI_CITY:"multicity"};B.components.Fsc=function(AM){var t=this;var b=AM.initData||{};var Ao=AM.compInstConfig||{};var D=new YAHOO.widget.OverlayManager();var u=Ao.dateFormat;var n=Ao.maxDateRange;var Ah=Ao.promoCodePerPaxExcludingInfantsEnabled;var q=Ao.onePromoCodeforAllPaxEnabled;var C=Ao.promoCodeMaxlength;var w=Ao.originCityDefaultValueKey||"";var AC=Ao.destinationCityDefaultValueKey||"";var z=b.destinationAirportCountriesFilter;var E=b.originAirportCountriesFilter;var K=b.restrictOriginAndDestination&&b.nonRefundableAncillariesIncluded;var U=b.mybWasAwardBooking;var L=b.frequentFlyerUserLoggedIn||false;var Ad=sabre.config.satConfiguration.frequentFlyer.requireLogin;var P=sabre.config.satConfiguration.frequentFlyer.allowedJourneyTypes;var AP=sabre.config.techSwitchesConfiguration.profileSystemAvailable;var Ab=sabre.config.techSwitchesConfiguration.loyaltyProgramAvailable;var h=b.awardBooking||false;var N=(!h&&b.redeemMiles)||false;var Ak=Ao.rbeTabEnabled||false;var r=Ao.awardBookingEnabled&&Ab;var Ai=b.partialExchange;var H=!AP&&Ad;var Aa=U||!r||H||(q==false);var G=B.Array.indexOf(sabre.config.satConfiguration.hotels.paths,"RBE")===-1?true:false;var AY=sabre.config.satConfiguration.vehicles.visibleInRbe?false:true;var AS=b.journey||Ao.journey.defaultValue;var AF=A[AS];var m={};var s="INF_id";var AX="redeem_miles";var An=b.promoCodes;var AL=b.supportedPassengers;var j=[];var Y=[];var k;B.widgets.multicity.init(m);var Ae=B.wlAirportFinder(t,m,{cityListFormat:Ao.cityListFormat,maxRowCount:Ao.maxRowCount,defaultOriginLabel:w,defaultDestinationLabel:AC,airportInputsIds:{departure:"origin_airport",arrival:"destination_airport"}});if(q==false){var AE=B.wlMultiplePromocodes(t,m,{promoCodePerPaxExcludingInfantsEnabled:Ao.promoCodePerPaxExcludingInfantsEnabled,onePromoCodeforAllPaxEnabled:Ao.onePromoCodeforAllPaxEnabled,promoCodeValuefromModel:An,supportedPax:AL,promoCodeMaxLength:C,that:t})}var AG;t.incomingEvents={load_overlay:function(At){m.setTripType(b.journey);Q(At.errorMessage)},change_lang:function(){e();if(AM.state==="modifySearch"){B.widgets.modifySearch.setTranslationRequired()}},"ff-logged-in":function(){L=true;AJ();M();S()},"logged-in":function(){AJ();M()},"logged-out":function(){L=false;AJ();M();S()}};t.onRenderState={exchange:function(At){Ap(At)},modifySearch:function(Aw){var Av=B.Lang.isObject(AM.validationMessages)&&B.Object.size(AM.validationMessages)?"validationError":null;var At=false;for(var Au in AM.validationMessages){if(/^promoCodes/.test(Au)&&AM.validationMessages[Au]["0"]["code"]==="validation.field.required"){At=true;break}}B.widgets.modifySearch.init(t,m,"modify-search",{errorMsg:Av,promoCodesMessage:At});if(Av||b.alwaysShowModifySearch){Q()}},searchPage:function(At){B.wlProfiler.add("fsc rendered");Ap(At);I(At)}};m.getTripType=function(){return AF};m.setTripType=function(At){AS=A[At]?At:"ROUND_TRIP";AF=A[At];return AF};m.getTripTypeKey=function(At){return A[At]};m.registerContainer=function(At){D.register(At)};m.toggleRedemptionSearchAllowed=function(){var Aw=false;if(!V(AS)){Aw=true}else{var Av=t.node.one("#"+s);if(Av){var Au=Av.get("value");if(Au>0){Aw=true}}}var At=t.node.one("#"+AX);Ac(At,Aw);AJ()};m.addFlight=function(){Aj()};m.removeFlight=function(At){x(At)};function Q(At){if(At){B.widgets.modifySearch.updateErrorMessages(At)}B.widgets.modifySearch.create("modify-search",{render:function(Au){t.node=B.one(Au.element);if(q==false){var Av=B.one("#promo_box_per_pax");AE.removePromoBoxes(Av)}Ap(t.node)},hide:function(Au){AQ(b.journey);D.hideAll()}})}function Ap(Az){Az.delegate("click",d,".trip-type-input");Az.delegate("click",X,".fsc-tab");Az.delegate("click",Av,".promo_code_button");if(!K){Az.delegate("click",As,".airport-trigger")}if(K){AT()}var Au=Az.one(".componentContentHolder")||Az;Au.addClass(AF);AK(Az);var At=document.getElementById("promo_box_per_pax");var Ay=Az.one("#ADT_id");if(Ay){l.apply(Ay);if(q==false&&(At!=null)){AE.addMultiplePromoCodeFields();AZ()}if(B.UA.ie){Ay.on("change",l)}else{Az.delegate("change",l,"#ADT_id")}}if(j){for(var Ax=0;Ax<Y.length;Ax++){if(B.UA.ie){B.one("#"+Y[Ax]+"_id").on("change",Aw)}else{Az.delegate("change",Aw,"#"+Y[Ax]+"_id")}}}function Aw(){var A0=B.one("#promo_box_per_pax");AE.handleMultiplePromos(A0)}function Av(){AE.applyPromoCodeForAllPax()}if(q==false&&(An!=null)){AE.getPromoCodeValues()}AJ();AN(Aa);if(r&&!Ak){Z();m.toggleRedemptionSearchAllowed();Az.delegate("click",o,"#"+AX);S();O(Az)}M()}function AZ(){for(var At=0;At<AL.length;At++){Y[At]=AL[At].passengerType.code;j[At]=t.node.one("#"+Y[At]+"_id")}return Y}function I(At){At.delegate("change",p,"#fsc-pointOfSale")}function AT(){for(var At in A){var Au=t.node.one("#journey_"+At+"_el");if(Au&&!Au.get("checked")){Ac(Au,true)}}}function AK(At){Ar(At);At.all(".airport-picker").each(function(Au){if(!Au.get("disabled")){Au.changeTarget=Am;Au.on("click",Am);Au.on("keyup",AU);Au.on("key",AV,"down:13");AD(Au)}});e();At.all(".date_departure_inp, .date_return_inp").each(function(Av,Au){Ag(Av,Au);if(!Av.get("disabled")){Av.on("focus",W)}});At.all("input, select").each(function(Au){Au.on("blur",AW)});if(AF==="multicity"){B.widgets.multicity.commonMulticityDomEvents(At)}}function Ar(At){B.wlValidation.initializeForPartial(AM.getType(),B.wlValidation.validationEngineRules,B.wlValidation.validationConfiguration,At)}function e(){Ae.updateAirportInputTranslation();D.hideAll()}function AN(At){var Au=t.node.one("#redeemMiles");if(Au&&At){Au.addClass("hidden")}}function S(){if(L){return }var At=t.node.one(".redeem-miles-label");if(At){if(!N){At.removeClass("warning")}else{if(r&&!L&&Ad){At.addClass("warning")}}}}function O(Au){var Av;if(r){for(Av in A){var At=Au.one("#journey_"+Av+"_el");var Aw=!V(Av)&&N;Ac(At,Aw)}var Az=Au.one("#cabin_class");var Ax=Au.one("#fare_type");var A2=Au.one("#travelOptionsHotelReservation");var Ay=Au.one("#travelOptionsCarRental");Ac(Az,N);Ac(Ax,N);if(AY){Ac(Ay,N)}if(G){Ac(A2,N);var A0=Au.one("#travelOptionsNumberOfRooms");if(N&&A0){A0.set("value",1)}Ac(A0,N)}var A1=Au.one("#"+s);if(N&&A1){A1.set("value",0)}Ac(A1,N)}}function o(At){N=At.currentTarget.get("checked");O(t.node);M();AJ();S();T(N);AO(N)}function Z(){N=b.redeemMiles||false;var At=t.node.one("#"+AX);if(At){At.set("checked",N)}T(N)}function T(At){var Av=t.node.one("#"+AX+"_val_holder");if(Av){Av.set("value",At?"true":"false")}var Au=t.node.one("#award_booking_val_holder");if(Au){Au.set("value",At?"true":"false")}}function AO(Au){var At=t.node.one("#promo_code");if(At){var Av=Au?Ao.awardBookingMode.promoCodeMaxlength:Ao.promoCodeMaxlength;At.setAttribute("maxlength",Av);At.set("value",At.get("value").substring(0,Av))}}function V(At){return(B.Array.indexOf(P,At)>-1)}function W(At){D.hideAll();B.wlCalendar.loadCalendar(At.target,m,{dateFormat:u,show:true,maxDateRange:n})}function Ag(Au,At){B.wlCalendar.setFlightDates(Au,At)}function AD(At){if(AM.state!=="modifySearch"){B.use("wl-routes",function(Au){t.node.all(".origin_airport").removeClass("disabled");t.node.all(".destination_airport").removeClass("disabled")})}Ae.createAirportList(At)}function Am(At){D.hideAll();Ae.showAirportList(At,At.currentTarget,z,E)}function As(Au){Au.preventDefault();var At=this.previous();D.hideAll();Ae.showAirportList(null,At,z,E)}function AU(At){if(At.charCode===9){D.hideAll()}Ae.showAirportList(At,At.currentTarget,z,E)}function AV(At){At.halt()}function M(){if(L||!(N||h)){AB()}else{if(Ad&&(N||h)){AB();AR()}}}function AB(){var At=t.node.one(".redeem-miles-label");if(At){At.removeClass("warning")}AA("#flow-message-ffNotLoggedIn");AA("#flow-message-ffLoginNeeded");AA("#flow-message-ffInvalidProfileType")}function AA(At){var Au=B.one(At);if(Au){Au.addClass("hidden")}}function AR(){var Au=t.node.one(".redeem-miles-label");var At=B.one("#flow-message-ffNotLoggedIn");var Ax=B.one("#flow-message-ffLoginNeeded");var Aw=B.one("#flow-message-ffInvalidProfileType");var Av=(At!=null||Ax!=null||Aw!=null);if(Aw){Aw.removeClass("hidden")}else{if(Ax){Ax.removeClass("hidden")}else{if(At){At.removeClass("hidden")}}}if(Au&&Av){Au.addClass("warning")}}function AJ(){if(!L&&Ad&&(N||h)){B.on("pageHtmlLoaded",g);g()}else{B.on("pageHtmlLoaded",Aq);Aq()}}function g(){if(AM.state!=="modifySearch"){t.fireEvent("block_submit")}else{var At=t.node.one("#btn-modify-search");if(At){At.set("disabled","disabled");At.addClass("disabled")}}}function Aq(){if(AM.state!=="modifySearch"){t.fireEvent("unblock_submit");t.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}else{var At=t.node.one("#btn-modify-search");if(At){At.removeAttribute("disabled");At.removeClass("disabled")}}}function Ac(Au,At){if(Au){if(At){Au.set("disabled",true);Au.addClass("disabled");Au.set("checked",false)}else{Au.removeAttribute("disabled");Au.removeClass("disabled")}}}function y(At){return parseInt(At.get("value"))}function AH(Av,At){var Au="";AG=AG||At.all("option");AG.each(function(Aw){var Ax=parseInt(Aw.get("value"));if(Ax<=Av){Au+='<option value="'+Ax+'">'+Ax+"</option>"}});At.setContent(Au)}function J(At,Aw,Au){var Ax=parseInt(At,10);var Av=Ax>Aw?Aw:Ax;Au.set("selectedIndex",Av)}function l(){var Av=y(this);var At=t.node.one("#"+s);if(At){var Au=At.get("value");AH(Av,At);J(Au,Av,At);Al()}}function AW(At){if(!this.hasClass("airport-picker")&&!this.hasClass("date-picker")){B.wlValidation.validate(At)}}function Al(){B.on("change",m.toggleRedemptionSearchAllowed,"#"+s)}function Af(Au,At){Au.purge(true);Au.set("innerHTML",B.decodeHtmlEntities(At));AK(Au)}function AI(Av,At){var Au=t.node.one("#"+Av+At);return Au?Au.get("value"):null}function f(Au){if(!Au){return null}var At=B.DataType.Date.parse(Au,sabre.config.dateInputFormat);return B.DataType.Date.format(At,{format:sabre.config.dateTimeJSONFormat})}function X(At){h=this.hasClass("fsc-tab-rbe");k=this.hasClass("fsc-tab-regular");M();AJ();v({isRbe:h});At.preventDefault()}function d(Au){var At=Au.target;var Av=At.get("value");AQ(Av)}function AQ(At){t.node.removeClass(AF);var Au=a();m.setTripType(At);t.node.addClass(AF);c({actionCode:"changeTripType",itineraryParts:Au})}function F(At){return{origin:AI("origin_airport_hidden",At),destination:AI("destination_airport_hidden",At),date:f(AI("date_hidden",At)),timeRange:AI("time_range",At)}}function R(At){return At.origin||At.destination||At.date||At.timeRange}function a(){var Av=[];for(var Au=0;;Au++){var At=F(Au);if(R(At)){Av.push(At)}else{break}}if("roundtrip"==AF&&Av.length>1){Av[1].origin=Av[0].destination;Av[1].destination=Av[0].origin}return Av}function x(At){c({actionCode:"deleteFlight",deletedFlightIndex:At})}function Aj(){c({actionCode:"addFlight"})}function v(Av){var Au=t.node;if(!Au){return }t.addLoadingOverlay();var At={data:{rbeTabSelected:Av.isRbe,journey:AS,requestPartials:[AM.state]},on:{success:function(Ax,Aw){if(Aw){Au.purge(true);Au.set("innerHTML",B.decodeHtmlEntities(Aw.partials[AM.state]));AK(Au);M();Ae.setRbeBooking(Av.isRbe);if(AM.state==="modifySearch"){t.onRenderState.modifySearch(Au);Q()}if(q==false&&k){t.onRenderState.searchPage(Au)}}},complete:function(){t.removeLoadingOverlay()}}};t.fireEvent("to-ajax",{cfg:At,actionCode:"loadFscPartial"})}function c(Ay){var Ax=Ay.itineraryParts||a();var Au="__"+(AM.state==="modifySearch"?"modifySearch":"searchPage")+"_"+AS.toLowerCase();var Aw=t.node.one("#airports-dates-container");if(!Aw){return }var Av=t.node.all(".trip-type-input");Aw.addClass("loading");Av.each(function(Az){Az.set("disabled","disabled")});var At={data:{actionCode:Ay.actionCode,deletedFlightIndex:Ay.deletedFlightIndex,requestPartials:[Au],journey:AS,fscItineraryParts:Ax},on:{success:function(A0,Az){if(Az){Af(Aw,Az.partials[Au]);m.toggleRedemptionSearchAllowed()}},complete:function(){Aw.removeClass("loading");Av.each(function(Az){if(!Az.hasClass("disabled")){Az.removeAttribute("disabled")}})}}};t.fireEvent("to-ajax",{cfg:At,actionCode:"loadFscPartial"})}function p(Au){var Aw=t.node.one("#fsc-pointOfSale");var Ax=Aw.ancestor(".component-section");if(Ax){Ax.addClass("loading")}var Av=Aw.get("value");var At={data:{pointOfSale:Av},on:{end:function(){if(Ax){Ax.removeClass("loading")}},success:function(Az,Ay){t.fireEvent("update-data",{data:{pointOfSale:Av}})}}};t.fireEvent("to-ajax",{cfg:At,actionCode:"changePointOfSale"})}}});YUI.add("wl-googleanalytics",function(A){A.components.Googleanalytics=function(B){this.create=false;this.render=false}});